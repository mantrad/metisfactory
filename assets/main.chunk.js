(this["webpackJsonptranchess-web"]=this["webpackJsonptranchess-web"]||[]).push([[0],{368:function(e,t,n){},387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(4),i=d(r),o=d(n(7)),c=n(30),l=d(c),u=n(20);function d(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"drawOnCanvas",value:function(e,t){var n=h(this.props,t);if((0,u.isDefined)(n)){var a=this.context,s=a.margin,r=a.ratio,i=.5*r+s.left,o=.5*r+s.top;e.save(),e.setTransform(1,0,0,1,0,0),e.scale(r,r),e.translate(i,o),n.forEach((function(t){var n=(0,u.getStrokeDasharray)(t.strokeDasharray).split(",").map((function(e){return+e}));e.strokeStyle=(0,u.hexToRGBA)(t.stroke,t.opacity),e.setLineDash(n),e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.stroke()})),e.restore()}}},{key:"renderSVG",value:function(e){var t=this.props.className,n=h(this.props,e);return(0,u.isNotDefined)(n)?null:i.default.createElement("g",{className:"react-stockcharts-crosshair "+t},n.map((function(e,t){var n=e.strokeDasharray,s=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["strokeDasharray"]);return i.default.createElement("line",a({key:t,strokeDasharray:(0,u.getStrokeDasharray)(n)},s))})))}},{key:"render",value:function(){return i.default.createElement(l.default,{svgDraw:this.renderSVG,clip:!1,canvasDraw:this.drawOnCanvas,canvasToDraw:c.getMouseCanvas,drawOn:["mousemove","pan","drag"]})}}]),t}(r.Component);function h(e,t){var n=t.mouseXY,a=t.currentItem,s=t.show,r=t.height,i=(t.width,e.customX),o=e.stroke,c=e.opacity,l=e.strokeDasharray;if(!s||(0,u.isNotDefined)(a))return null;n[1],n[1];var d=i(e,t);return[{x1:d,x2:d,y1:0,y2:r,stroke:o,strokeDasharray:l,opacity:c}]}m.propTypes={className:o.default.string,strokeDasharray:o.default.oneOf(u.strokeDashTypes)},m.contextTypes={margin:o.default.object.isRequired,ratio:o.default.number.isRequired},m.defaultProps={stroke:"#000000",opacity:.3,strokeDasharray:"ShortDash",snapX:!0,customX:function(e,t){var n=t.xScale,a=t.xAccessor,s=t.currentItem,r=t.mouseXY;return e.snapX?Math.round(n(a(s))):r[0]}},t.default=m},418:function(e,t){},462:function(e,t){},464:function(e,t){},489:function(e,t){},491:function(e,t){},503:function(e,t){},504:function(e,t){},527:function(e,t){},530:function(e,t){},532:function(e,t){},636:function(e,t){},637:function(e,t){},771:function(e,t,n){},772:function(e,t,n){},773:function(e,t,n){},774:function(e,t,n){},775:function(e,t,n){},776:function(e,t,n){},777:function(e,t,n){},778:function(e,t,n){},779:function(e,t,n){},780:function(e,t,n){},781:function(e,t,n){},782:function(e,t,n){},783:function(e,t,n){},784:function(e,t,n){},785:function(e,t,n){},786:function(e,t,n){},787:function(e,t,n){},788:function(e,t,n){},789:function(e,t,n){},790:function(e,t,n){},791:function(e,t,n){},792:function(e,t,n){},793:function(e,t,n){},794:function(e,t,n){"use strict";n.r(t);var a=n(4),s=n.n(a),r=n(99),i=n.n(r),o=n(16),c=n(183),l=n(384),u=n(370),d=n.n(u),m=n(2),h=n.n(m),p=(n(415),n(18)),b=n.n(p),f=n(5),v=n.n(f),g=n(14),j=n.n(g),k=n.p+"static/media/queen.919abdee.svg",x=n.p+"static/media/bishop.f313c27f.svg",y=n.p+"static/media/rook.96a55e0c.svg",O=n.p+"static/media/bQUEEN.5434951e.png",A=n.p+"static/media/bBISHOP.0d3344eb.png",N=n.p+"static/media/bROOK.ec3ddba0.png",w=n.p+"static/media/eQUEEN.4708d819.png",S=n.p+"static/media/eBISHOP.04762ab4.png",C=n.p+"static/media/eROOK.dc015828.png",T=n.p+"static/media/BTC.4771724b.svg",E=n.p+"static/media/wrapped-bitcoin-wbtc-logo.fd70f26c.svg",M=n.p+"static/media/usd-coin-usdc-logo.f08e02b1.svg",B=n.p+"static/media/chess_icon_white_bg.6c550db4.svg",R=n.p+"static/media/ETH_gray.02af24e8.svg",I=function(e){var t=e.symbol,n=void 0===t?"":t,a=e.name,s=void 0===a?"":a,r=e.decimals;return{symbol:n,name:s,decimals:void 0===r?18:r}},D=function(e){var t=e.chainId,n=void 0===t?0:t,a=e.name,s=void 0===a?"":a,r=e.nativeCurrency,i=void 0===r?I({}):r,o=e.explorerUrl,c=void 0===o?"":o,l=e.rpcUrls;return{chainId:n,name:s,nativeCurrency:i,explorerUrl:c,rpcUrls:void 0===l?[]:l}},P={56:D({chainId:56,name:"Binance Smart Chain Mainnet",nativeCurrency:I({symbol:"BNB",name:"Binance Chain Native Token",decimals:18}),explorerUrl:"https://bscscan.com",rpcUrls:h.a.union(["https://bsc-dataseed4.ninicoin.io/"],["https://bsc-dataseed4.binance.org/","https://bsc-dataseed1.defibit.io/","https://bsc-dataseed1.ninicoin.io/","https://bsc-dataseed4.ninicoin.io/"])}),97:D({chainId:97,name:"Binance Smart Chain Testnet",nativeCurrency:I({symbol:"tBNB",name:"Binance Chain Native Token",decimals:18}),explorerUrl:"https://testnet.bscscan.com",rpcUrls:h.a.union(["https://bsc-dataseed4.ninicoin.io/"],["https://data-seed-prebsc-1-s1.binance.org:8545/","https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/","https://data-seed-prebsc-2-s3.binance.org:8545/"])}),5777:D({chainId:5777,name:"DEV Ganache",nativeCurrency:I({symbol:"ETH",name:"Ether",decimals:18}),explorerUrl:"https://explorer.invalid",rpcUrls:["https://bsc-dataseed4.ninicoin.io/"]})},L={M:{value:0,icon:k,name:"QUEEN",chessRewardWeight:3},A:{value:1,icon:x,name:"BISHOP",chessRewardWeight:4},B:{value:2,icon:y,name:"ROOK",chessRewardWeight:2}},F={BTC:"b",BTCB:"b",ETH:"e"},U={BTC:T,BTCB:T,WBTC:E,ETH:R,USDC:M,CHESS:B,"tBTC.QUEEN":O,"tBTC.BISHOP":A,"tBTC.ROOK":N,"tBTCB.QUEEN":O,"tBTCB.BISHOP":A,"tBTCB.ROOK":N,"tETH.QUEEN":w,"tETH.BISHOP":S,"tETH.ROOK":C,eQUEEN:w,eBISHOP:S,eROOK:C},H={BTC:"2021-06-21T14:00:00Z",BTCB:"2021-06-21T14:00:00Z",ETH:"2021-11-01T14:00:00Z"},V=v()(10).pow(-16).toString(),W=81,Y=41,K=125798400,z=[0,.02,.04],G=604800,q=function(){var e=js.getState().provider,t=h.a.isNil(e.blockTimestamp)?j()():j()(e.blockTimestamp),n=j()(re(t)),a=t.unix()+15724800,s=j.a.unix(a).diff(n,"seconds");return n.add(Math.floor(s/G)*G,"seconds")},_=function(e){var t=e.initialAmount,n=void 0===t?0:t,a=e.unlockTimestamp,s=void 0===a?"":a,r=e.timestamp,i=void 0===r?"":r,o=j()(s).unix()-j()(i).unix();return Number(n)*Math.max(o,0)/K},Q=function(){var e=js.getState().governance.pancakePair,t=e.reserve0,n=e.reserve1,a=e.token0,s=e.token1,r=null;return Number(t)>0&&Number(n)>0&&!h.a.isNil(a)&&!h.a.isNil(s)&&("0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6"===a?r=v()(n).div(v()(t)).toString():"0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6"===s&&(r=v()(t).div(v()(n)).toString())),r},X=function(){var e=js.getState(),t=e.fund,n=e.governance,a=t.incomes,s=n.votingEscrow.chessBalance,r=Q(),i=null,o=null;if(!h.a.isEmpty(a))for(var c=0,l=Object.values(a);c<l.length;c++){var u=l[c],d=u.fundAddress,m=u.income,p=ae(d);if(h.a.isNil(p)||0===Number(p)){i=null;break}i=v()(i||0).plus(v()(p).times(m||0).times(.5)).toString()}h.a.isNil(i)||h.a.isNil(s)||h.a.isNil(r)||(o=v()(i).div(s).div(r).plus(1).pow(52).minus(1).toString());return o},J=function(e){var t,n=e.number,a=e.defaultPrecision,s=void 0===a?2:a,r=e.shouldApplyFloorValue,i=e.shouldReturnLocalString,o=Number(n).toLocaleString(void 0,{maximumFractionDigits:10,useGrouping:!1}),c=0===n?0:s;if(o.includes(".")){var l=o.split(".");if("0"===l[0]){var u=h.a.findIndex(l[1].split(""),(function(e){return"0"!==e}));c=Math.max(u+2,c)}}var d=Math.pow(10,c);return t=r?Math.floor(v()(n).times(d).toNumber())/d:Math.round(v()(n).times(d).toNumber())/d,i?t.toLocaleString(void 0,{minimumFractionDigits:c,maximumFractionDigits:c,useGrouping:!0}):t},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=["","K","M","B","T"],a=Math.min(Math.floor((Number.parseInt(e).toString().length-1)/3),12);return J({number:e/Math.pow(10,3*a),defaultPrecision:t,shouldReturnLocalString:!0,shouldApplyFloorValue:!0})+n[a]},$=function(e){return console.log(e),h.a.has(e,"data.message")?e.data.message.toString():h.a.has(e,"message")&&h.a.isString(e.message)?e.message:h.a.has(e,"error")&&h.a.isString(e.error)?e.error:e.toString()},ee=function(e){return Object.keys(e).filter((function(t){return!h.a.isNil(e[t])})).map((function(t){return t+"="+e[t]})).join("&")},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toString(),n=t.split("."),a=2===n.length&&n[1].length||0;return a},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:365;return v()(e||0).div(t).plus(1).pow(t).minus(1).toString()},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=js.getState(),n=t.fund,a=n.items,s=n.underlyingTokenTwaps,r=le(e),i=a[e],o=null;if(i){var c=s[e];if(h.a.has(i,"summary.totalUnderlying")&&Number(i.summary.totalUnderlying)>0){if(!h.a.isNil(r)){var l=i.summary,u=l.totalShares,d=l.totalUnderlying;o=v()(u).times(r.M).div(d).toString()}}else h.a.has(c,"value")&&(o=c.value)}return o},se=function(e){var t=(e=e?j()(e):j()()).utc().hour(),n=e.utc().hour();return t<14||14===t&&n<15?e.utc().hour(14).minute(15).startOf("minute").toISOString():e.utc().add(1,"day").hour(14).minute(15).startOf("minute").toISOString()},re=function(e){var t=(e=e?j()(e):j()()).utc().day(),n=e.utc().hour();return t<4||4===t&&n<14?e.utc().day(4).hour(14).startOf("hour").toISOString():e.utc().day(11).hour(14).startOf("hour").toISOString()},ie=function(e){var t=js.getState().fund.items,n=le(e),a=t[e],s={upperValue:null,lowerValue:null,shouldShowUpperRebalanceWarning:!1,shouldShowLowerRebalanceWarning:!1};if(!h.a.isNil(n)&&h.a.has(a,"lowerRebalanceThreshold")&&h.a.has(a,"upperRebalanceThreshold")&&Number(n.M)>0&&Number(n.A)>0&&Number(a.lowerRebalanceThreshold)>0&&Number(a.upperRebalanceThreshold)>0){var r=a.lowerRebalanceThreshold,i=a.upperRebalanceThreshold;s.upperValue=v()(i).plus(1).times(n.A).div(2).toString(),s.lowerValue=v()(r).plus(1).times(n.A).div(2).toString(),s.shouldShowUpperRebalanceWarning=v()(n.M).times(1.1).gte(s.upperValue),s.shouldShowLowerRebalanceWarning=v()(n.M).times(.9).lte(s.lowerValue)}return s},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"M",n=h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:"",a=h.a.has(e,"assets.quoteToken.symbol")?e.assets.quoteToken.symbol:"",s="BTCB"===n?"BTC":n;return"M"===t?"".concat(s||"Underlying","-Tracking token with yield farming feature"):"A"===t?"".concat(a||"USD","-based high-yielding token"):"B"===t?"Synthetic token with leveraged ".concat(s," exposure"):void 0},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"M",n=h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:"",a="BTCB"===n?"BTC":n,s=F[n]||"";return"M"===t?"<section>The ".concat(n," main fund, or token ").concat(s,"QUEEN, is ").concat("ETH"===n?"an":"a"," ").concat(a,"-tracking token with yield farming feature. ").concat(s,"QUEEN\u2019s price (the fund\u2019s Net Asset Value or NAV) tracks the ").concat(a," price.</section>\n        <section>In doing so, they will have the exact same ").concat(a," exposure and alongside the ability to farm Tranchess's CHESS tokens for further yield enhancement. CHESS is also key to receiving additional rebate from fees collected within Tranchess. Upon any intention to exit, investors can simply swap their token ").concat(s,"QUEEN back to ").concat(n," via the redemption process.</section>"):"A"===t?"<section>Tranche ".concat(s,"BISHOP is a sub-fund of the ").concat(n," main fund. It is like a high yield savings account.</section>\n        <section>").concat(s,"BISHOP holders provide liquidity to Tranche ").concat(s,"ROOK holders and earns a stable interest income on a daily basis. Since the nature of ").concat(s,"BISHOP is market neutral, i.e, delta = 0, ").concat(s,"BISHOP collects a fixed return that is not affected by market volatility. The APR is a pre-determined number, protecting the returns from market exposure and the price change of ").concat(a,".</section>\n        <section>On a weekly basis, the protocol uses Venus\u2019s Borrow rate from the previous week and calculate a weekly average, it then adds a premium on top which is determined by community voting. The total becomes ").concat(s,"BISHOP's next week's fixed APR. There's NO lock-up period.</section>"):"B"===t?"<section>Tranche ".concat(s,"ROOK is the other half of the split ").concat(n," main tranche. It is a leveraged product with no forced liquidation. </section>\n        <section>Token ").concat(s,"ROOK holder borrows daily from Token ").concat(s,"BISHOP holder to buy the main fund that tracks ").concat(a,". Token ").concat(s,"ROOK holder receives all gains and losses of the main fund, i.e., Token ").concat(s,"ROOK's return = the profits and losses of the main fund - the interest paid to Token ").concat(s,"BISHOP.</section>\n        <section>Tranche ").concat(s,"ROOK realizes a leveraged portfolio by borrowing equity from Tranche ").concat(s,"BISHOP. Tranche ").concat(s,"ROOK does not run the risk of forced liquidation, unlike leveraged products currently on the market, because it is borrowing from within the main tranche.</section>"):void 0},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=js.getState().fund.historyNAVs,n=null;return h.a.has(t,"".concat(e,".M30"))&&!h.a.isEmpty(t[e].M30)&&(n=h.a.last(t[e].M30)),n},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=le(e),n=null;return!h.a.isNil(t)&&h.a.has(t,"A")&&h.a.has(t,"B")&&(n=v()(t.A).plus(t.B).div(t.B)),n},de=function(e){var t=e.fundItem,n=void 0===t?{}:t,a=e.newWorkingSupply,s=void 0===a?"":a,r=e.shouldSkipAPY,i=void 0!==r&&r,o=js.getState(),c=o.fund,l=o.exchange,u=o.governance,d=u.chessRate,m=u.votingEscrow,p=n.fundAddress,b=n.exchangeAddress,f=n.summary,g=Q(),j=le(p),k={stakingAPR:{M:null,A:null,B:null},APY:{M:null,A:null}};if(h.a.has(f,"currentInterestRate")&&!h.a.isNil(j)&&h.a.has(l,"items.".concat(b))&&Number(d)>0&&Number(g)>0){var x=l.items[b],y=s||x.workingSupply,O=m.tradingWeekTotalSupply;if(Number(y)>0){var A=v()(d).times(f.relativeWeight||0).times(86400).div(y).div(L.M.chessRewardWeight);if(h.a.forEach(Object.keys(k.stakingAPR),(function(e){var t=v()(A).times(g).times(L[e].chessRewardWeight).div(j[e]).times(365);k.stakingAPR[e]=[t.toString(),t.times(3).toString()]})),!h.a.isNil(O)&&h.a.has(c,"incomes")&&!h.a.isEmpty(c.incomes))for(var N=null,w=0,S=Object.values(c.incomes);w<S.length;w++){var C=S[w],T=C.fundAddress,E=C.income,M=ae(T);if(h.a.isNil(E)||h.a.isNil(M)){N=null;break}N=v()(N||0).plus(v()(E).times(.5).times(M)).toString()}if(!i){var B=v()(f.currentInterestRate||0).plus(1).pow(365).minus(1);k.APY.M=[ne(k.stakingAPR.M[0],365),ne(k.stakingAPR.M[1],365)],k.APY.A=[v()(ne(k.stakingAPR.A[0],365)).plus(B).toString(),v()(ne(k.stakingAPR.A[1],365)).plus(B).toString()]}}}return k},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Y+Math[e>=0?"floor":"ceil"](parseInt(e)/25)},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return parseInt(25*(Number(e)-Y))},pe=function(e){var t=e.contract,n=e.place_timestamp,a=e.side,s=e.tranche,r=e.index;return"".concat(t,"--").concat(a,"--").concat(s,"--").concat(r,"--").concat(n)},be=function(e){var t=e.contract,n=e.epoch,a=e.side;return"".concat(t,"--").concat(n,"--").concat(a)},fe=function(e){var t=e.contract,n=e.args,a=e.event;return["TakerSettled","MakerSettled"].includes(a)&&h.a.has(n,"epoch")?"".concat(t,"--").concat(n.epoch,"--").concat("TakerSettled"===a?"taker":"maker"):null},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={mAmount:null,aAmount:null,bAmount:null};return h.a.has(e,"available")&&!h.a.isNil(e.available.tokenM)&&h.a.has(e,"locked")&&!h.a.isNil(e.locked.tokenM)&&(t.mAmount=v()(e.available.tokenM||0).plus(e.locked.tokenM||0).toString(),t.aAmount=v()(e.available.tokenA||0).plus(e.locked.tokenA||0).toString(),t.bAmount=v()(e.available.tokenB||0).plus(e.locked.tokenB||0).toString()),t},ge=function(e){var t=e.mAmount,n=void 0===t?"":t,a=e.aAmount,s=void 0===a?"":a,r=e.bAmount,i=void 0===r?"":r;return v()(n||0).times(L.M.chessRewardWeight).plus(v()(s||0).times(L.A.chessRewardWeight)).plus(v()(i||0).times(L.B.chessRewardWeight)).div(L.M.chessRewardWeight).toString()},je=function(e){var t=e.weightedSupply,n=void 0===t?"":t,a=e.mAmount,s=void 0===a?"":a,r=e.aAmount,i=void 0===r?"":r,o=e.bAmount,c=void 0===o?"":o,l=e.veProportion,u=void 0===l?0:l,d={workingAB:null,workingM:null,total:null},m=v()(n||0).times(u),h=ge({mAmount:s,aAmount:"0",bAmount:"0"}),p=ge({mAmount:"0",aAmount:i,bAmount:c}),b=v.a.min(v()(p).plus(m.times(v()(3).minus(1))),v()(p).times(3)),f=v.a.min(v()(h).plus(v.a.min(v.a.max(0,m.minus(p)),m.div(2)).times(v()(3).minus(1))),v()(h).times(3));return d.workingAB=b.toString(),d.workingM=f.toString(),d.total=b.plus(f).toString(),d},ke=function(e){var t=e.workingBalance,n=void 0===t?"":t,a=e.mAmount,s=void 0===a?"":a,r=e.aAmount,i=void 0===r?"":r,o=e.bAmount,c=void 0===o?"":o,l={workingAB:null,workingM:null,total:v()(n||0).toString()},u=ge({mAmount:s,aAmount:"0",bAmount:"0"}),d=ge({mAmount:"0",aAmount:i,bAmount:c});return l.workingM=v.a.max(v()(u),v()(n||0).minus(v()(d).times(3))).toString(),l.workingAB=v()(n||0).minus(l.workingM).toString(),l},xe=function(e){var t=e.workingSupply,n=void 0===t?"":t,a=e.mAmount,s=void 0===a?"":a,r=e.aAmount,i=void 0===r?"":r,o=e.bAmount,c=void 0===o?"":o,l=e.workingBalance,u=void 0===l?"":l,d=ge({mAmount:s,aAmount:i,bAmount:c}),m=1;return Number(n)>0&&Number(u)>0&&Number(d)>0&&(m=v()(u).div(n).div(v()(d).div(v()(n).minus(u).plus(d))).toString()),m},ye=function(e){var t=e.weightedSupply,n=void 0===t?"":t,a=e.workingSupply,s=void 0===a?"":a,r=e.mAmount,i=void 0===r?"":r,o=e.aAmount,c=void 0===o?"":o,l=e.bAmount,u=void 0===l?"":l,d=e.workingBalance,m=void 0===d?"":d,h=e.veProportion,p=je({weightedSupply:n,mAmount:i,aAmount:c,bAmount:u,veProportion:void 0===h?0:h}),b=v()(s||0).minus(m||0).plus(p.total||0).toString();return xe({workingSupply:b,mAmount:i,aAmount:c,bAmount:u,workingBalance:p.total})},Oe=function(e){var t=e.exchangeAccount,n=void 0===t?{}:t,a=e.votingEscrowAccount,s=void 0===a?{}:a,r=js.getState().provider,i=h.a.isNil(r.blockTimestamp)?j()():j()(r.blockTimestamp);return!h.a.isNil(s.unlockTime)&&j()(s.unlockTime).isAfter(i)&&v()(n.weightedBalance||0).gt(0)&&(!h.a.isEmpty(n.veSnapshot)&&(!v()(n.veSnapshot.amount||0).eq(s.amount||0)||!j()(n.veSnapshot.unlockTime).isSame(s.unlockTime))||v()(n.workingBalance||0).minus(n.weightedBalance||0).abs().lt(V))},Ae=n(150),Ne=n(3),we=n.n(Ne),Se=n(15),Ce=n(47),Te=n.n(Ce),Ee=n(24),Me=n(50),Be=n(371),Re=n.n(Be),Ie=n(397),De=n(802),Pe="ADD_LAYOUT_GLOBAL_MESSAGE",Le="UPDATE_LAYOUT_GLOBAL_MESSAGE",Fe="REMOVE_LAYOUT_GLOBAL_MESSAGE",Ue="UPDATE_LAYOUT_PAGE_ANNOUNCEMENT_HEIGHT",He="UPDATE_LAYOUT_SHOULD_SHOW_WEB3_PROVIDER_MODAL",Ve=null,We={SUCCESS:"SUCCESS",PENDING:"PENDING",SERVICE_PENDING:"SERVICE_PENDING",ERROR:"ERROR"},Ye=function(e){var t=e.id,n=e.type;return{id:t,type:void 0===n?We.PENDING:n,text:e.text,hash:e.hash}};function Ke(e){return function(t){t({type:Pe,globalMessage:e})}}function ze(e,t){return function(n){n({type:Le,messageId:e,params:t})}}function Ge(e){return function(t){t({type:Fe,messageId:e})}}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){t({type:Ue,height:e})}}function _e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){t({type:He,shouldShow:e})}}var Qe=P[56]||{},Xe=localStorage.jsonRpcUrl||"",Je=null,Ze=null,$e=null;!h.a.isEmpty(Xe)&&h.a.includes(Qe.rpcUrls||[],Xe)?Je=Xe:h.a.isEmpty(Qe.rpcUrls)||(Je=Qe.rpcUrls[0]);var et={META_MASK:"META_MASK",WALLET_CONNECT:"WALLET_CONNECT",BSC:"BSC"},tt={META_MASK:"MetaMask",WALLET_CONNECT:"WalletConnect",BSC:"Binance Chain Wallet"},nt=!1,at=!1,st=function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:et.META_MASK,n=null,e.prev=2,t!==et.META_MASK||nt){e.next=17;break}return nt=!0,e.next=7,Re()();case 7:if(n=e.sent,nt=!1,!h.a.isNil(n)){e.next=13;break}js.dispatch(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:"Missing wallet: please install MetaMask browser extension and try again"}))),e.next=15;break;case 13:return e.next=15,n.enable();case 15:e.next=30;break;case 17:if(t!==et.WALLET_CONNECT){e.next=23;break}return n=new Ie.a({rpc:Object(Me.a)({},Qe.chainId,Je),chainId:Qe.chainId}),e.next=21,n.enable();case 21:e.next=30;break;case 23:if(t!==et.BSC){e.next=30;break}if(!window.BinanceChain){e.next=30;break}return n=window.BinanceChain,e.next=28,window.BinanceChain.enable();case 28:window.BinanceChain.autoRefreshOnNetworkChange=!1,at||(window.BinanceChain.on("accountsChanged",(function(){window.location.reload()})),window.BinanceChain.on("chainChanged",(function(){window.location.reload()})),at=!0);case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(2),console.error("connectWeb3Provider Error: ",e.t0),$e=null;case 36:if(e.prev=36,!n){e.next=43;break}return $e=new Ee.a.providers.Web3Provider(n,"any"),e.next=41,$e.getNetwork();case 41:a=e.sent,h.a.has(a,"chainId")&&"56"!==a.chainId.toString()&&t===et.META_MASK&&ot();case 43:e.next=50;break;case 45:e.prev=45,e.t1=e.catch(36),console.error("connectWeb3Provider getNetwork Error: ",e.t1),js.dispatch(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:"Wrong network: please connect ".concat(tt[t]||""," wallet to ").concat(Qe.name," and try again")}))),$e=null;case 50:return e.abrupt("return",$e);case 51:case"end":return e.stop()}}),e,null,[[2,32],[36,45]])})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],e.prev=1,!h.a.isNil($e)||!t){e.next=6;break}return e.next=5,st(et.META_MASK);case 5:$e=e.sent;case 6:return e.abrupt("return",$e);case 9:e.prev=9,e.t0=e.catch(1),console.error("getWeb3Provider Error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),it=function(){try{return Ze=Ze||new Ee.a.providers.JsonRpcProvider(Je,Qe.chainId)}catch(e){console.error("getDefaultProvider Error: ",e)}},ot=function(){window.ethereum&&Qe&&window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x".concat(Number(Qe.chainId).toString(16)),chainName:Qe.name,nativeCurrency:Qe.nativeCurrency,rpcUrls:[Je],blockExplorerUrls:[Qe.explorerUrl]}]})},ct=function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=n.length>0&&void 0!==n[0]?n[0]:et.META_MASK)===et.META_MASK&&h.a.has(window,"etheruem")?window.ethereum.request({method:"eth_requestAccounts",params:[{eth_accounts:{}}]}):t===et.WALLET_CONNECT&&h.a.has($e,"provider")?$e.provider.disconnect():t===et.BSC&&h.a.has(window,"BinanceChain")&&window.BinanceChain.request({method:"eth_requestAccounts",params:[{eth_accounts:{}}]}),$e=null;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function lt(){return ut.apply(this,arguments)}function ut(){return ut=Object(Se.a)(we.a.mark((function e(){var t,n,a,s=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]&&s[0],n=null,h.a.isEmpty(Qe.rpcUrls)){e.next=11;break}if(1!==h.a.size(Qe.rpcUrls)){e.next=7;break}n=Qe.rpcUrls[0],e.next=11;break;case 7:return a=[],e.next=10,Promise.all(h.a.map(Qe.rpcUrls,function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new Ee.a.providers.JsonRpcProvider(t,Qe.chainId),e.next=4,n.getBlockNumber();case 4:s=e.sent,a.push({rpcUrl:t,blockNumber:s}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("pickRpcEndpoint error: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));case 10:h.a.isEmpty(a)||(n=h.a.maxBy(a,"blockNumber").rpcUrl);case 11:return h.a.isNil(n)||h.a.isEqual(Je,n)||(localStorage.jsonRpcUrl=n,t&&navigator.onLine&&window.location.reload()),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)}))),ut.apply(this,arguments)}it();var dt=Ee.a.utils.formatUnits,mt={contract:new Ee.a.Contract("0x97993CD66E13fB3F4877886Cf5974c4Bc78F74af",["function getProtocolData (address primaryMarketAddress, address exchangeAddress, address pancakePairAddress, address feeDistributorAddress, address account) view returns (\n        uint256 blockNumber,\n        uint256 blockTimestamp,\n        tuple (\n            tuple (\n                uint256 underlyingToken,\n                uint256 quoteToken,\n                uint256 tokenM,\n                uint256 tokenA,\n                uint256 tokenB,\n                uint256 chess\n            ) balance,\n            tuple (\n                uint256 primaryMarketUnderlying,\n                tuple (\n                    uint256 quoteToken,\n                    uint256 tokenM,\n                    uint256 tokenA,\n                    uint256 tokenB\n                ) exchange,\n                uint256 votingEscrowChess\n            ) allowance\n        ) wallet,\n        tuple (\n            bool isFundActive,\n            bool isPrimaryMarketActive,\n            bool isExchangeActive,\n            uint256 fundActivityStartTime,\n            uint256 exchangeActivityStartTime,\n            uint256 currentDay,\n            uint256 currentWeek,\n            uint256 dailyProtocolFeeRate,\n            uint256 totalShares,\n            uint256 totalUnderlying,\n            uint256 rebalanceSize,\n            uint256 currentInterestRate,\n            tuple (\n                uint256 ratioM,\n                uint256 ratioA2M,\n                uint256 ratioB2M,\n                uint256 ratioAB,\n                uint256 timestamp\n            ) lastRebalance,\n            uint256 relativeWeight,\n        ) fund,\n        tuple (\n            uint256 currentCreatingUnderlying,\n            uint256 currentRedeemingShares,\n            tuple (\n                uint256 day,\n                uint256 creatingUnderlying,\n                uint256 redeemingShares,\n                uint256 createdShares,\n                uint256 redeemedUnderlying,\n                uint256 version\n            ) account\n        ) primaryMarket,\n        tuple (\n            tuple (\n                uint256 tokenM,\n                uint256 tokenA,\n                uint256 tokenB\n            ) totalDeposited,\n            uint256 weightedSupply,\n            uint256 workingSupply,\n            tuple (\n                tuple (\n                    uint256 tokenM,\n                    uint256 tokenA,\n                    uint256 tokenB\n                ) available,\n                tuple (\n                    uint256 tokenM,\n                    uint256 tokenA,\n                    uint256 tokenB\n                ) locked,\n                uint256 weightedBalance,\n                uint256 workingBalance,\n                tuple (\n                    uint256 veProportion,\n                    uint256 amount,\n                    uint256 unlockTime\n                ) veSnapshot,\n                bool isMaker,\n                uint256 chessRewards\n            ) account\n        ) exchange,\n        tuple (\n            uint256 chessTotalSupply,\n            uint256 chessRate,\n            tuple (\n                uint256 chessBalance,\n                uint256 totalSupply,\n                int256 tradingWeekTotalSupply,\n                tuple (\n                    uint256 amount,\n                    uint256 unlockTime\n                ) account\n            ) votingEscrow,\n            tuple (\n                uint256 tradingWeekTotalSupply,\n                tuple (\n                    uint256 amount,\n                    uint256 unlockTime,\n                    uint256 weight\n                ) account\n            ) interestRateBallot,\n            tuple ( \n                tuple (\n                    uint256 claimableRewards,\n                    uint256 currentBalance,\n                    uint256 amount,\n                    uint256 unlockTime\n                ) account,\n                uint256 currentRewards,\n                uint256 currentSupply,\n                uint256 tradingWeekTotalSupply\n            ) feeDistributor\n        ) governance,\n        tuple (\n            uint112 reserve0,\n            uint112 reserve1,\n            address token0,\n            address token1\n        ) pair\n    )","function getUnsettledTrades (address exchangeAddress, address account, uint256[] epochs) view returns (\n        tuple[] (\n            tuple(uint256 frozenQuote, uint256 effectiveQuote, uint256 reservedBase) takerBuy,\n            tuple(uint256 frozenBase, uint256 effectiveBase, uint256 reservedQuote) takerSell,\n            tuple(uint256 frozenBase, uint256 effectiveBase, uint256 reservedQuote) makerBuy,\n            tuple(uint256 frozenQuote, uint256 effectiveQuote, uint256 reservedBase) makerSell\n        ) unsettledTradeM,\n        tuple[] (\n            tuple(uint256 frozenQuote, uint256 effectiveQuote, uint256 reservedBase) takerBuy,\n            tuple(uint256 frozenBase, uint256 effectiveBase, uint256 reservedQuote) takerSell,\n            tuple(uint256 frozenBase, uint256 effectiveBase, uint256 reservedQuote) makerBuy,\n            tuple(uint256 frozenQuote, uint256 effectiveQuote, uint256 reservedBase) makerSell\n        ) unsettledTradeA,\n        tuple[] (\n            tuple(uint256 frozenQuote, uint256 effectiveQuote, uint256 reservedBase) takerBuy,\n            tuple(uint256 frozenBase, uint256 effectiveBase, uint256 reservedQuote) takerSell,\n            tuple(uint256 frozenBase, uint256 effectiveBase, uint256 reservedQuote) makerBuy,\n            tuple(uint256 frozenQuote, uint256 effectiveQuote, uint256 reservedBase) makerSell\n        ) unsettledTradeB\n    )"],it()),getProtocolData:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,h,p,b,f,v;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.primaryMarketAddress,a=void 0===n?"":n,s=t.exchangeAddress,r=void 0===s?"":s,i=t.pancakePairAddress,o=void 0===i?Ee.a.constants.AddressZero:i,c=t.feeDistributorAddress,l=void 0===c?Ee.a.constants.AddressZero:c,u=t.accountAddress,d=void 0===u?Ee.a.constants.AddressZero:u,m=t.underlyingTokenDecimals,h=void 0===m?18:m,p=t.quoteTokenDecimals,b=void 0===p?18:p,e.next=3,this.contract.getProtocolData(a,r,o,l,d);case 3:return f=e.sent,v={blockNumber:f.blockNumber.toNumber(),blockTimestamp:j.a.unix(f.blockTimestamp.toNumber()).toISOString(),wallet:{balance:{underlyingToken:dt(f.wallet.balance.underlyingToken,h),quoteToken:dt(f.wallet.balance.quoteToken,b),tokenM:dt(f.wallet.balance.tokenM),tokenA:dt(f.wallet.balance.tokenA),tokenB:dt(f.wallet.balance.tokenB),chess:dt(f.wallet.balance.chess)},allowance:{primaryMarketUnderlying:dt(f.wallet.allowance.primaryMarketUnderlying,h),exchange:{quoteToken:dt(f.wallet.allowance.exchange.quoteToken,b),tokenM:dt(f.wallet.allowance.exchange.tokenM),tokenA:dt(f.wallet.allowance.exchange.tokenA),tokenB:dt(f.wallet.allowance.exchange.tokenB)},votingEscrowChess:dt(f.wallet.allowance.votingEscrowChess)}},fund:{isFundActive:f.fund.isFundActive,isPrimaryMarketActive:f.fund.isPrimaryMarketActive,isExchangeActive:f.fund.isExchangeActive,fundActivityStartTime:j.a.unix(f.fund.fundActivityStartTime.toNumber()).toISOString(),exchangeActivityStartTime:j.a.unix(f.fund.exchangeActivityStartTime.toNumber()).toISOString(),currentDay:j.a.unix(f.fund.currentDay.toNumber()).toISOString(),currentWeek:j.a.unix(f.fund.currentWeek.toNumber()).toISOString(),dailyProtocolFeeRate:dt(f.fund.dailyProtocolFeeRate),totalShares:dt(f.fund.totalShares),totalUnderlying:dt(f.fund.totalUnderlying,h),rebalanceSize:f.fund.rebalanceSize.toNumber(),currentInterestRate:dt(f.fund.currentInterestRate),lastRebalance:{ratioM:dt(f.fund.lastRebalance.ratioM),ratioA2M:dt(f.fund.lastRebalance.ratioA2M),ratioB2M:dt(f.fund.lastRebalance.ratioB2M),ratioAB:dt(f.fund.lastRebalance.ratioAB),timestamp:j.a.unix(f.fund.lastRebalance.timestamp.toNumber()).toISOString()},relativeWeight:dt(f.fund.relativeWeight)},primaryMarket:{currentCreatingUnderlying:dt(f.primaryMarket.currentCreatingUnderlying,h),currentRedeemingShares:dt(f.primaryMarket.currentRedeemingShares),account:{day:j.a.unix(f.primaryMarket.account.day.toNumber()).toISOString(),creatingUnderlying:dt(f.primaryMarket.account.creatingUnderlying,h),redeemingShares:dt(f.primaryMarket.account.redeemingShares),createdShares:dt(f.primaryMarket.account.createdShares),redeemedUnderlying:dt(f.primaryMarket.account.redeemedUnderlying,h),version:f.primaryMarket.account.version.toNumber()}},exchange:{totalDeposited:{tokenM:dt(f.exchange.totalDeposited.tokenM),tokenA:dt(f.exchange.totalDeposited.tokenA),tokenB:dt(f.exchange.totalDeposited.tokenB)},weightedSupply:dt(f.exchange.weightedSupply),workingSupply:dt(f.exchange.workingSupply),account:{available:{tokenM:dt(f.exchange.account.available.tokenM),tokenA:dt(f.exchange.account.available.tokenA),tokenB:dt(f.exchange.account.available.tokenB)},locked:{tokenM:dt(f.exchange.account.locked.tokenM),tokenA:dt(f.exchange.account.locked.tokenA),tokenB:dt(f.exchange.account.locked.tokenB)},weightedBalance:dt(f.exchange.account.weightedBalance),workingBalance:dt(f.exchange.account.workingBalance),veSnapshot:{veProportion:dt(f.exchange.account.veSnapshot.veProportion),amount:dt(f.exchange.account.veSnapshot.amount),unlockTime:j.a.unix(f.exchange.account.veSnapshot.unlockTime.toNumber()).toISOString()},isMaker:f.exchange.account.isMaker,chessRewards:dt(f.exchange.account.chessRewards)}},governance:{chessTotalSupply:dt(f.governance.chessTotalSupply),chessRate:dt(f.governance.chessRate),votingEscrow:{chessBalance:dt(f.governance.votingEscrow.chessBalance),totalSupply:dt(f.governance.votingEscrow.totalSupply),tradingWeekTotalSupply:dt(f.governance.votingEscrow.tradingWeekTotalSupply),account:{amount:dt(f.governance.votingEscrow.account.amount),unlockTime:j.a.unix(f.governance.votingEscrow.account.unlockTime.toNumber()).toISOString()}},interestRateBallot:{tradingWeekTotalSupply:dt(f.governance.interestRateBallot.tradingWeekTotalSupply),account:{amount:dt(f.governance.interestRateBallot.account.amount),unlockTime:j.a.unix(f.governance.interestRateBallot.account.unlockTime.toNumber()).toISOString(),weight:dt(f.governance.interestRateBallot.account.weight)}},feeDistributor:{account:{claimableRewards:dt(f.governance.feeDistributor.account.claimableRewards,h),currentBalance:dt(f.governance.feeDistributor.account.currentBalance),amount:dt(f.governance.feeDistributor.account.amount),unlockTime:j.a.unix(f.governance.feeDistributor.account.unlockTime.toNumber()).toISOString()},currentRewards:dt(f.governance.feeDistributor.currentRewards,h),currentSupply:dt(f.governance.feeDistributor.currentSupply),tradingWeekTotalSupply:dt(f.governance.feeDistributor.tradingWeekTotalSupply)}},pair:[f.pair.token0,f.pair.token1].includes("0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6")?{reserve0:dt(f.pair.reserve0,"0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6"===f.pair.token0?18:b),reserve1:dt(f.pair.reserve1,"0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6"===f.pair.token1?18:b),token0:f.pair.token0,token1:f.pair.token1}:{}},e.abrupt("return",v);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),getUnsettledTrades:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.exchangeAddress,a=void 0===n?"":n,s=t.accountAddress,r=void 0===s?"":s,i=t.epochs,o=void 0===i?[]:i,e.next=3,this.contract.getUnsettledTrades(a,r,o);case 3:return c=e.sent,l=["M","A","B"],u=h.a.map(o,(function(e,t){return h.a.reduce(l,(function(e,n,a){return e[n]={takerBuy:{frozenQuote:dt(c[a][t].takerBuy.frozenQuote),effectiveQuote:dt(c[a][t].takerBuy.effectiveQuote),reservedBase:dt(c[a][t].takerBuy.reservedBase)},takerSell:{frozenBase:dt(c[a][t].takerSell.frozenBase),effectiveBase:dt(c[a][t].takerSell.effectiveBase),reservedQuote:dt(c[a][t].takerSell.reservedQuote)},makerBuy:{frozenBase:dt(c[a][t].makerBuy.frozenBase),effectiveBase:dt(c[a][t].makerBuy.effectiveBase),reservedQuote:dt(c[a][t].makerBuy.reservedQuote)},makerSell:{frozenQuote:dt(c[a][t].makerSell.frozenQuote),effectiveQuote:dt(c[a][t].makerSell.effectiveQuote),reservedBase:dt(c[a][t].makerSell.reservedBase)}},e}),{})})),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},ht=Ee.a.utils,pt=ht.formatUnits,bt=ht.parseUnits,ft=["function creationRedemptionOf (address account) view returns (tuple(uint256 day, uint256 creatingUnderlying, uint256 redeemingShares, uint256 createdShares, uint256 redeemedUnderlying, uint256 version))","function create (uint256 underlying)","function redeem (uint256 shares)","function claim (address account)","function merge (uint256 inA)","function split (uint256 sharesP)","function guardedLaunchTotalCap () view returns (uint256)","function guardedLaunchIndividualCap () view returns (uint256)","function guardedLaunchCreations (address account) view returns (uint256)"],vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return{contract:h.a.isEmpty(e)?null:new Ee.a.Contract(e,ft,it()),creationRedemptionOf:function(){var e=Object(Se.a)(we.a.mark((function e(n){var a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.creationRedemptionOf(n);case 2:return a=e.sent,e.abrupt("return",{claimableTimestamp:j.a.unix(a[0].toNumber()).toISOString(),creatingUnderlying:pt(a[1],t),redeemingShares:pt(a[2]),createdShares:pt(a[3]),redeemedUnderlying:pt(a[4],t)});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(Se.a)(we.a.mark((function e(){var n,a,s,r,i=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:"",e.next=3,rt();case 3:return a=e.sent,s=a.getSigner(),r=this.contract.connect(s),e.next=8,r.create(bt(h.a.toString(n),t));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),redeem:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,rt();case 3:return n=e.sent,a=n.getSigner(),s=this.contract.connect(a),e.next=8,s.redeem(bt(h.a.toString(t)));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),claim:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,rt();case 3:return n=e.sent,a=n.getSigner(),s=this.contract.connect(a),e.next=8,s.claim(t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),merge:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,rt();case 3:return n=e.sent,a=n.getSigner(),s=this.contract.connect(a),e.abrupt("return",s.merge(bt(h.a.toString(t))));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),split:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,rt();case 3:return n=e.sent,a=n.getSigner(),s=this.contract.connect(a),e.next=8,s.split(bt(h.a.toString(t)));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),guardedLaunchTotalCap:function(){var e=Object(Se.a)(we.a.mark((function e(){var n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.guardedLaunchTotalCap();case 2:return n=e.sent,e.abrupt("return",pt(n,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),guardedLaunchIndividualCap:function(){var e=Object(Se.a)(we.a.mark((function e(){var n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.guardedLaunchIndividualCap();case 2:return n=e.sent,e.abrupt("return",pt(n,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),guardedLaunchCreations:function(){var e=Object(Se.a)(we.a.mark((function e(){var n,a,s=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:"",e.next=3,this.contract.guardedLaunchCreations(n);case 3:return a=e.sent,e.abrupt("return",pt(a,t));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},gt=Ee.a.utils.formatUnits,jt="UPDATE_IS_FETCHING_PRIMARY_MARKET_ACCOUNT_EVENTS",kt="UPDATE_PRIMARY_MARKET_VARIABLES",xt="UPDATE_PRIMARY_MARKET_SUMMARY",yt="UPDATE_PRIMARY_MARKET_ACCOUNT",Ot="UPDATE_PRIMARY_MARKET_ACCOUNT_EVENT",At="CLEAR_PRIMARY_MARKET_ACCOUNT_DATA",Nt="UPDATE_PRIMARY_MARKET_GUARDED_LAUNCH_DATA";function wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){n({type:xt,primaryMarketAddress:e,summary:t})}}function St(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){n({type:yt,primaryMarketAddress:e,account:t})}}function Ct(){return function(e){e({type:At})}}function Tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n({type:Ot,count:e,items:t})}}var Et=Ee.a.utils,Mt=Et.parseUnits,Bt=Et.formatUnits,Rt=["function extrapolateNav (uint256 timestamp, uint256 price) view returns (uint256 M, uint256 A, uint256 B)","function getRebalance (uint256 index) view returns (\n        uint256 ratioM,\n        uint256 ratioA2M,\n        uint256 ratioB2M,\n        uint256 ratioAB,\n        uint256 timestamp\n    )"],It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{contract:h.a.isEmpty(e)?null:new Ee.a.Contract(e,Rt,it()),extrapolateNav:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:"",e.next=4,this.contract.extrapolateNav(j()(t).unix(),Mt(h.a.toString(n)));case 4:return a=e.sent,e.abrupt("return",{M:Bt(a.M),A:Bt(a.A),B:Bt(a.B)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getRebalance:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,this.contract.getRebalance(t);case 3:return n=e.sent,e.abrupt("return",{ratioM:Bt(n.ratioM),ratioA2M:Bt(n.ratioA2M),ratioB2M:Bt(n.ratioB2M),ratioAB:Bt(n.ratioAB),timestamp:j.a.unix(n.timestamp.toNumber()).toISOString()});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},Dt=["function getTwap (uint256 timestamp) view returns (uint256 price)"],Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{contract:h.a.isEmpty(e)?null:new Ee.a.Contract(e,Dt,it()),getTwap:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.getTwap(j()(t).unix());case 2:return n=e.sent,e.abrupt("return",Ee.a.utils.formatUnits(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}},Lt=Ee.a.utils,Ft=Lt.parseUnits,Ut=Lt.formatUnits,Ht=["function totalSupply (uint256 tranche) view returns (uint256)","function claimAndDeposit (address primaryMarket)","function isMaker (address account) view returns (bool)","function applyForMaker ()","function placeBid (uint256 tranche, uint256 pdLevel, uint256 quoteAmount, uint256 version)","function placeAsk (uint256 tranche, uint256 pdLevel, uint256 baseAmount, uint256 version)","function buyM (uint256 version, uint256 maxPDLevel, uint256 quoteAmount)","function sellM (uint256 version, uint256 minPDLevel, uint256 baseAmount)","function buyA (uint256 version, uint256 maxPDLevel, uint256 quoteAmount)","function sellA (uint256 version, uint256 minPDLevel, uint256 baseAmount)","function buyB (uint256 version, uint256 maxPDLevel, uint256 quoteAmount)","function sellB (uint256 version, uint256 minPDLevel, uint256 baseAmount)","function settleMaker (address account, uint256 epoch) returns (uint256 amountM, uint256 amountA, uint256 amountB, uint256 quoteAmount)","function settleTaker (address account, uint256 epoch) returns (uint256 amountM, uint256 amountA, uint256 amountB, uint256 quoteAmount)","function deposit (uint256 tranche, uint256 amount)","function withdraw (uint256 tranche, uint256 amount)","function availableBalanceOf (uint256 tranche, address account) view returns (uint256)","function lockedBalanceOf (uint256 tranche, address account) view returns (uint256)","function claimableRewards (address account) view returns (uint256)","function claimRewards (address account)","function cancelBid (uint256 version, uint256 tranche, uint256 pdLevel, uint256 index)","function cancelAsk (uint256 version, uint256 tranche, uint256 pdLevel, uint256 index)","function unsettledTrades (address account, uint256 tranche, uint256 epochID) view returns (tuple(uint256 frozenQuote, uint256 effectiveQuote, uint256 reservedBase) takerBuy, tuple(uint256 frozenBase, uint256 effectiveBase, uint256 reservedQuote) takerSell, tuple(uint256 frozenBase, uint256 effectiveBase, uint256 reservedQuote) makerBuy, tuple(uint256 frozenQuote, uint256 effectiveQuote, uint256 reservedBase) makerSell)","function syncWithVotingEscrow (address account)"],Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{contract:h.a.isEmpty(e)?null:new Ee.a.Contract(e,Ht,it()),getAdjustedGasLimit:function(e){return Math.floor(1.05*e.toNumber()+6e4)},totalSupply:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,this.contract.totalSupply(t);case 3:return n=e.sent,e.abrupt("return",Ut(n));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),claimAndDeposit:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:return n=e.sent,a=n.getSigner(),s=this.contract.connect(a),e.next=7,s.estimateGas.claimAndDeposit(t);case 7:return r=e.sent,e.next=10,s.claimAndDeposit(t,{gasLimit:this.getAdjustedGasLimit(r)});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),isMaker:function(){var e=Object(Se.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.isMaker(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),applyForMaker:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:return t=e.sent,n=t.getSigner(),a=this.contract.connect(n),e.next=7,a.estimateGas.applyForMaker();case 7:return s=e.sent,e.next=10,a.applyForMaker({gasLimit:this.getAdjustedGasLimit(s)});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),placeBid:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p,b,f;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tranche,s=void 0===a?0:a,r=t.pdLevel,i=void 0===r?41:r,o=t.quoteAmount,c=void 0===o?"":o,l=t.version,u=void 0===l?0:l,e.next=3,rt();case 3:return d=e.sent,m=d.getSigner(),p=this.contract.connect(m),b=[s,i,Ft(h.a.toString(c)),u],e.next=9,(n=p.estimateGas).placeBid.apply(n,b);case 9:return f=e.sent,e.next=12,p.placeBid.apply(p,b.concat([{gasLimit:this.getAdjustedGasLimit(f)}]));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),placeAsk:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p,b,f;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tranche,s=void 0===a?0:a,r=t.pdLevel,i=void 0===r?41:r,o=t.baseAmount,c=void 0===o?"":o,l=t.version,u=void 0===l?0:l,e.next=3,rt();case 3:return d=e.sent,m=d.getSigner(),p=this.contract.connect(m),b=[s,i,Ft(h.a.toString(c)),u],e.next=9,(n=p.estimateGas).placeAsk.apply(n,b);case 9:return f=e.sent,e.next=12,p.placeAsk.apply(p,b.concat([{gasLimit:this.getAdjustedGasLimit(f)}]));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),buyM:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.version,s=void 0===a?0:a,r=t.maxPDLevel,i=void 0===r?41:r,o=t.quoteAmount,c=void 0===o?"":o,e.next=3,rt();case 3:return l=e.sent,u=l.getSigner(),d=this.contract.connect(u),m=[s,i,Ft(h.a.toString(c))],e.next=9,(n=d.estimateGas).buyM.apply(n,m);case 9:return p=e.sent,e.next=12,d.buyM.apply(d,m.concat([{gasLimit:this.getAdjustedGasLimit(p)}]));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),sellM:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.version,s=void 0===a?0:a,r=t.minPDLevel,i=void 0===r?41:r,o=t.baseAmount,c=void 0===o?"":o,e.next=3,rt();case 3:return l=e.sent,u=l.getSigner(),d=this.contract.connect(u),m=[s,i,Ft(h.a.toString(c))],e.next=9,(n=d.estimateGas).sellM.apply(n,m);case 9:return p=e.sent,e.next=12,d.sellM.apply(d,m.concat([{gasLimit:this.getAdjustedGasLimit(p)}]));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),buyA:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.version,s=void 0===a?0:a,r=t.maxPDLevel,i=void 0===r?41:r,o=t.quoteAmount,c=void 0===o?"":o,e.next=3,rt();case 3:return l=e.sent,u=l.getSigner(),d=this.contract.connect(u),m=[s,i,Ft(h.a.toString(c))],e.next=9,(n=d.estimateGas).buyA.apply(n,m);case 9:return p=e.sent,e.next=12,d.buyA.apply(d,m.concat([{gasLimit:this.getAdjustedGasLimit(p)}]));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),sellA:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.version,s=void 0===a?0:a,r=t.minPDLevel,i=void 0===r?41:r,o=t.baseAmount,c=void 0===o?"":o,e.next=3,rt();case 3:return l=e.sent,u=l.getSigner(),d=this.contract.connect(u),m=[s,i,Ft(h.a.toString(c))],e.next=9,(n=d.estimateGas).sellA.apply(n,m);case 9:return p=e.sent,e.next=12,d.sellA.apply(d,m.concat([{gasLimit:this.getAdjustedGasLimit(p)}]));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),buyB:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.version,s=void 0===a?0:a,r=t.maxPDLevel,i=void 0===r?41:r,o=t.quoteAmount,c=void 0===o?"":o,e.next=3,rt();case 3:return l=e.sent,u=l.getSigner(),d=this.contract.connect(u),m=[s,i,Ft(h.a.toString(c))],e.next=9,(n=d.estimateGas).buyB.apply(n,m);case 9:return p=e.sent,e.next=12,d.buyB.apply(d,m.concat([{gasLimit:this.getAdjustedGasLimit(p)}]));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),sellB:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.version,s=void 0===a?0:a,r=t.minPDLevel,i=void 0===r?41:r,o=t.baseAmount,c=void 0===o?"":o,e.next=3,rt();case 3:return l=e.sent,u=l.getSigner(),d=this.contract.connect(u),m=[s,i,Ft(h.a.toString(c))],e.next=9,(n=d.estimateGas).sellB.apply(n,m);case 9:return p=e.sent,e.next=12,d.sellB.apply(d,m.concat([{gasLimit:this.getAdjustedGasLimit(p)}]));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),settleMaker:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.accountAddress,a=void 0===n?"":n,s=t.epoch,r=void 0===s?0:s,i=t.shouldCallStatic,o=void 0!==i&&i,e.next=3,rt();case 3:if(c=e.sent,l=c.getSigner(),u=this.contract.connect(l),!o){e.next=13;break}return e.next=9,u.callStatic.settleMaker(a,r);case 9:return d=e.sent,e.abrupt("return",{M:Ut(d[0]),A:Ut(d[1]),B:Ut(d[2]),quoteToken:Ut(d[3])});case 13:return e.next=15,u.estimateGas.settleMaker(a,r);case 15:return m=e.sent,e.next=18,u.settleMaker(a,r,{gasLimit:this.getAdjustedGasLimit(m)});case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),settleTaker:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.accountAddress,a=void 0===n?"":n,s=t.epoch,r=void 0===s?0:s,i=t.shouldCallStatic,o=void 0!==i&&i,e.next=3,rt();case 3:if(c=e.sent,l=c.getSigner(),u=this.contract.connect(l),!o){e.next=13;break}return e.next=9,u.callStatic.settleTaker(a,r);case 9:return d=e.sent,e.abrupt("return",{M:Ut(d[0]),A:Ut(d[1]),B:Ut(d[2]),quoteToken:Ut(d[3])});case 13:return e.next=15,u.estimateGas.settleTaker(a,r);case 15:return m=e.sent,e.next=18,u.settleTaker(a,r,{gasLimit:this.getAdjustedGasLimit(m)});case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),deposit:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:0,a=l.length>1&&void 0!==l[1]?l[1]:"",e.next=4,rt();case 4:return s=e.sent,r=s.getSigner(),i=this.contract.connect(r),o=[n,Ft(h.a.toString(a))],e.next=10,(t=i.estimateGas).deposit.apply(t,o);case 10:return c=e.sent,e.next=13,i.deposit.apply(i,o.concat([{gasLimit:this.getAdjustedGasLimit(c)}]));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),withdraw:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:0,a=l.length>1&&void 0!==l[1]?l[1]:"",e.next=4,rt();case 4:return s=e.sent,r=s.getSigner(),i=this.contract.connect(r),o=[n,Ft(h.a.toString(a))],e.next=10,(t=i.estimateGas).withdraw.apply(t,o);case 10:return c=e.sent,e.next=13,i.withdraw.apply(i,o.concat([{gasLimit:this.getAdjustedGasLimit(c)}]));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),availableBalanceOf:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:0,n=s.length>1&&void 0!==s[1]?s[1]:"",e.next=4,this.contract.availableBalanceOf(t,n);case 4:return a=e.sent,e.abrupt("return",Ut(a));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),lockedBalanceOf:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:0,n=s.length>1&&void 0!==s[1]?s[1]:"",e.next=4,this.contract.lockedBalanceOf(t,n);case 4:return a=e.sent,e.abrupt("return",Ut(a));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),claimableRewards:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.claimableRewards(t);case 2:return n=e.sent,e.abrupt("return",Ut(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),claimRewards:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:return t=e.sent,n=t.getSigner(),e.next=6,n.getAddress();case 6:return a=e.sent,s=this.contract.connect(n),e.next=10,s.estimateGas.claimRewards(a);case 10:return r=e.sent,e.next=13,s.claimRewards(a,{gasLimit:this.getAdjustedGasLimit(r)});case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),cancelBid:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,h,p,b;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.version,s=void 0===a?0:a,r=t.tranche,i=void 0===r?0:r,o=t.pdLevel,c=void 0===o?41:o,l=t.index,u=void 0===l?1:l,e.next=3,rt();case 3:return d=e.sent,m=d.getSigner(),h=this.contract.connect(m),p=[s,i,c,u],e.next=9,(n=h.estimateGas).cancelBid.apply(n,p);case 9:return b=e.sent,e.next=12,h.cancelBid.apply(h,p.concat([{gasLimit:this.getAdjustedGasLimit(b)}]));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),cancelAsk:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,h,p,b;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.version,s=void 0===a?0:a,r=t.tranche,i=void 0===r?0:r,o=t.pdLevel,c=void 0===o?41:o,l=t.index,u=void 0===l?1:l,e.next=3,rt();case 3:return d=e.sent,m=d.getSigner(),h=this.contract.connect(m),p=[s,i,c,u],e.next=9,(n=h.estimateGas).cancelAsk.apply(n,p);case 9:return b=e.sent,e.next=12,h.cancelAsk.apply(h,p.concat([{gasLimit:this.getAdjustedGasLimit(b)}]));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),unsettledTrades:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.accountAddress,a=void 0===n?"":n,s=t.tranche,r=void 0===s?0:s,i=t.epochID,o=void 0===i?0:i,e.next=3,this.contract.unsettledTrades(a,r,o);case 3:return c=e.sent,l=c.takerBuy,u=c.takerSell,d=c.makerBuy,m=c.makerSell,e.abrupt("return",{takerBuy:{frozenQuote:Ut(l.frozenQuote),effectiveQuote:Ut(l.effectiveQuote),reservedBase:Ut(l.reservedBase)},takerSell:{frozenBase:Ut(u.frozenBase),effectiveBase:Ut(u.effectiveBase),reservedQuote:Ut(u.reservedQuote)},makerBuy:{frozenBase:Ut(d.frozenBase),effectiveBase:Ut(d.effectiveBase),reservedQuote:Ut(d.reservedQuote)},makerSell:{frozenQuote:Ut(m.frozenQuote),effectiveQuote:Ut(m.effectiveQuote),reservedBase:Ut(m.reservedBase)}});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),syncWithVotingEscrow:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:return t=e.sent,n=t.getSigner(),e.next=6,n.getAddress();case 6:return a=e.sent,s=this.contract.connect(n),e.next=10,s.estimateGas.syncWithVotingEscrow(a);case 10:return r=e.sent,e.next=13,s.syncWithVotingEscrow(a,{gasLimit:this.getAdjustedGasLimit(r)});case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},Wt=["function syncWithVotingEscrow (address account)","function claimRewards (address account)"],Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{contract:h.a.isEmpty(e)?null:new Ee.a.Contract(e,Wt,it()),syncWithVotingEscrow:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:return t=e.sent,n=t.getSigner(),e.next=6,n.getAddress();case 6:return a=e.sent,s=this.contract.connect(n),e.next=10,s.syncWithVotingEscrow(a);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),claimRewards:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:return t=e.sent,n=t.getSigner(),e.next=6,n.getAddress();case 6:return a=e.sent,s=this.contract.connect(n),e.next=10,s.claimRewards(a);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},Kt=Ee.a.utils,zt=Kt.formatUnits,Gt=Kt.parseUnits,qt=["function symbol () view returns (string)","function decimals () view returns (uint8)","function totalSupply () view returns (uint256)","function balanceOf (address _owner) view returns (uint256)","function allowance (address _owner, address _spender) view returns (uint256)","function approve (address _spender, uint256 _value) returns (bool)"],_t=function(e){var t=e.contractAddress,n=void 0===t?"":t,a=e.SYMBOL,s=void 0===a?null:a,r=e.DECIMALS,i=void 0===r?null:r;return{contract:h.a.isEmpty(n)?null:new Ee.a.Contract(n,qt,it()),SYMBOL:s,DECIMALS:i,symbol:function(){var e=Object(Se.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.a.isNil(this.SYMBOL)){e.next=4;break}return e.next=3,this.contract.symbol();case 3:this.SYMBOL=e.sent;case 4:return e.abrupt("return",this.SYMBOL);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),decimals:function(){var e=Object(Se.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.a.isNil(this.DECIMALS)){e.next=4;break}return e.next=3,this.contract.decimals();case 3:this.DECIMALS=e.sent;case 4:return e.abrupt("return",this.DECIMALS);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),totalSupply:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decimals();case 2:return t=e.sent,e.next=5,this.contract.totalSupply();case 5:return n=e.sent,e.abrupt("return",zt(n,t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),balanceOf:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decimals();case 2:return n=e.sent,e.next=5,this.contract.balanceOf(t);case 5:return a=e.sent,e.abrupt("return",zt(a,n));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),allowance:function(){var e=Object(Se.a)(we.a.mark((function e(t,n){var a,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decimals();case 2:return a=e.sent,e.next=5,this.contract.allowance(t,n);case 5:return s=e.sent,e.abrupt("return",zt(s,a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),approve:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",e.next=3,rt();case 3:return a=e.sent,s=a.getSigner(),e.next=7,this.decimals();case 7:return r=e.sent,i=this.contract.connect(s),e.next=11,i.approve(t,Gt(h.a.toString(n),r));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}};_t({contractAddress:"0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6",SYMBOL:"CHESS",DECIMALS:18});function Qt(e){var t=e.fund,n=void 0===t?It():t,a=e.twapOracle,s=void 0===a?Pt():a,r=e.primaryMarket,i=void 0===r?vt():r,o=e.exchange,c=void 0===o?Vt():o,l=e.feeDistributor,u=void 0===l?Yt():l,d=e.underlyingToken,m=void 0===d?_t({}):d,h=e.quoteToken,p=void 0===h?_t({}):h,b=e.mToken,f=void 0===b?_t({}):b,v=e.aToken,g=void 0===v?_t({}):v,j=e.bToken;return{fund:n,twapOracle:s,primaryMarket:i,exchange:c,feeDistributor:u,underlyingToken:m,quoteToken:p,mToken:f,aToken:g,bToken:void 0===j?_t({}):j}}var Xt={},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=h.a.has(Xt,e);t||Qt({});return t?Xt[e]:null},Zt=Ee.a.utils.formatUnits,$t="UPDATE_IS_FETCHING_EXCHANGE_ORDER_BOOK",en="UPDATE_IS_FETCHING_EXCHANGE_ACCOUNT_PENDING_ORDERS",tn="UPDATE_IS_FETCHING_EXCHANGE_ACCOUNT_UNSETTLED_TRADES",nn="UPDATE_IS_FETCHING_EXCHANGE_ACCOUNT_EVENTS",an="UPDATE_EXCHANGE_VARIABLES",sn="UPDATE_EXCHANGE_TOTAL_DEPOSITED",rn="UPDATE_EXCHANGE_SUPPLY",on="UPDATE_EXCHANGE_ACCOUNT",cn="UPDATE_EXCHANGE_ORDER_BOOK",ln="CLEAR_EXCHANGE_ORDER_BOOK",un="UPDATE_EXCHANGE_ACCOUNT_PENDING_ORDERS",dn="UPDATE_EXCHANGE_UNSETTLED_TRADES",mn="UPDATE_EXCHANGE_DAILY_VOLUME",hn="UPDATE_EXCHANGE_PENDING_ORDER_ITEM",pn="UPDATE_EXCHANGE_UNSETTLED_TRADE_ITEM",bn="UPDATE_EXCHANGE_CLAIM_EVENT",fn="UPDATE_EXCHANGE_EVENT",vn="CLEAR_EXCHANGE_ACCOUNT_DATA";function gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"M";return function(n){n({type:$t,isFetching:!0}),Te()("/api/v1/exchanges/".concat(e,"/tranches/").concat(t,"/orderBook")).then((function(e){return e.json()})).then((function(a){if(!(a&&h.a.isArray(a.bids)&&h.a.isArray(a.asks)))throw new Error("Unexpected Return");var s=ts({tranche:h.a.upperCase(t),version:a.version,bids:h.a.reduce(a.bids,(function(e,t,n){return e.push({pdLevel:1+n,totalAmount:Zt(t)}),e}),[]),asks:h.a.reduce(a.asks,(function(e,t,n){return e.push({pdLevel:1+n,totalAmount:Zt(t)}),e}),[])});Object(o.b)((function(){n({type:$t,isFetching:!1}),n({type:cn,exchangeAddress:e,tranche:h.a.upperCase(t),orderBook:s})}))})).catch((function(a){console.error("fetchExchangeOrderBook Error: ",a),n({type:$t,isFetching:!1}),n({type:ln,exchangeAddress:e,tranche:h.a.upperCase(t)})}))}}function jn(){return function(e,t){var n=t().wallet.address;h.a.isNil(n)?console.error("fetchExchangePendingOrders Error: Wallet address is missing"):(e({type:en,isFetching:!0}),Te()("/api/v1/accounts/".concat(n,"/pendingOrders?pageIndex=1&pageSize=").concat(Number.MAX_SAFE_INTEGER)).then((function(e){return e.json()})).then((function(a){if(!a||!h.a.isArray(a.orders))throw new Error("Unexpected return");var s=t().exchange.account.pendingOrders,r=a.orders.map((function(e){var t=e.amount,n=e.place_amount,a=e.filled_amount;return e.amount=Zt(t),e.place_amount=Zt(n),e.filled_amount=Zt(a),e})),i=h.a.keyBy(r,(function(e){return pe(e)}));h.a.forEach(i,(function(e,t){var n=s[t];n&&(i[t]=Object.assign({},n,e))})),Object(o.b)((function(){e({type:en,isFetching:!1}),n===t().wallet.address&&e({type:un,pendingOrders:i})}))})).catch((function(t){console.error("fetchExchangePendingOrders Error:",t),e({type:en,isFetching:!1})})))}}function kn(){return function(e,t){var n=t().wallet.address;h.a.isNil(n)?console.error("fetchExchangeUnsettledTrades Error: Wallet address is missing"):(e({type:tn,isFetching:!0}),Te()("/api/v1/accounts/".concat(n,"/unsettledTrades?pageIndex=1&pageSize=").concat(Number.MAX_SAFE_INTEGER)).then((function(e){return e.json()})).then(function(){var a=Object(Se.a)(we.a.mark((function a(s){var r,i,c,l,u,d,m,p,b;return we.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=t(),i=r.exchange.account.unsettledTrades,!s||!h.a.isArray(s.trades)){a.next=26;break}return c=h.a.reduce(s.trades,(function(e,t){var n=t.contract,a=t.epoch,s=t.side,r=be(t),o=i[r];return e[r]=Object.assign({},ns({contract:n,epoch:a,side:s,detail:{},claimableAssets:{}}),h.a.cloneDeep(o||{})),e}),{}),l=h.a.groupBy(c,"contract"),a.prev=5,a.next=8,Promise.all(h.a.map(l,function(){var e=Object(Se.a)(we.a.mark((function e(t,a){var s,r,i,o;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=h.a.filter(t,(function(e){return h.a.isEmpty(e.detail)||h.a.isEmpty(e.claimableAssets)})),h.a.isEmpty(s)){e.next=8;break}return r=h.a.uniq(s.map((function(e){return e.epoch}))),i=h.a.chunk(r,100),o={},e.next=7,Promise.all(h.a.map(i,function(){var e=Object(Se.a)(we.a.mark((function e(t){var s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt.getUnsettledTrades({exchangeAddress:a,accountAddress:n,epochs:t});case 2:s=e.sent,h.a.forEach(t,(function(e,t){o[e]=s[t]}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:h.a.forEach(t,(function(e){var t=e.epoch,n=be(e);c[n].detail=o[t]||e.detail||{}}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 8:return r=t(),u=r.provider.blockTimestamp,d=r.exchange.items,m=h.a.isNil(u)?j()():j()(u),a.next=14,Promise.all(h.a.map(c,function(){var e=Object(Se.a)(we.a.mark((function e(t,a){var s,r,i,o,l,u,p;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.contract,r=t.epoch,i=t.side,o=t.claimableAssets,!h.a.isEmpty(o)&&!h.a.every(o,(function(e){return v()(e||0).eq(0)}))){e.next=9;break}if(l=d[s]||{},u=Jt(l.fundAddress),h.a.isNil(u)||!["taker","maker"].includes(i)||!j.a.unix(r).add(45,"minutes").isSameOrBefore(m)){e.next=9;break}return e.next=7,u.exchange["taker"===i?"settleTaker":"settleMaker"]({accountAddress:n,epoch:r,shouldCallStatic:!0});case 7:p=e.sent,h.a.some(p||{},(function(e){return v()(e||0).gt(0)}))&&(c[a].claimableAssets=p);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(5),console.error("fetchExchangeUnsettledTrades Error:",a.t0);case 19:Object(o.b)((function(){e({type:tn,isFetching:!1}),n===t().wallet.address&&e({type:dn,trades:c})})),r=t(),p=r.fund.historyNAVs,b=r.exchange.items,h.a.forEach(l,(function(t,n){var a=b[n];if(h.a.has(a,"fundAddress")&&h.a.has(p,"".concat(a.fundAddress))){var s=p[a.fundAddress],r=s.M30,i=s.epochItems,o=h.a.uniq(h.a.map((function(e){return e.epoch})));h.a.forEach(o,(function(t){var n=j.a.unix(t).add(30,"minutes").unix();-1!==h.a.findIndex(r,(function(e){return j.a.unix(n).isSame(e.timestamp)}))||h.a.has(i,n)||e(Za(a.fundAddress,n))}))}})),a.next=27;break;case 26:throw new Error("Unexpected Return");case 27:case"end":return a.stop()}}),a,null,[[5,16]])})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){console.error("fetchExchangeUnsettledTrades Error:",t),e({type:tn,isFetching:!1})})))}}function xn(e){var t=e.tranche,n=void 0===t?"":t,a=e.event,s=void 0===a?"":a,r=e.pageIndex,i=void 0===r?1:r,o=e.pageSize,c=void 0===o?50:o;return function(e,t){return new Promise((function(a,r){var o=t().wallet.address;if(h.a.isNil(o)){var l=new Error("Either selected Fund or wallet Address is missing");console.error("fetchExchangeEvents Error: ",l),r(l)}else{var u=ee({tranche:n,event:s,pageIndex:i,pageSize:c});e({type:nn,isFetching:!0}),Te()("/api/v1/accounts/".concat(o,"/exchangeEvents?").concat(u)).then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){return r(e)})).finally((function(){e({type:nn,isFetching:!1})}))}}))}}function yn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){n({type:sn,exchangeAddress:e,totalDeposited:t})}}function On(e){var t=e.exchangeAddress,n=e.weightedSupply,a=e.workingSupply;return function(e){e({type:rn,exchangeAddress:t,weightedSupply:n,workingSupply:a})}}function An(e,t){return function(n){n({type:on,exchangeAddress:e,account:t})}}function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){n({type:hn,pendingOrderId:e,params:t})}}function wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){n({type:pn,unsettledTradeId:e,params:t})}}function Sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n({type:bn,count:e,items:t})}}function Cn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n({type:fn,count:e,items:t})}}function Tn(){return function(e){e({type:vn})}}var En="UPDATE_IS_FETCHING_INTEREST_RATE_BALLOT",Mn="UPDATE_GOVERNACNE_CHESS_RATE",Bn="UPDATE_GOVERNANCE_CHESS_TOTAL_SUPPLY",Rn="UPDATE_GOVERNANCE_PANCAKE_PAIR",In="UPDATE_VOTING_ESCROW",Dn="UPDATE_INTEREST_RATE_BALLOT",Pn="UPDATE_FEE_DISTRIBUTOR",Ln="UPDATE_VOTING_ESCROW_ACCOUNT",Fn="UPDATE_INTEREST_RATE_BALLOT_ACCOUNT",Un="UPDATE_FEE_DISTRIBUTOR_ACCOUNT",Hn="UPDATE_GOVERNANCE_CHESS_SUPPLY",Vn="CLEAR_GOVERNANCE_ACCOUNT_DATA",Wn=Ee.a.utils.formatUnits;function Yn(){return function(){var e=Object(Se.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:En,isFetching:!0}),Te()("/api/v1/interestRateBallot/".concat("0xeB76E34834fB0E2c31D92f0284466385bcE5c09A")).then((function(e){return e.json()})).then((function(e){if(!e||!h.a.isArray(e.votingPowers))throw new Error("Unexpected Response");h.a.forEach(e.votingPowers,(function(e){e.power=Wn(e.power),e.weight=Wn(e.weight)})),Object(o.b)((function(){t({type:En,isFetching:!1}),t(_n({votingPowers:e.votingPowers}))}))})).catch((function(e){console.error("fetchInterestRateBallot Error: ",e),t({type:En,isFetching:!1})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Kn(){return function(e){Te()("/api/v1/chess/supply").then((function(e){return e.json()})).then((function(t){if(!t)throw new Error("Unexpected response");var n=t.total,a=t.circulating,s=t.schedule_locked,r=t.vesting_locked,i=t.treasury_locked;e({type:Hn,chessSupply:{total:n?Wn(n):null,circulating:a?Wn(a):null,scheduleLocked:s?Wn(s):null,vestingLocked:r?Wn(r):null,treasuryLocked:i?Wn(i):null}})})).catch((function(e){console.error("fetchChessSupply Error: ",e)}))}}function zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){t({type:Mn,chessRate:e})}}function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.0";return function(t){t({type:Bn,chessTotalSupply:e})}}function qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t({type:In,votingEscrow:e})}}function _n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t({type:Dn,ballot:e})}}function Qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){n({type:Pn,feeDistributorAddress:e,feeDistributor:t})}}function Xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t({type:Ln,account:e})}}function Jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t({type:Fn,account:e})}}function Zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){n({type:Un,feeDistributorAddress:e,account:t})}}function $n(){return function(e){e({type:Vn})}}var ea="UPDATE_PROVIDER_BLOCK",ta="UPDATE_PROVIDER_BLOCK_NUMBER";function na(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){n({type:ta,connected:e,errorString:t})}}var aa=function(){var e=localStorage.web3ProviderType;return Object.values(et).includes(e)?e:null},sa=function(e){localStorage.web3ProviderType=e},ra=function(e){var t=e.accountAddress,n=void 0===t?"":t,a=e.tokenAddress,s=void 0===a?"":a,r=e.symbol,i=void 0===r?"":r,o=e.spenderAddress,c=void 0===o?"":o,l=e.value;return{accountAddress:n,tokenAddress:s,symbol:i,spenderAddress:c,value:void 0===l?"":l}},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{fundAddress:e,accountAddress:t,underlyingToken:null,quoteToken:null,tokenM:null,tokenA:null,tokenB:null}},oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{fundAddress:e,accountAddress:t,primaryMarketUnderlying:null,exchange:{quoteToken:null,tokenM:null,tokenA:null,tokenB:null}}},ca={web3ProviderType:aa(),providerNetwork:{},address:null,balance:{fundTokens:{},chess:null},allowance:{fundTokens:{},votingEscrowChess:null},tokenAllowances:[],transactions:{},pendingTransactions:{}};var la="CLEAR_WALLET",ua="UPDATE_WALLET_WEB3_PROVIDER_TYPE",da="UPDATE_WALLET_PROVIDER_NETWORK",ma="UPDATE_WALLET_ADDRESS",ha="UPDATE_WALLET_FUND_TOKENS_BALANCE",pa="UPDATE_WALLET_CHESS_BALANCE",ba="UPDATE_WALLET_FUND_TOKENS_ALLOWANCE",fa="UPDATE_WALLET_VOTING_ESCROW_CHESS_ALLOWANCE",va="UPDATE_WALLET_TOKEN_ALLOWANCE",ga="UPDATE_WALLET_PENDING_TRANSACTION",ja="REMOVE_WALLET_PENDING_TRANSACTION",ka="UPDATE_WALLET_TRANSACITON",xa=function(e){return h.a.has(e,"chainId")&&"56"===e.chainId.toString()},ya="PENDING",Oa="CONFIRMED",Aa="REVERTED",Na=function(e){var t=e.hash,n=e.title,a=e.status;return{hash:t,title:n,status:void 0===a?ya:a,createdTimestamp:e.createdTimestamp}};function wa(){return function(e){e({type:la})}}function Sa(e){return function(t,n){if(Object.values(et).includes(e)){var a=n().wallet.web3ProviderType;Object(o.b)((function(){h.a.isEqual(a,e)||(t(Ct()),t(Tn()),t($n()),t(wa())),t({type:ua,providerType:e})}))}}}function Ca(){return function(){var e=Object(Se.a)(we.a.mark((function e(t,n){var a,s,r,i,c,l,u,d;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().wallet,s=a.providerNetwork,r=a.address,e.prev=1,e.next=4,rt();case 4:if(!(i=e.sent)){e.next=11;break}return e.next=8,i.listAccounts();case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=[];case 12:if(c=e.t0,!i||h.a.isEmpty(c)){e.next=25;break}return e.next=16,i.getNetwork();case 16:return l=e.sent,h.a.isEqual(s,l)||(Object(o.b)((function(){t({type:da,providerNetwork:l}),h.a.isNil(n().wallet.web3ProviderType)&&Sa(et.META_MASK)})),r&&(t(Xa()),t(kn()))),u=i.getSigner(),e.next=21,u.getAddress();case 21:d=e.sent,h.a.isEqual(r,d)||(Object(o.b)((function(){t(Ct()),t(Tn()),t($n()),t({type:ma,address:d}),t(_a())})),t(Xa()),t(kn()),window.gtag&&window.navigator&&window.gtag("event","connect_wallet",{formatted_address:d?d.substring(2):null,user_agent:navigator.userAgent})),e.next=26;break;case 25:h.a.isEmpty(s)&&h.a.isNil(r)||Object(o.b)((function(){t(Ct()),t(Tn()),t($n()),t(wa())}));case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),console.error("fetchWalletProvider error:",e.t1);case 31:case"end":return e.stop()}}),e,null,[[1,28]])})));return function(t,n){return e.apply(this,arguments)}}()}function Ta(e){var t=e.fundAddress,n=void 0===t?"":t,a=e.underlyingToken,s=void 0===a?"":a,r=e.quoteToken,i=void 0===r?"":r,c=e.tokenM,l=void 0===c?"":c,u=e.tokenA,d=void 0===u?"":u,m=e.tokenB,h=void 0===m?"":m,p=e.chess,b=void 0===p?"":p;return function(e){Object(o.b)((function(){e({type:ha,fundAddress:n,balance:{underlyingToken:s,quoteToken:i,tokenM:l,tokenA:d,tokenB:h}}),e({type:pa,chess:b})}))}}function Ea(e){var t=e.fundAddress,n=void 0===t?"":t,a=e.primaryMarketUnderlying,s=void 0===a?"":a,r=e.exchange,i=void 0===r?{}:r,o=e.votingEscrowChess,c=void 0===o?"":o;return function(e){e({type:ba,fundAddress:n,allowance:{primaryMarketUnderlying:s,exchange:i}}),e({type:fa,votingEscrowChess:c})}}function Ma(e,t){return function(){var n=Object(Se.a)(we.a.mark((function n(a,s){var r,i,o,c;return we.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=s().wallet.address,i=_t({contractAddress:e}),!h.a.isNil(r)&&!h.a.isNil(i)){n.next=6;break}console.error("fetchWalletTokenAllowance Error: Either wallet Address or Token Contract is missing"),n.next=13;break;case 6:return n.next=8,i.allowance(r,t);case 8:return o=n.sent,n.next=11,i.symbol();case 11:c=n.sent,r===s().wallet.address&&a({type:va,tokenAllowance:ra({tokenAddress:e,symbol:c,spenderAddress:t,value:o})});case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}function Ba(e){var t=e.transactionResponse,n=e.title,a=e.successMessage,s=e.servicePendingMessageOnSuccess;return function(e,r){return new Promise((function(i,c){if(h.a.has(t,"hash")){var l=t.hash;e(Xa()),Object(o.b)((function(){e(Ke(Ye({id:l,type:We.PENDING,text:"Pending: ".concat(n),hash:l}))),e({type:ka,transaction:Na({hash:l,title:n,createdTimestamp:j()().toISOString()})})})),t.wait().then((function(t){var c=r().wallet.transactions[l];c&&Object(o.b)((function(){e(ze(l,{type:1===t.status?We.SUCCESS:We.ERROR,text:"".concat(1===t.status?"Success":"Failed",": ").concat(1===t.status&&a||n)})),h.a.isNil(s)||1!==t.status||e(Ke(Ye({id:Object(De.a)(),type:We.SERVICE_PENDING,text:"Transaction confirmed: ".concat(s)}))),e({type:ka,transaction:b.a.set(c,"status",1===t.status?Oa:Aa)})})),e(Xa()),i(t)})).catch((function(t){var a=r().wallet.transactions[l];if(a){var s=$(t);Object(o.b)((function(){e(ze(l,{type:We.ERROR,text:"Failed: ".concat(n,", ").concat(s)})),e({type:ka,transaction:b.a.set(a,"status",Aa)})}))}e(Xa()),console.error("waitWalletPendingTransaction error",n,t),c(t)}))}}))}}var Ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{fundAddress:e,D1:[],M30:[],epochItems:{}}},Ia=function(e){var t=e.fundAddress,n=void 0===t?"":t,a=e.underlyingTokenSymbol,s=void 0===a?"":a,r=e.timestamp,i=void 0===r?"":r,o=e.value;return{fundAddress:n,underlyingTokenSymbol:s,timestamp:i,value:void 0===o?"":o}},Da={isFetchingItems:!1,isFetchingProtocolData:!1,isFetchingHistoryNAVs:!1,selectedFundAddress:null,items:{},historyNAVs:{},rebalances:{},underlyingTokenTwaps:{},incomes:{}};var Pa="INITIALIZE_FUND_ACCOUNT_DATA",La="UPDATE_IS_FETCHING_FUND_ITEMS",Fa="UPDATE_IS_FETCHING_FUND_HISTORY_NAVS",Ua="UPDATE_IS_FETCHING_FUND_PROTOCOL_DATA",Ha="UPDATE_FUND_ITEMS",Va="UPDATE_FUND_SUMMARY",Wa="UPDATE_FUND_HISTORY_NAVS",Ya="UPDATE_FUND_UNDERLYING_TOKEN_TWAP",Ka="UPDATE_FUND_EPOCH_NAV",za="UPDATE_FUND_REBALANCES",Ga="UPDATE_FUND_INCOMES",qa=Ee.a.utils.formatUnits;function _a(){return function(e,t){var n=t(),a=n.fund,s=n.wallet,r=a.items,i=s.address;h.a.isEmpty(r)||h.a.isNil(i)||e({type:Pa,fundItems:r,accountAddress:i})}}function Qa(){return function(e){return new Promise((function(t){e({type:La,isFetching:!0}),Te()("/api/v1/funds").then((function(e){return e.json()})).then((function(n){if(!n||!h.a.isArray(n)||h.a.isEmpty(n))throw new Error("Unexpected return");var a=h.a.sortBy(n.map((function(e){return e.lowerRebalanceThreshold=qa(e.lowerRebalanceThreshold),e.upperRebalanceThreshold=qa(e.upperRebalanceThreshold),e.baseInterestRate=qa(e.baseInterestRate),e.floatingInterestRate=qa(e.floatingInterestRate),e.dailyProtocolFeeRate=qa(e.dailyProtocolFeeRate),e.currentDay=j.a.unix(e.currentDay).toISOString(),e.summary={},e})),(function(e){return"ETH"===(h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:null)?0:1}));h.a.forEach(a,(function(e){var t=e.fundAddress,n=e.twapOracleAddress,a=e.primaryMarketAddress,s=e.exchangeAddress,r=e.feeDistributorAddress,i=e.assets,o=i.underlyingToken,c=i.quoteToken,l=i.trancheM,u=i.trancheA,d=i.trancheB;!function(e){var t=e.fundAddress,n=e.twapOracleAddress,a=e.primaryMarketAddress,s=e.exchangeAddress,r=e.feeDistributorAddress,i=e.underlyingTokenAddress,o=e.underlyingTokenSymbol,c=e.underlyingTokenDecimals,l=void 0===c?18:c,u=e.quoteTokenAddress,d=e.quoteTokenSymbol,m=e.quoteTokenDecimals,h=void 0===m?18:m,p=e.mTokenAddress,b=e.mTokenSymbol,f=e.mTokenDecimals,v=void 0===f?18:f,g=e.aTokenAddress,j=e.aTokenSymbol,k=e.aTokenDecimals,x=void 0===k?18:k,y=e.bTokenAddress,O=e.bTokenSymbol,A=e.bTokenDecimals,N=void 0===A?18:A;Xt[t]=Qt({fund:It(t),twapOracle:Pt(n),primaryMarket:vt(a,l),exchange:Vt(s),feeDistributor:Yt(r),underlyingToken:_t({contractAddress:i,SYMBOL:o,DECIMALS:l}),quoteToken:_t({contractAddress:u,SYMBOL:d,DECIMALS:h}),mToken:_t({contractAddress:p,SYMBOL:b,DECIMALS:v}),aToken:_t({contractAddress:g,SYMBOL:j,DECIMALS:x}),bToken:_t({contractAddress:y,SYMBOL:O,DECIMALS:N})})}({fundAddress:t,twapOracleAddress:n,primaryMarketAddress:a,exchangeAddress:s,feeDistributorAddress:r,underlyingTokenAddress:o.address,underlyingTokenSymbol:o.symbol,underlyingTokenDecimals:o.decimal,quoteTokenAddress:c.address,quoteTokenSymbol:c.symbol,quoteTokenDecimals:c.decimal,mTokenAddress:l.address,mTokenSymbol:l.symbol,mTokenDecimals:l.decimal,aTokenAddress:u.address,aTokenSymbol:u.symbol,aTokenDecimals:u.decimal,bTokenAddress:d.address,bTokenSymbol:d.symbol,bTokenDecimals:d.decimal})})),Object(o.b)((function(){e({type:La,isFetching:!1}),e({type:Ha,items:h.a.keyBy(a,"fundAddress")}),e(_a())})),h.a.isEmpty(a)||(e((function(e,t){try{var n=t().fund.items;h.a.forEach(n,function(){var t=Object(Se.a)(we.a.mark((function t(n){var a,s,r,i,o;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.primaryMarketAddress,t.next=3,Te()("/api/v1/primaryMarkets/".concat(a));case 3:if(200!==(s=t.sent).status){t.next=11;break}return t.next=7,s.json();case 7:r=t.sent,i=h.a.has(n,"assets.underlyingToken.decimal")?n.assets.underlyingToken.decimal:18,o=Object.assign({},r,{mergeFeeRate:gt(r.mergeFeeRate),minCreationUnderlying:gt(r.minCreationUnderlying,i),redemptionFeeRate:gt(r.redemptionFeeRate),splitFeeRate:gt(r.splitFeeRate)}),e({type:kt,primaryMarketAddress:a,variables:o});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(a){console.error("fetchPrimaryMarket Error: ",a)}})),e((function(e,t){try{var n=t().fund.items;h.a.forEach(n,function(){var t=Object(Se.a)(we.a.mark((function t(n){var a,s,r,i;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.exchangeAddress,t.next=3,Te()("/api/v1/exchanges/".concat(a));case 3:if(200!==(s=t.sent).status){t.next=10;break}return t.next=7,s.json();case 7:r=t.sent,i=Object.assign({},r,{MAX_PD:Zt(r.MAX_PD),MIN_PD:Zt(r.MIN_PD),PD_TICK:Zt(r.PD_TICK),minAskAmount:Zt(r.minAskAmount),minBidAmount:Zt(r.minBidAmount)}),e({type:an,exchangeAddress:a,variables:i});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(a){console.error("fetchExchange error: ",a)}})),e(Xa()),e($a()),e(es()),h.a.forEach(a,(function(t){var n=t.fundAddress;e(Ja({fundAddress:n,granularity:"M30",shouldFetchLatest:!0}))}))),t(a)})).catch((function(t){console.error("fetchFunds Error: ",t),e({type:La,isFetching:!1})}))}))}}function Xa(){return function(){var e=Object(Se.a)(we.a.mark((function e(t,n){var a,s,r,i,c,l;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n(),s=a.fund,r=a.wallet,i=s.items,h.a.isEmpty(i)){e.next=10;break}return t({type:Ua,isFetching:!0}),c=r.address||Ee.a.constants.AddressZero,l={},e.next=9,Promise.all(h.a.map(i,function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fundAddress,a=t.primaryMarketAddress,s=t.exchangeAddress,r=t.feeDistributorAddress,i=t.assets,e.next=3,mt.getProtocolData({primaryMarketAddress:a,exchangeAddress:s,pancakePairAddress:"0x1472976E0B97F5B2fC93f1FFF14e2b5C4447b64F",feeDistributorAddress:r,accountAddress:c,underlyingTokenDecimals:h.a.has(i,"underlyingToken.decimal")?i.underlyingToken.decimal:18,quoteTokenDecimals:h.a.has(i,"quoteToken.decimal")?i.quoteToken.decimal:18});case 3:o=e.sent,l[n]=o;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:Object(o.b)((function(){h.a.forEach(l,(function(e,a){var s,r,o,l=i[a],u=l.primaryMarketAddress,d=l.exchangeAddress,m=l.feeDistributorAddress;t({type:Va,fundAddress:a,summary:h.a.omit(e.fund,["dailyProtocolFeeRate"])}),t(na(!0)),t((s=e.blockNumber,r=e.blockTimestamp,function(e){e({type:ea,blockNumber:s,blockTimestamp:r})})),t(wt(u,h.a.pick(e.primaryMarket,["currentCreatingUnderlying","currentRedeemingShares"]))),t(yn(d,e.exchange.totalDeposited)),t(On({exchangeAddress:d,weightedSupply:e.exchange.weightedSupply,workingSupply:e.exchange.workingSupply})),t(Gn(e.governance.chessTotalSupply)),t(zn(e.governance.chessRate)),t((o=e.pair,function(e){e({type:Rn,pancakePair:o})})),t(qn(h.a.pick(e.governance.votingEscrow,["chessBalance","totalSupply","tradingWeekTotalSupply"]))),t(Qn(m,h.a.pick(e.governance.feeDistributor,["currentRewards","currentSupply","tradingWeekTotalSupply"]))),c!==Ee.a.constants.AddressZero&&c===n().wallet.address&&(t(Ta(Object(Ae.a)({fundAddress:a},e.wallet.balance))),t(Ea(Object(Ae.a)({fundAddress:a},e.wallet.allowance))),t(St(u,e.primaryMarket.account)),t(An(d,e.exchange.account)),t(Xn(e.governance.votingEscrow.account)),t(Jn(e.governance.interestRateBallot.account)),t(Zn(m,e.governance.feeDistributor.account)))})),t({type:Ua,isFetching:!1})}));case 10:e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("fetchFundProtocolData Error: ",e.t0),Object(o.b)((function(){t({type:Ua,isFetching:!1}),t(na(!1,e.t0.toString()))})),navigator.onLine&&lt(!1);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()}function Ja(e){var t=e.fundAddress,n=void 0===t?"":t,a=e.granularity,s=void 0===a?"D1":a,r=e.fromTimestamp,i=void 0===r?null:r,c=e.toTimestamp,l=void 0===c?null:c,u=e.count,d=void 0===u?null:u,m=e.shouldFetchLatest,p=void 0!==m&&m,b=e.shouldSkipUpdatingStore,f=void 0!==b&&b;return function(e,t){return new Promise((function(a){var r=t().fund,c=r.items,u=r.historyNAVs,m=c[n],b=u[n];if(h.a.isNil(m)||h.a.isNil(b))console.error("fetchFundHistoryNAVs error: fundItem ".concat(n," is missing"));else{var v=b[s],g={granularity:s,from:h.a.isNil(i)?null:j()(i).unix(),to:h.a.isNil(l)?null:j()(l).unix(),count:d||500};h.a.isArray(v)&&!h.a.isEmpty(v)&&(p?(g.from=j()(h.a.last(v).timestamp).unix(),g.to=null):g.to=j()(h.a.head(v).timestamp).unix()),e({type:Fa,isFetching:!0}),Te()("/api/v1/funds/".concat(n,"/historyNavs?").concat(ee(g))).then((function(e){return e.json()})).then((function(t){if(!h.a.has(t,"historyNavs")||!h.a.isArray(t.historyNavs))throw new Error("Unexpected body");Object(o.b)((function(){var r=t.historyNavs.map((function(e){return function(e){var t=e.timestamp,n=void 0===t?"":t,a=e.M,s=void 0===a?"":a,r=e.A,i=void 0===r?"":r,o=e.B;return{timestamp:n,M:s,A:i,B:void 0===o?"":o}}({timestamp:j.a.unix(e.timestamp).toISOString(),M:qa(e.trancheM),A:qa(e.trancheA),B:qa(e.trancheB)})}));e({type:Fa,isFetching:!1}),f||e({type:Wa,fundAddress:n,granularity:s,navs:r}),a(r)}))})).catch((function(t){console.error("fetchFundHistoryNavs Error: ",t),e({type:Fa,isFetching:!1})}))}}))}}function Za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){if(!h.a.isEmpty(e)){var a={granularity:"M30",from:t,to:t,count:1};Te()("/api/v1/funds/".concat(e,"/historyNavs?").concat(ee(a))).then((function(e){return e.json()})).then((function(a){if(h.a.has(a,"historyNavs")&&h.a.isArray(a.historyNavs)&&1===h.a.size(a.historyNavs)&&a.historyNavs[0].timestamp===t){var s=a.historyNavs[0];n({type:Ka,fundAddress:e,epoch:t,NAV:{timestamp:j.a.unix(t).toISOString(),M:qa(s.trancheM),A:qa(s.trancheA),B:qa(s.trancheB)}})}})).catch((function(e){console.error("fetchFundHistoryNAVByEpoch Error: ",e)}))}}}function $a(){return function(e,t){try{var n=t(),a=n.fund,s=n.provider,r=a.items,i=a.underlyingTokenTwaps;h.a.forEach(r,function(){var t=Object(Se.a)(we.a.mark((function t(n){var a,r,o,c,l,u,d;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.fundAddress,r=n.assets,o=h.a.isNil(s.blockTimestamp)?j()():j()(s.blockTimestamp),c=Jt(a),l=o.minutes(),u=l<=15?j()(o).add(-30,"minutes").minutes(30).startOf("minute").toISOString():l<=45?j()(o).startOf("hour").toISOString():j()(o).minutes(30).startOf("minute").toISOString(),!!h.a.some(i,{fundAddress:a,timestamp:u})){t.next=11;break}return t.next=9,c.twapOracle.getTwap(u);case 9:d=t.sent,Number(d)>0&&e({type:Ya,twap:Ia({fundAddress:a,underlyingTokenSymbol:h.a.has(r,"underlyingToken.symbol")?r.underlyingToken.symbol:null,timestamp:u,value:d})});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(o){console.error("fetchFundUnderlyingTwaps error: ",o)}}}function es(){return function(e,t){var n=t().fund.items;h.a.isEmpty(n)||Te()("/api/v2/income").then((function(e){return e.json()})).then((function(t){h.a.has(t,"income")&&h.a.isArray(t.income)&&(h.a.forEach(t.income,(function(e,a){var s=e.fundAddress,r=e.income,i=n[s],o=h.a.has(i,"assets.underlyingToken.decimal")?Number(i.assets.underlyingToken.decimal):18;h.a.isString(r)&&(t.income[a].income=qa(r,o))})),e({type:Ga,incomes:h.a.keyBy(t.income,"fundAddress")}))})).catch((function(e){console.error("fetchFundIncome error",e)}))}}var ts=function(e){var t=e.tranche,n=void 0===t?"M":t,a=e.bids,s=void 0===a?[]:a,r=e.asks;return{tranche:n,bids:s,asks:void 0===r?[]:r,version:e.version}},ns=function(e){var t=e.contract,n=void 0===t?"":t,a=e.epoch,s=void 0===a?0:a,r=e.side,i=void 0===r?"taker":r,o=e.detail,c=void 0===o?{}:o,l=e.claimableAssets,u=void 0===l?{}:l,d=e.isClaiming,m=void 0!==d&&d,h=e.isClaimed;return{contract:n,epoch:s,side:i,detail:c,claimableAssets:u,isClaiming:m,isClaimed:void 0!==h&&h}},as=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{fundAddress:e,exchangeAddress:t,variables:{EPOCH:null,MAX_PD:null,MIN_PD:null,PD_LEVEL_COUNT:null,PD_TICK:null,minAskAmount:null,minBidAmount:null},totalDeposited:{tokenM:null,tokenA:null,tokenB:null},weightedSupply:null,workingSupply:null,orderBook:{trancheM:ts({tranche:"M"}),trancheA:ts({tranche:"A"}),trancheB:ts({tranche:"B"})},dailyVolume:{trancheM:null,trancheA:null,trancheB:null}}},ss=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{fundAddress:e,exchangeAddress:t,accountAddress:null,available:{tokenM:null,tokenA:null,tokenB:null},locked:{tokenM:null,tokenA:null,tokenB:null},weightedBalance:null,workingBalance:null,veSnapshot:{veProportion:null,amount:null,unlockTime:null},isMaker:!1,chessRewards:null}},rs={isFetchingPendingOrders:!1,isFetchingUnsettledTrades:!1,isFetchingEvents:!1,items:{},pendingOrders:{},unsettledTrades:{},claimEvent:{count:0,items:[]},event:{count:0,items:[]}},is={isFetchingOrderBook:!1,items:{},account:rs};var os=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{fundAddress:e,feeDistributorAddress:t,currentRewards:null,currentSupply:null,tradingWeekTotalSupply:null}},cs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{fundAddress:e,feeDistributorAddress:t,accountAddress:n,amount:null,unlockTime:null,claimableRewards:null,currentBalance:null}},ls={amount:null,unlockTime:null},us={amount:null,unlockTime:null,weight:null},ds={isFetchingInterestRateBallot:!1,chessRate:null,chessTotalSupply:null,chessSupply:null,pancakePair:{reserve0:null,reserve1:null,token0:null,token1:null},votingEscrow:{chessBalance:null,totalSupply:null,tradingWeekTotalSupply:null,account:ls},interestRateBallot:{votingPowers:[],account:us},feeDistributor:{items:{},accounts:{}}};var ms={globalMessages:[],pageAnnouncementHeight:0,shouldShowWeb3ProviderModal:!1};var hs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{fundAddress:e,primaryMarketAddress:t,variables:{minCreationUnderlying:null,redemptionFeeRate:null,splitFeeRate:null,mergeFeeRate:null},summary:{currentCreatingUnderlying:null,currentRedeemingShares:null}}},ps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{fundAddress:e,primaryMarketAddress:t,accountAddress:n,day:null,creatingUnderlying:null,redeemingShares:null,createdShares:null,redeemedUnderlying:null,version:null}},bs={isFetchingEvents:!1,items:{},event:{count:0,items:[]}},fs={items:{},account:bs};var vs={blockNumber:null,blockTimestamp:null,connected:null,error:""};var gs=[l.a,d.a];var js=Object(c.c)(Object(c.b)({exchange:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:is,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case Ha:return e=h.a.cloneDeep(a),h.a.forEach(s.items,(function(t){var n=t.fundAddress,a=t.exchangeAddress;h.a.isNil(a)||h.a.has(e,"items.".concat(a))||(e.items[a]=as(n,a))})),e;case Pa:return e=h.a.cloneDeep(a),h.a.forEach(s.fundItems,(function(t){var n=t.fundAddress,a=t.exchangeAddress;h.a.isNil(a)||h.a.has(e,"account.items.".concat(a))||(e.account.items[a]=ss(n,a))})),e;case $t:return b.a.set(a,"isFetchingOrderBook",s.isFetching);case en:return b.a.set(a,"account.isFetchingPendingOrders",s.isFetching);case tn:return b.a.set(a,"account.isFetchingUnsettledTrades",s.isFetching);case nn:return b.a.set(a,"account.isFetchingEvents",s.isFetching);case an:return h.a.has(a,"items.".concat(s.exchangeAddress,".variables"))?b.a.merge(a,"items.".concat(s.exchangeAddress,".variables"),s.variables):a;case sn:return h.a.has(a,"items.".concat(s.exchangeAddress,".totalDeposited"))?b.a.merge(a,"items.".concat(s.exchangeAddress,".totalDeposited"),s.totalDeposited):a;case rn:return h.a.has(a,"items.".concat(s.exchangeAddress))?b.a.merge(a,"items.".concat(s.exchangeAddress),{weightedSupply:s.weightedSupply,workingSupply:s.workingSupply}):a;case on:return h.a.has(a,"account.items.".concat(s.exchangeAddress))?b.a.merge(a,"account.items.".concat(s.exchangeAddress),s.account):a;case cn:return h.a.has(a,"items.".concat(s.exchangeAddress,".orderBook.tranche").concat(s.tranche))?b.a.merge(a,"items.".concat(s.exchangeAddress,".orderBook.tranche").concat(s.tranche),s.orderBook):a;case ln:return h.a.has(a,"items.".concat(s.exchangeAddress,".orderBook.tranche").concat(s.tranche))?b.a.set(a,"items.".concat(s.exchangeAddress,".orderBook.tranche").concat(s.tranche),ts({tranche:s.tranche})):a;case un:return t=h.a.cloneDeep(a.account.pendingOrders),h.a.forEach(t,(function(e,n){e.isCancelling||e.isCancelled||delete t[n]})),t=Object.assign({},t,s.pendingOrders),b.a.set(a,"account.pendingOrders",t);case dn:return n=h.a.cloneDeep(a.account.unsettledTrades),h.a.forEach(n,(function(e,t){e.isClaiming||e.isClaimed||delete n[t]})),n=Object.assign({},n,s.trades),b.a.set(a,"account.unsettledTrades",n);case hn:return h.a.has(a,"account.pendingOrders.".concat(s.pendingOrderId))?b.a.merge(a,"account.pendingOrders.".concat(s.pendingOrderId),s.params):a;case pn:return h.a.has(a,"account.unsettledTrades.".concat(s.unsettledTradeId))?b.a.merge(a,"account.unsettledTrades.".concat(s.unsettledTradeId),s.params):a;case bn:return e=b.a.set(a,"account.claimEvent",{count:s.count,items:s.items}),h.a.forEach(s.items,(function(t){var n=fe(t),a=e.account.unsettledTrades[n];h.a.isNil(a)||!a.isClaiming&&a.isClaimed||(e.account.unsettledTrades[n]=Object.assign({},h.a.cloneDeep(a),{isClaiming:!1,isClaimed:!0}))})),e;case fn:return b.a.set(a,"account.event",{count:s.count,items:s.items});case mn:return h.a.has(a,"items.".concat(s.exchangeAddress,".dailyVolume"))?b.a.set(a,"items.".concat(s.exchangeAddress,".dailyVolume"),s.dailyVolume):a;case vn:return b.a.set(a,"account",rs);default:return a}},fund:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case La:return b.a.set(n,"isFetchingItems",a.isFetching);case Ua:return b.a.set(n,"isFetchingProtocolData",a.isFetching);case Fa:return b.a.set(n,"isFetchingHistoryNAVs",a.isFetching);case Ha:return(e=h.a.cloneDeep(n)).items=a.items||{},h.a.forEach(a.items,(function(t){var n=t.fundAddress;e.historyNAVs[n]=Ra(n)})),e;case Va:return h.a.has(n.items,a.fundAddress)?b.a.merge(n,"items.".concat(a.fundAddress,".summary"),a.summary):n;case Wa:return h.a.has(n,"historyNAVs.".concat(a.fundAddress,".").concat(a.granularity))?(t=h.a.sortBy(h.a.unionBy(a.navs,n.historyNAVs[a.fundAddress][a.granularity]||[],"timestamp"),(function(e){return j()(e.timestamp).valueOf()})),b.a.set(n,"historyNAVs.".concat(a.fundAddress,".").concat(a.granularity),t)):n;case Ya:return b.a.set(n,"underlyingTokenTwaps.".concat(a.twap.fundAddress),a.twap);case Ka:return b.a.set(n,"historyNAVs.".concat(a.fundAddress,".epochItems.").concat(a.epoch),a.NAV);case za:return b.a.set(n,"rebalances.".concat(a.fundAddress),a.rebalances);case Ga:return b.a.set(n,"incomes",a.incomes);default:return n}},governance:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ds,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Ha:return e=h.a.cloneDeep(t),h.a.forEach(n.items,(function(t){var n=t.fundAddress,a=t.feeDistributorAddress;h.a.isNil(a)||h.a.has(e,"feeDistributor.items.".concat(a))||(e.feeDistributor.items[a]=os(n,a))})),e;case Pa:return e=h.a.cloneDeep(t),h.a.forEach(n.fundItems,(function(t){var a=t.fundAddress,s=t.feeDistributorAddress;h.a.isNil(s)||h.a.has(e,"feeDistributor.accounts.items.".concat(s))||(e.feeDistributor.accounts[s]=cs(a,s,n.accountAddress))})),e;case En:return b.a.set(t,"isFetchingInterestRateBallot",n.isFetching);case Bn:return b.a.set(t,"chessTotalSupply",n.chessTotalSupply);case Mn:return b.a.set(t,"chessRate",n.chessRate);case Hn:return b.a.merge(t,"chessSupply",n.chessSupply);case Rn:return b.a.merge(t,"pancakePair",n.pancakePair);case In:return b.a.merge(t,"votingEscrow",n.votingEscrow);case Ln:return b.a.merge(t,"votingEscrow.account",n.account);case Fn:return b.a.merge(t,"interestRateBallot.account",n.account);case Dn:return b.a.merge(t,"interestRateBallot",n.ballot);case Pn:return h.a.has(t,"feeDistributor.items.".concat(n.feeDistributorAddress))?b.a.merge(t,"feeDistributor.items.".concat(n.feeDistributorAddress),n.feeDistributor):t;case Un:return h.a.has(t,"feeDistributor.accounts.".concat(n.feeDistributorAddress))?b.a.merge(t,"feeDistributor.accounts.".concat(n.feeDistributorAddress),n.account):t;case Vn:return e=b.a.set(t,"votingEscrow.account",ls),e=b.a.set(e,"interestRateBallot.account",us),e=b.a.set(e,"feeDistributor.accounts",{});default:return t}},layout:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ms,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Pe:return b.a.set(t,"globalMessages",h.a.concat(n.globalMessage,t.globalMessages));case Le:return(e=h.a.findIndex(t.globalMessages,(function(e){return e.id===n.messageId})))>=0?b.a.merge(t,"globalMessages.".concat(e),n.params):t;case Fe:return b.a.set(t,"globalMessages",h.a.filter(t.globalMessages,(function(e){return e.id!==n.messageId})));case Ue:return b.a.set(t,"pageAnnouncementHeight",n.height);case He:return b.a.set(t,"shouldShowWeb3ProviderModal",n.shouldShow);default:return t}},primaryMarket:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fs,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Ha:return e=h.a.cloneDeep(t),h.a.forEach(n.items,(function(t){var n=t.fundAddress,a=t.primaryMarketAddress;h.a.isNil(a)||h.a.has(e,"items.".concat(a))||(e.items[a]=hs(n,a))})),e;case Pa:return e=h.a.cloneDeep(t),h.a.forEach(n.fundItems,(function(t){var a=t.fundAddress,s=t.primaryMarketAddress;h.a.isNil(s)||h.a.has(e,"account.items.".concat(s))||(e.account.items[s]=ps(a,s,n.accountAddress))})),e;case jt:return b.a.set(t,"account.isFetchingEvents",n.isFetching);case kt:return h.a.has(t,"items.".concat(n.primaryMarketAddress,".variables"))?b.a.merge(t,"items.".concat(n.primaryMarketAddress,".variables"),n.variables):t;case xt:return h.a.has(t,"items.".concat(n.primaryMarketAddress,".summary"))?b.a.merge(t,"items.".concat(n.primaryMarketAddress,".summary"),n.summary):t;case yt:return h.a.has(t,"account.items.".concat(n.primaryMarketAddress))?b.a.merge(t,"account.items.".concat(n.primaryMarketAddress),n.account):t;case Ot:return b.a.set(t,"account.event",{count:n.count,items:n.items});case At:return b.a.set(t,"account",bs);case Nt:return b.a.merge(t,"guardedLaunch",n.guardedLaunch);default:return t}},provider:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ea:return Object.assign({},e,{blockNumber:t.blockNumber,blockTimestamp:t.blockTimestamp});case ta:return Object.assign({},e,{connected:t.connected,error:!0===t.connected?"":h.a.isEmpty(t.errorString)?e.error:t.errorString});default:return e}},wallet:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Pa:return e=h.a.cloneDeep(n),h.a.forEach(a.fundItems,(function(t){var n=t.fundAddress;h.a.has(e,"balance.fundTokens.".concat(n))||(e.balance.fundTokens[n]=ia(n,a.accountAddress)),h.a.has(e,"allowance.fundTokens.".concat(n))||(e.allowance.fundTokens[n]=oa(n,a.accountAddress))})),e;case ua:return sa(a.providerType),Object.assign({},n,{web3ProviderType:aa()});case da:return b.a.set(n,"providerNetwork",a.providerNetwork);case ma:return b.a.set(n,"address",a.address);case ha:return h.a.has(n,"balance.fundTokens.".concat(a.fundAddress))?b.a.merge(n,"balance.fundTokens.".concat(a.fundAddress),a.balance):n;case pa:return b.a.set(n,"balance.chess",a.chess);case ba:return h.a.has(n,"allowance.fundTokens.".concat(a.fundAddress))?b.a.merge(n,"allowance.fundTokens.".concat(a.fundAddress),a.allowance):n;case fa:return b.a.set(n,"allowance.votingEscrowChess",a.votingEscrowChess);case va:return(t=h.a.findIndex(n.tokenAllowances,(function(e){return e.tokenAddress===a.tokenAllowance.tokenAddress&&e.spenderAddress===a.tokenAllowance.spenderAddress})))>=0?b.a.set(n,"tokenAllowances.".concat(t),a.tokenAllowance):b.a.merge(n,"tokenAllowances",a.tokenAllowance);case ga:return b.a.merge(n,"pendingTransactions.".concat(a.pendingTransaction.hash),a.pendingTransaction);case ja:return b.a.delete(n,"pendingTransactions.".concat(a.hash));case ka:return b.a.merge(n,"transactions.".concat(a.transaction.hash),a.transaction);case la:return sa(""),ca.web3ProviderType=aa(),ca;default:return n}}}),c.a.apply(void 0,gs));js.dispatch(Qa()),setInterval((function(){var e=js.getState(),t=e.fund,n=e.wallet,a=t.items;Te()("/siteVersion.json").then((function(e){return e.json()})).then((function(e){h.a.has(e,"version")&&(h.a.isNil(Ve)?Ve=e.version:Ve!==e.version&&window.location.reload())})),h.a.isEmpty(a)?js.dispatch(Qa()):(js.dispatch(Xa()),js.dispatch($a()),h.a.forEach(a,(function(e){var t=e.fundAddress;js.dispatch(Ja({fundAddress:t,granularity:"M30",shouldFetchLatest:!0}))})),h.a.isNil(n.address)||js.dispatch(kn()))}),1e4);var ks=n(19),xs=n(46),ys=n(8),Os=n(9),As=n(12),Ns=n(11),ws=n(1),Ss=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).props.history.push("/"),a}return Object(Os.a)(n,[{key:"render",value:function(){return Object(ws.jsx)("div",{})}}]),n}(a.Component),Cs=n(61),Ts=n.n(Cs),Es=n.p+"static/media/chess_icon_black_bg.eaff0bdd.svg",Ms=n(21),Bs=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={open:!1,isPopupHovered:!1},a.triggerNode=null,a.popupNode=null,a._mounted=!1,a.closePopupTimeout=null,a.handleClickWindow=a.handleClickWindow.bind(Object(Ms.a)(a)),a.handleResizeWindow=a.handleResizeWindow.bind(Object(Ms.a)(a)),a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0;var e=this.getWindow();e&&(e.addEventListener("click",this.handleClickWindow),e.addEventListener("resize",this.handleResizeWindow))}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.open,a=this.props,s=a.onOpen,r=a.onClose,i=a.closeId;h.a.isEqual(t.open,n)||(n?(this._arrangePopup(),s()):r()),h.a.isEmpty(i)||h.a.isEqual(e.closeId,i)||this._closePopup()}},{key:"componentWillUnmount",value:function(){this._mounted=!1;var e=this.getWindow();e&&(e.removeEventListener("click",this.handleClickWindow),e.removeEventListener("resize",this.handleResizeWindow))}},{key:"_closePopup",value:function(){var e=this,t=this.props.mouseLeaveToClosePopupDelay;t>0?(this.closePopupTimeout&&window.clearTimeout(this.closePopupTimeout),this.closePopupTimeout=setTimeout((function(){e._mounted&&e.setState({open:!1})}),t)):this.setState({open:!1})}},{key:"getWindow",value:function(){return this.triggerNode&&this.triggerNode.ownerDocument?this.triggerNode.ownerDocument.defaultView||this.triggerNode.ownerDocument.parentWindow:null}},{key:"handleClickWindow",value:function(e){var t=this.state.open,n=this.props.shouldCloseOnClickingWindow;!t||!n||this.triggerNode&&this.triggerNode.contains(e.target)||this.popupNode&&this.popupNode.contains(e.target)||this.setState({open:!1})}},{key:"handleResizeWindow",value:function(){this.state.open&&this.setState({open:!1})}},{key:"_arrangePopup",value:function(){var e=this,t=this.props,n=t.align,a=t.margin,s=t.minDistanceToWindowBorder,r=t.shouldForceLeftBiased,i=t.shouldForceRightBiased,o={position:"fixed",zIndex:99,left:null,right:null,top:null,bottom:null,maxWidth:null,maxHeight:null};if(this.triggerNode&&this.popupNode){var c=this.triggerNode.getBoundingClientRect(),l=c.left+c.width/2,u=c.top+c.height/2,d=this.getWindow(),m=l<d.innerWidth/2,p=u<d.innerHeight/2;if("vertical"===n){if(!m&&!r||i){var b=d.innerWidth-c.right;o.right="".concat(b,"px"),o.maxWidth="".concat(d.innerWidth-b-s,"px")}else{var f=c.left;o.left="".concat(f,"px"),o.maxWidth="".concat(d.innerWidth-f-s,"px")}if(p){var v=c.bottom+a;o.top="".concat(v,"px"),o.maxHeight="".concat(d.innerHeight-v-s,"px"),this.popupNode.classList.remove("top-align"),this.popupNode.classList.add("bottom-align")}else{var g=d.innerHeight-c.top+a;o.bottom="".concat(g,"px"),o.maxHeight="".concat(d.innerHeight-g-s,"px"),this.popupNode.classList.remove("bottom-align"),this.popupNode.classList.add("top-align")}}else{if(m){var j=c.right+a;o.left="".concat(j,"px"),o.maxWidth="".concat(d.innerWidth-j-s,"px")}else{var k=d.innerWidth-c.left+a;o.right="".concat(k,"px"),o.maxWidth="".concat(d.innerWidth-k-s,"px")}if(p){var x=c.top;o.top="".concat(x,"px"),o.maxHeight="".concat(d.innerHeight-x-s,"px"),this.popupNode.classList.remove("top-align"),this.popupNode.classList.add("bottom-align")}else{var y=d.innerHeight-c.bottom;o.bottom="".concat(y,"px"),o.maxHeight="".concat(d.innerHeight-y-s,"px"),this.popupNode.classList.remove("bottom-align"),this.popupNode.classList.add("top-align")}}h.a.forEach(o,(function(t,n){e.popupNode.style[n]=t}))}}},{key:"renderPopup",value:function(){var e=this,t=this.props,n=t.children,a=t.className,s=t.canHoverPopup,r=this.state.isPopupHovered;return i.a.createPortal(Object(ws.jsx)("div",{className:"popup"+(a?" ".concat(a):""),ref:function(t){e.popupNode=t},onMouseEnter:function(){s&&(e.closePopupTimeout&&window.clearTimeout(e.closePopupTimeout),e.setState({isPopupHovered:!0}))},onMouseLeave:function(){r&&(e.setState({isPopupHovered:!1}),e._closePopup())},children:n}),this.triggerNode.closest("body"))}},{key:"render",value:function(){var e=this,t=this.state.open,n=this.props,r=n.trigger,i=n.on,o=n.disabled,c={};return"click"===i?c.onClick=function(){o||e.setState({open:!t})}:(c.onMouseEnter=function(){e.closePopupTimeout&&window.clearTimeout(e.closePopupTimeout),o||t||e.setState({open:!0})},c.onMouseLeave=function(){t&&e._closePopup()}),Object(ws.jsxs)(a.Fragment,{children:[s.a.cloneElement(s.a.Children.only(r),Object.assign({},{ref:function(t){e.triggerNode=t}},c)),t&&this.renderPopup()]})}}]),n}(a.Component);Bs.defaultProps={on:"hover",align:"vertical",margin:5,minDistanceToWindowBorder:50,disabled:!1,shouldCloseOnClickingWindow:!0,shouldForceLeftBiased:!1,canHoverPopup:!1,mouseLeaveToClosePopupDelay:0,onOpen:function(){},onClose:function(){}};var Rs=n(17),Is=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={shouldForceAutoPosition:a._shouldForceAutoPosition()},a.handleResizeWindow=a.handleResizeWindow.bind(Object(Ms.a)(a)),a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResizeWindow)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResizeWindow)}},{key:"handleResizeWindow",value:function(){this.setState({shouldForceAutoPosition:this._shouldForceAutoPosition()})}},{key:"_shouldForceAutoPosition",value:function(){return!window||window.innerWidth<1180}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.contentComponent,s=t.backgroundColor,r=t.canHoverPopup,i=t.mouseLeaveToClosePopupDelay,o=t.autoPosition,c=t.margin,l=this.state.shouldForceAutoPosition;return Object(ws.jsx)(Bs,{className:"info-popup"+(o||l?" auto-position":"")+(n?" ".concat(n):""),on:"hover",shouldForceLeftBiased:!o&&!l,margin:c||10,canHoverPopup:r,mouseLeaveToClosePopupDelay:i,trigger:Object(ws.jsx)("span",{className:"info-popup--trigger",ref:function(t){return e.triggerNode=t},children:Object(ws.jsx)(Rs.m,{})}),children:Object(ws.jsx)("div",{className:"info-popup--content",style:s?{backgroundColor:s}:{},children:a})})}}]),n}(a.Component);Is.defaultProps={canHoverPopup:!1,mouseLeaveToClosePopupDelay:0,autoPosition:!1};var Ds=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"_getTVL",value:function(){var e=this.props,t=e.fundItems,n=e.primaryMarketItems,a=null;return!h.a.isEmpty(t)&&h.a.every(t,(function(e){var t=e.fundAddress,a=e.primaryMarketAddress,s=le(t),r=ae(t);return!h.a.isNil(s)&&!h.a.isNil(r)&&h.a.has(n,"".concat(a,".summary"))}))&&(a=h.a.reduce(t,(function(e,t){var a=t.fundAddress,s=t.primaryMarketAddress,r=t.summary,i=n[s].summary,o=r.totalUnderlying,c=i.currentCreatingUnderlying,l=i.currentRedeemingShares,u=le(a),d=ae(a);return e=v()(e).plus(v()(o||0).plus(c||0).times(d)).minus(v()(l||0).times(u.M||0))}),v()(0))),a}},{key:"render",value:function(){var e=this.props,t=e.fundItems,n=e.primaryMarketItems,a=this._getTVL();return Object(ws.jsxs)("div",{className:"fund-tvl",children:[Object(ws.jsxs)("section",{className:"fund-tvl--total",children:[Object(ws.jsx)("label",{children:"TOTAL VALUE LOCKED"}),Object(ws.jsx)("div",{children:v()(a||0).gt(0)?"$".concat(v()(a).toFormat(0)):""})]}),h.a.map(t,(function(e,t){var a=e.primaryMarketAddress,s=e.assets,r=e.summary,i=n[a],o=h.a.has(s,"underlyingToken.symbol")?s.underlyingToken.symbol:null,c=h.a.has(i,"summary.currentCreatingUnderlying")?i.summary.currentCreatingUnderlying:null;return h.a.isNil(r)?null:Object(ws.jsxs)("section",{className:"fund-tvl--single-fund",children:[Object(ws.jsx)("label",{children:"TOTAL ".concat(o," DEPOSITED")}),!h.a.isNil(c)&&Object(ws.jsxs)("div",{children:[h.a.has(U,o)&&Object(ws.jsx)("img",{src:U[o]}),v()(r.totalUnderlying||0).plus(c).toFormat(0,1)]})]},t)}))]})}}]),n}(a.Component);var Ps=Object(o.c)((function(e){return{fundItems:e.fund.items,primaryMarketItems:e.primaryMarket.items,historyNAVs:e.fund.historyNAVs,underlyingTokenTwaps:e.fund.underlyingTokenTwaps}}))(Ds),Ls=n(42),Fs=n.n(Ls);Fs.a.setAppElement("#root");var Us=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={shouldShowModal:!1},a}return Object(Os.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,s=t.icon,r=t.name,i=t.nameRemarkComponent,o=t.caption,c=t.description,l=t.lastNAV,u=t.infoComponent,d=t.actionComponent,m=t.addToWalletComponent,h=t.learnMoreLink,p=this.state.shouldShowModal;return Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsxs)("div",{className:"token-item clearfix"+(n?" ".concat(n):""),onClick:function(){e.setState({shouldShowModal:!0})},children:[Object(ws.jsx)("img",{className:"token-item--avatar",src:s}),Object(ws.jsxs)("div",{className:"token-item--general",children:[Object(ws.jsx)("div",{className:"token-item--general--name",children:Object(ws.jsx)("label",{children:r})}),Object(ws.jsx)("div",{className:"token-item--general--caption",children:o})]}),u&&Object(ws.jsx)("div",{className:"token-item--info",children:u}),d&&Object(ws.jsx)("div",{className:"token-item--action",children:d})]}),p&&Object(ws.jsx)(Fs.a,{overlayClassName:"token-item--modal--overlay",className:"token-item--modal",isOpen:!0,children:Object(ws.jsxs)("div",{className:"token-item--modal--main centered",onClick:function(e){e.stopPropagation()},children:[Object(ws.jsx)("button",{className:"token-item--modal--close-button",onClick:function(){e.setState({shouldShowModal:!1})},children:Object(ws.jsx)(Rs.p,{})}),Object(ws.jsxs)("div",{className:"token-item--modal--top",children:[Object(ws.jsx)("img",{src:s}),Object(ws.jsxs)("div",{className:"token-item--modal--top--body",children:[Object(ws.jsxs)("div",{className:"token-item--modal--name",children:[Object(ws.jsx)("label",{children:r}),i&&Object(ws.jsx)("div",{className:"token-item--modal--name--remark",children:i})]}),Object(ws.jsxs)("div",{className:"token-item--modal--info",children:[u,l&&Object(ws.jsxs)("div",{className:"token-item--modal--info--nav",children:[Object(ws.jsx)("label",{children:"NAV"}),Object(ws.jsxs)("div",{children:[Object(ws.jsx)("span",{className:"value",children:v()(l).toFixed(4,1)}),Object(ws.jsx)(Is,{contentComponent:"Net Asset Value"})]})]})]})]})]}),Object(ws.jsx)("div",{className:"token-item--modal--description",dangerouslySetInnerHTML:{__html:c}}),Object(ws.jsx)(ks.b,{to:{pathname:h},target:"_blank",children:Object(ws.jsx)("button",{className:"token-item--modal--learn-more-button button-style-7",children:"Learn more"})}),Object(ws.jsx)("div",{className:"token-item--modal--action",children:d}),m&&Object(ws.jsx)("div",{className:"token-item--modal--wallet-add-token-button",children:m})]})})]})}}]),n}(a.Component),Hs={CHESS:"https://tranchess.com/chess_200X200.png","tBTC.QUEEN":"https://tranchess.com/queen_200X200.png","tBTC.BISHOP":"https://tranchess.com/bishop_200X200.png","tBTC.ROOK":"https://tranchess.com/rook_200X200.png","tBTCB.QUEEN":"https://tranchess.com/queen_200X200.png","tBTCB.BISHOP":"https://tranchess.com/bishop_200X200.png","tBTCB.ROOK":"https://tranchess.com/rook_200X200.png","tETH.QUEEN":"https://tranchess.com/queen_200X200.png","tETH.BISHOP":"https://tranchess.com/bishop_200X200.png","tETH.ROOK":"https://tranchess.com/rook_200X200.png",eQUEEN:"https://tranchess.com/queen_200X200.png",eBISHOP:"https://tranchess.com/bishop_200X200.png",eROOK:"https://tranchess.com/rook_200X200.png",trancheM:"https://tranchess.com/queen_200X200.png",trancheA:"https://tranchess.com/bishop_200X200.png",trancheB:"https://tranchess.com/rook_200X200.png"},Vs={"tBTCB.BISHOP":"tBTC.BISHOP"},Ws=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.className,a=e.tokenAddress,s=e.tokenSymbol,r=e.tokenDecimals,i=null;return h.a.isNil(a)||(i={address:a,symbol:Vs[s]||s,decimals:r,image:Hs[s]||null}),i?Object(ws.jsx)("button",{className:"wallet-add-token-button"+(n?" ".concat(n):""),onClick:function(){window.ethereum?window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:i}}):t(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:"Missing wallet: please install MetaMask browser extension and try again"})))},children:"Add to wallet"}):null}}]),n}(a.Component);Ws.defaultProps={tokenDecimals:18};var Ys=Object(o.c)((function(){return{}}))(Ws),Ks=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.checked,a=e.trueText,s=e.falseText,r=e.disabled,i=e.isChanging,o=e.changingText,c=e.onChange;return Object(ws.jsxs)("div",{className:"toggle clearfix "+(n?"on":"off")+(t?" ".concat(t):"")+(r||i?" disabled":""),onClick:function(e){!h.a.isFunction(c)||r||i||e.metaKey||e.ctrlKey||e.shiftKey||c(!n)},children:[Object(ws.jsx)("div",{className:"toggle--track",children:Object(ws.jsx)("div",{className:"toggle--button"})}),Object(ws.jsx)("span",{className:"toggle--label"+(h.a.isBoolean(n)?"":" is-empty-value"),children:i?o:n?a:h.a.isBoolean(n)?s:"Invalid"})]})}}]),n}(a.Component);Ks.defaultProps={trueText:"TRUE",falseText:"FALSE",changingText:"Waiting",isChanging:!1,disabled:!1};var zs=n.p+"static/media/coming-soon.5a3203f7.svg",Gs=n(102),qs=n(386),_s=n.n(qs),Qs=n(151),Xs=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"render",value:function(){var e=this.props,t=e.pageSize,n=e.pageIndex,a=e.totalSize,s=e.onChangePageIndex;if(a>0){var r=Math.ceil(a/t);return Object(ws.jsx)(_s.a,{pageCount:Math.ceil(a/t),pageRangeDisplayed:n+2>=r?5:n<=3?4:3,marginPagesDisplayed:1,previousLabel:Object(ws.jsx)(Qs.b,{}),nextLabel:Object(ws.jsx)(Qs.c,{}),breakLabel:"...",forcePage:n-1,containerClassName:"pagination",activeClassName:"pagination--active",disabledClassName:"pagination--disabled",onPageChange:function(e){s(e.selected+1)}})}return null}}]),n}(a.Component);Xs.defaultProps={onChangePageIndex:function(){}};var Js=n(128),Zs=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){return Object(ys.a)(this,n),t.call(this,e)}return Object(Os.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.shouldAlwaysShow;return Object(ws.jsx)("div",{className:"loader"+(t||n?"":" hidden")+(t?" is-loading":""),children:Object(ws.jsx)(Js.d,{})})}}]),n}(a.Component);Zs.defaultProps={isLoading:!1,shouldAlwaysShow:!1};var $s=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={pageIndex:1,pageSize:7},a}return Object(Os.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.fundItem,s=t.historyNAVs,r=t.isFetchingHistoryNAVs,i=t.trancheFocused,o=this.state,c=o.pageIndex,l=o.pageSize,u=h.a.slice(Object(Gs.a)(s).reverse(),(c-1)*l,c*l);return Object(ws.jsxs)("div",{className:"fund-nav-table",children:[Object(ws.jsxs)("div",{className:"fund-nav-table--title hidden",children:["NAV"+(h.a.has(a,"assets.quoteToken")?" (".concat(a.assets.quoteToken.symbol,")"):""),Object(ws.jsx)(Zs,{isLoading:r})]}),Object(ws.jsx)("div",{className:"fund-nav-table--main",children:Object(ws.jsxs)("table",{children:[Object(ws.jsx)("thead",{children:Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("th",{children:"Time"}),Object(ws.jsx)("th",{children:"QUEEN"}),Object(ws.jsx)("th",{children:"BISHOP"}),Object(ws.jsx)("th",{children:"ROOK"})]})}),Object(ws.jsx)("tbody",{children:h.a.map(u,(function(e){var t=e.timestamp,n=e.M,a=e.A,s=e.B;return Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("td",{children:j()(t).format("DD MMM YYYY, HH:mm")}),Object(ws.jsx)("td",{className:"M"===i?"focused":null,children:v()(n).toFixed(4,1)}),Object(ws.jsx)("td",{className:"A"===i?"focused":null,children:v()(a).toFixed(4,1)}),Object(ws.jsx)("td",{className:"B"===i?"focused":null,children:v()(s).toFixed(4,1)})]},t)}))})]})}),h.a.size(s)>0&&Object(ws.jsx)(Xs,{pageSize:l,pageIndex:c,totalSize:h.a.size(s),onChangePageIndex:function(t){t===Math.ceil(h.a.size(s)/l)&&n(Ja({granularity:"M30",shouldFetchLatest:!1})),e.setState({pageIndex:t})}})]})}}]),n}(a.Component);var er=Object(o.c)((function(e){var t=e.fund,n=t.items,a=t.selectedFundAddress,s=t.historyNAVs,r=t.isFetchingHistoryNAVs;return{fundItem:n[a],historyNAVs:s.M30||[],isFetchingHistoryNAVs:r}}))($s),tr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={navTableFundAddress:null,shouldShowNavTable:!1},a.optionNodes={},a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.selectedFundAddress,n=e.selectedTranche,a=this.optionNodes["".concat(t,"--").concat(n)];h.a.isNil(a)||a.scrollIntoView({block:"nearest"})}},{key:"NavModal",value:function(){var e=this;return Object(ws.jsx)(Fs.a,{overlayClassName:"token-list-selector--nav-table-modal-overlay",className:"token-list-selector--nav-table-modal",isOpen:!0,children:Object(ws.jsxs)("div",{className:"token-list-selector--nav-table-modal--main centered",children:[Object(ws.jsxs)("div",{className:"token-list-selector--nav-table-modal--header",children:[Object(ws.jsx)("div",{className:"token-list-selector--nav-table-modal--title",children:"Historical NAV"}),Object(ws.jsx)("button",{className:"token-list-selector--nav-table-modal--close-button",onClick:function(){e.setState({shouldShowNavTable:!1})},children:Object(ws.jsx)(Rs.p,{})})]}),Object(ws.jsx)("div",{className:"token-list-selector--nav-table-modal--body",children:Object(ws.jsx)(er,{})})]})})}},{key:"Option",value:function(e){var t=this,n=e.fundAddress,a=e.tranche,s=e.icon,r=e.name,i=e.infoComponent,o=e.disabled,c=void 0!==o&&o,l=this.props,u=l.selectedFundAddress,d=l.selectedTranche,m=l.onChange;return Object(ws.jsxs)("div",{className:"token-list-selector--option clearfix"+(n===u&&a===d?" selected":"")+(c?" disabled":""),ref:function(e){t.optionNodes["".concat(n,"--").concat(a)]=e},disabled:c,onClick:function(){c||m(n,a)},children:[s&&Object(ws.jsx)("img",{src:s}),Object(ws.jsxs)("div",{className:"token-list-selector--option--main",children:[Object(ws.jsx)("div",{className:"token-list-selector--option--name",children:r}),Object(ws.jsx)("div",{className:"token-list-selector--option--info",children:i})]}),c&&Object(ws.jsx)("img",{className:"token-list-selector--option--coming-soon",src:zs})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.fundItems,s=t.exchangeItems,r=this.state,i=r.navTableFundAddress,o=r.shouldShowNavTable;return Object(ws.jsxs)("div",{className:"token-list-selector clearfix",children:[h.a.map(n,(function(t,n){var r=t.assets,i=t.exchangeAddress,o=h.a.has(r,"underlyingToken.symbol")?r.underlyingToken.symbol:null,c=h.a.has(r,"trancheM.symbol")?r.trancheM.symbol:null,l=h.a.has(r,"trancheA.symbol")?r.trancheA.symbol:null,u=h.a.has(r,"trancheB.symbol")?r.trancheB.symbol:null,d=le(n),m=ue(n),p=de({fundItem:t}),b=h.a.has(s,"".concat(i,".dailyVolume"))?s[i].dailyVolume:{};return Object(ws.jsxs)(a.Fragment,{children:[e.Option({fundAddress:n,tranche:"M",icon:U[c],name:(F[o]||"")+L.M.name,infoComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsxs)("div",{className:"row row-1 clearfix",children:[Object(ws.jsx)("span",{className:"token-list-selector--nav",children:"NAV: ".concat(d?v()(d.M).toFixed(4,1):"--")}),Object(ws.jsxs)("div",{className:"token-list-selector--apy clearfix",children:[Object(ws.jsx)("label",{children:"APY: "}),Object(ws.jsx)("span",{className:"token-list-selector--apy--value",title:h.a.isNil(p.APY.M)?null:"".concat(v()(p.APY.M[1]||0).times(100).toFixed(1,1),"%"),children:h.a.isNil(p.stakingAPR.M)||!v()(p.stakingAPR.M[0]||0).gt(0)||h.a.isNil(p.APY.M)?"--":"Up to ".concat(v()(p.APY.M[1]).times(100).toFixed(1,1),"%")})]})]}),Object(ws.jsxs)("div",{className:"row row-2 clearfix",children:["24h Volume: ",h.a.isNil(b.trancheM)?"--":"$".concat(v()(b.trancheM||0).gt(0)?J({number:b.trancheM,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:0}):"0.0")]})]})}),e.Option({fundAddress:n,tranche:"A",icon:U[l],name:(F[o]||"")+L.A.name,infoComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsxs)("div",{className:"row row-1 clearfix",children:[Object(ws.jsx)("span",{className:"token-list-selector--nav",children:"NAV: ".concat(d?v()(d.A).toFixed(4,1):"--")}),Object(ws.jsxs)("div",{className:"token-list-selector--apy clearfix",children:[Object(ws.jsx)("label",{children:"APY: "}),Object(ws.jsx)("span",{className:"token-list-selector--apy--value",title:h.a.isNil(p.APY.A)?null:"".concat(v()(p.APY.A[1]||0).times(100).toFixed(1,1),"%"),children:h.a.isNil(p.stakingAPR.A)||!v()(p.stakingAPR.A[0]||0).gt(0)||h.a.isNil(p.APY.A)?"--":"Up to ".concat(v()(p.APY.A[1]).times(100).toFixed(1,1),"%")})]})]}),Object(ws.jsxs)("div",{className:"row row-2 clearfix",children:["24h Volume: ",h.a.isNil(b.trancheA)?"--":"$".concat(v()(b.trancheA||0).gt(0)?J({number:b.trancheA,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:0}):"0.0")]})]})}),e.Option({fundAddress:n,tranche:"B",icon:U[u],name:(F[o]||"")+L.B.name,infoComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsxs)("div",{className:"row row-1 clearfix",children:[Object(ws.jsx)("span",{className:"token-list-selector--nav",children:"NAV: ".concat(d?v()(d.B).toFixed(4,1):"--")}),Object(ws.jsx)("span",{className:"token-list-selector--leverage clearfix",children:"Leverage: ".concat(h.a.isNil(m)?"--":"".concat(v()(m).toFixed(2),"x"))})]}),Object(ws.jsxs)("div",{className:"row row-2 clearfix",children:["24h Volume: ",h.a.isNil(b.trancheB)?"--":"$".concat(v()(b.trancheB||0).gt(0)?J({number:b.trancheB,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:0}):"0.0")]})]})})]},n)})),!h.a.isNil(i)&&o&&this.NavModal()]})}}]),n}(a.Component);tr.defaultProps={onChange:function(){}};var nr=Object(o.c)((function(e){return{fundItems:e.fund.items,exchangeItems:e.exchange.items}}))(tr),ar=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e))._mounted=!1,a.polling=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,this._getData(),this.polling=setInterval((function(){e._getData()}),1e4)}},{key:"componentDidUpdate",value:function(e){var t=e.wallet,n=e.tokenAddress,a=e.spenderAddress,s=e.amountToSpend,r=this.props,i=r.wallet,o=r.tokenAddress,c=r.spenderAddress,l=r.amountToSpend,u=h.a.find(i.tokenAllowances,(function(e){return e.tokenAddress===o&&e.spenderAddress===c}));h.a.isEqual(t.address,i.address)&&h.a.isEqual(n,o)&&h.a.isEqual(a,c)||this._getData(),!h.a.isNil(u)&&v()(s||0).lte(u.value||0)&&v()(l||0).gt(u.value||0)&&this._getData(!0)}},{key:"componentWillUnmount",value:function(){this._mounted=!1,window.clearInterval(this.polling)}},{key:"_getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.dispatch,a=t.fetchAllowanceDisabled,s=t.tokenAddress,r=t.spenderAddress,i=t.wallet,o=t.amountToSpend;if(!a&&i.address&&s&&r){var c=h.a.find(i.tokenAllowances,(function(e){return e.tokenAddress===s&&e.spenderAddress===r}));(h.a.isNil(c)||v()(c.value||0).eq(0)||v()(o||0).gt(c.value||0)||e)&&n(Ma(s,r))}}},{key:"handleClickApprove",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u,d,m,p,b=this;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,a=t.tokenDisplayName,s=t.wallet,r=t.tokenAddress,i=t.spenderAddress,o=t.onClickApprove,c=t.onApproveSuccess,l=t.onApproveError,u=_t({contractAddress:r}),o(),!h.a.isNil(u)){e.next=8;break}console.error("ApproveAndSignTransactionButton handleClickApprove Error: tokenContract is missing"),l("Token Contract is missing"),e.next=27;break;case 8:if(!h.a.isNil(s.address)){e.next=13;break}console.error("ApproveAndSignTransactionButton handleClickApprove Error: Wallet Address is missing"),l("Wallet Address is missing"),e.next=27;break;case 13:return d=h.a.find(s.tokenAllowances,(function(e){return e.tokenAddress===r&&e.spenderAddress===i})),e.prev=14,e.next=17,u.approve(i,h.a.toString(Number.MAX_SAFE_INTEGER));case 17:(m=e.sent)&&(n(Ba({transactionResponse:m,title:"Approve ".concat(a||(h.a.isNil(d)?"token":d.symbol))})).then((function(){b._getData(!0)})).catch((function(e){throw new Error(e)})),c()),e.next=27;break;case 21:e.prev=21,e.t0=e.catch(14),p=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:p}))),l(p),console.error("ApproveAndSignTransactionButton handleClickApprove Error: ",e.t0);case 27:case"end":return e.stop()}}),e,this,[[14,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.wallet,s=t.allowanceAmount,r=t.tokenDisplayName,i=t.tokenAddress,o=t.spenderAddress,c=t.amountToSpend,l=t.signTransactionLabel,u=t.signTransactionDisabled,d=t.onClickSignTransaction,m=h.a.isNil(i)||h.a.isNil(o)?null:h.a.find(a.tokenAllowances,(function(e){return e.tokenAddress===i&&e.spenderAddress===o})),p=h.a.has(m,"value")?m.value:s||null,b=!h.a.isNil(p)&&(v()(p||0).eq(0)||!h.a.isNil(c)&&v()(p||0).lt(c));return Object(ws.jsx)("button",{className:"approve-and-sign-transaction-button"+(n?" ".concat(n):""),disabled:h.a.isNil(p)||!b&&u||!xa(a.providerNetwork),onClick:function(){b?e.handleClickApprove():d()},children:xa(a.providerNetwork)?b?"Approve ".concat(m?m.symbol:r||""):l:"Wrong network"})}}]),n}(a.Component);ar.defaultProps={onClickApprove:function(){},onClickSignTransaction:function(){},onApproveSuccess:function(){},onApproveError:function(){}};var sr=Object(o.c)((function(e){return{wallet:e.wallet}}))(ar),rr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.checked,a=e.onChange;return Object(ws.jsx)("div",{className:"checkbox"+(n?" checked":"")+(t?" disabled":""),onClick:function(){t||a(!n)},children:n&&Object(ws.jsx)(Rs.g,{className:"centered"})})}}]),n}(a.Component);rr.defaultProps={disabled:!1,checked:!1,onChange:function(){}};var ir=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"Block",value:function(e){var t=e.label,n=void 0===t?"":t,a=e.hasButtons,s=void 0!==a&&a,r=e.shouldDisableIncreaseButton,i=void 0!==r&&r,o=e.shouldDisableDecreaseButton,c=void 0!==o&&o,l=e.onClickIncreaseButton,u=void 0===l?function(){}:l,d=e.onClickDecreaseButton,m=void 0===d?function(){}:d;return Object(ws.jsxs)("div",{className:"pd-level--block"+(s?" has-buttons":""),children:[s&&Object(ws.jsx)("button",{className:"pd-level--block--increase-button",disabled:i,onClick:function(){u()},children:Object(ws.jsx)(Rs.b,{})}),Object(ws.jsx)("label",{children:n}),s&&Object(ws.jsx)("button",{className:"pd-level--block--decrease-button",disabled:c,onClick:function(){m()},children:Object(ws.jsx)(Rs.a,{})})]})}},{key:"render",value:function(){var e=this.props,t=e.pdLevel,n=e.onChange,a=he(t);return Object(ws.jsx)(Bs,{className:"pd-level--popup",on:"click",shouldForceRightBiased:!0,trigger:Object(ws.jsxs)("div",{className:"pd-level--trigger",children:[Object(ws.jsx)("label",{children:"".concat(Number(a)>0?"+":"").concat(Number(a/100).toFixed(2),"%")}),Object(ws.jsx)(Rs.e,{})]}),children:Object(ws.jsxs)("div",{className:"pd-level--body",children:[this.Block({label:"".concat(a>0?"+":a<0?"-":"").concat(Math.abs(parseInt(a/100))),hasButtons:!0,shouldDisableIncreaseButton:me(a+100)>W,shouldDisableDecreaseButton:me(a-100)<1,onClickIncreaseButton:function(){var e=a+100,t=h.a.clamp(me(e),1,W);n(t)},onClickDecreaseButton:function(){var e=a-100,t=h.a.clamp(me(e),1,W);n(t)}}),this.Block({label:"."}),this.Block({label:Math.abs(parseInt(a%100))||"00",hasButtons:!0,shouldDisableIncreaseButton:me(a+25)>W,shouldDisableDecreaseButton:me(a-25)<1,onClickIncreaseButton:function(){var e=a+25,t=h.a.clamp(me(e),1,W);n(t)},onClickDecreaseButton:function(){var e=a-25,t=h.a.clamp(me(e),1,W);n(t)}}),this.Block({label:"%"})]})})}}]),n}(a.Component);ir.defaultProps={pdLevel:Y,onChange:function(){}};var or=function(e){var t=e.key,n=void 0===t?"":t,a=e.title;return{key:n,title:void 0===a?"":a}},cr={DEPOSIT:or({key:"DEPOSIT",title:"Stake"}),WITHDRAW:or({key:"WITHDRAW",title:"Unstake"})},lr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={amountInput:""},a}return Object(Os.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.direction,a=t.wallet,s=t.iconComponent,r=t.tokenDisplayName,i=t.tokenDecimals,o=t.maxAvailableAmount,c=t.tokenAllowanceAmount,l=t.tokenAddress,u=t.stakingContractAddress,d=t.captionComponent,m=t.buttonLabel,p=t.disabled,b=t.onClickSignTransactionButton,f=this.state.amountInput,g=v()(f||0).gt(o),j=cr[n]||{};return Object(ws.jsxs)("div",{className:"staking-editor",children:[Object(ws.jsx)("div",{className:"staking-editor--title",children:j.title||""}),d&&Object(ws.jsx)("div",{className:"staking-editor--caption-component",children:d}),Object(ws.jsxs)("div",{className:"staking-editor--body",children:[Object(ws.jsx)("div",{className:"staking-editor--icon",children:s}),Object(ws.jsxs)("div",{className:"staking-editor--main",children:[Object(ws.jsx)("input",{type:"number",min:0,placeholder:"0.0 ".concat(r),value:f,onChange:function(t){te(t.target.value)>i||e.setState({amountInput:t.target.value})}}),Object(ws.jsxs)("div",{className:"staking-editor--info",children:[n===cr.DEPOSIT.key?"Wallet: ":"Available: ",v()(o||0).gt(0)?J({number:o,shouldApplyFloorValue:!0,shouldReturnLocalString:!0}):"0.0"," ".concat(r," - "),Object(ws.jsx)("button",{className:"button-style-7",onClick:function(){e.setState({amountInput:o||0})},children:"Max"})]})]})]}),n===cr.DEPOSIT.key?Object(ws.jsx)(sr,{className:"staking-editor--submit-button button-style-5",tokenDisplayName:r,tokenAddress:l,spenderAddress:u,allowanceAmount:c,amountToSpend:h.a.toString(f),fetchAllowanceDisabled:!0,signTransactionLabel:h.a.isEmpty(m)?xa(a.providerNetwork)?g?"Insufficient ".concat(r," balance"):j.title||"":"Wrong network":m,signTransactionDisabled:Number(f)<=0||g||!xa(a.providerNetwork)||p,onClickSignTransaction:function(){b(f)}}):n===cr.WITHDRAW.key?Object(ws.jsx)("button",{className:"staking-editor--submit-button button-style-5",disabled:Number(f)<=0||g||!xa(a.providerNetwork)||p,onClick:function(){b(f)},children:h.a.isEmpty(m)?xa(a.providerNetwork)?g?"Insufficient ".concat(r," balance"):j.title||"":"Wrong network":m}):null]})}}]),n}(a.Component);lr.defaultProps={tokenDecimals:18,maxAvailableAmount:"0",tokenAllowanceAmount:"0",onClickSignTransactionButton:function(){}};var ur=Object(o.c)((function(e){return{wallet:e.wallet}}))(lr),dr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"handleClickSignTransactionButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u,d,m,p,b,f=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:"",n=this.props,a=n.dispatch,s=n.fundAddress,r=n.fundItem,i=n.tranche,o=n.direction,c=n.onClickClose,l=Jt(s),u=L[i].value,!h.a.isNumber(u)||h.a.isNil(l)||!v()(t||0).gt(0)){e.next=33;break}if(d=h.a.has(r,"assets.underlyingToken.symbol")?r.assets.underlyingToken.symbol:null,e.prev=6,o!==cr.DEPOSIT.key){e.next=14;break}return e.next=10,l.exchange.deposit(u,h.a.toString(t));case 10:m=e.sent,p="Stake ".concat(F[d]).concat(L[i].name),e.next=19;break;case 14:if(o!==cr.WITHDRAW.key){e.next=19;break}return e.next=17,l.exchange.withdraw(u,h.a.toString(t));case 17:m=e.sent,p="Unstake ".concat(F[d]).concat(L[i].name);case 19:if(!h.a.has(m,"hash")){e.next=25;break}this.setState({amountInput:""}),a(Ba({transactionResponse:m,title:p})),c(),e.next=26;break;case 25:throw new Error("Cannot parse transaction's hash");case 26:e.next=33;break;case 28:e.prev=28,e.t0=e.catch(6),b=$(e.t0),a(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:b}))),console.error("ExchangeStakingModal handleClickSumbitButton Error: ",e.t0);case 33:case"end":return e.stop()}}),e,this,[[6,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.fundAddress,s=t.tranche,r=t.direction,i=t.wallet,o=t.fundItem,c=t.exchangeAccountItem,l=t.onClickClose,u=h.a.has(o,"summary.isFundActive")&&!1===o.summary.isFundActive,d=h.a.has(o,"assets.underlyingToken.symbol")?o.assets.underlyingToken.symbol:null,m=h.a.has(o,"assets.tranche".concat(s))?o.assets["tranche".concat(s)]:null,p=h.a.has(i,"balance.fundTokens.".concat(n,".token").concat(s))?i.balance.fundTokens[n]["token".concat(s)]:null,b=h.a.has(i,"allowance.fundTokens.".concat(n,".exchange.token").concat(s))?i.allowance.fundTokens[n].exchange["token".concat(s)]:null,f=h.a.has(c,"available.token".concat(s))?c.available["token".concat(s)]:null,g=h.a.has(c,"locked.token".concat(s))?c.locked["token".concat(s)]:null;return h.a.isNil(m)?null:Object(ws.jsx)(Fs.a,{overlayClassName:"exchange-staking-modal--overlay",className:"exchange-staking-modal",isOpen:!0,children:Object(ws.jsxs)("div",{className:"exchange-staking-modal--main centered",children:[Object(ws.jsx)("button",{className:"exchange-staking-modal--close-button",onClick:function(){l()},children:Object(ws.jsx)(Rs.p,{})}),Object(ws.jsx)("div",{className:"exchange-staking-modal---body",children:Object(ws.jsx)(ur,{direction:r,iconComponent:Object(ws.jsx)("img",{src:U[m.symbol]}),tokenDisplayName:(F[d]||"")+L[s].name,tokenAddress:m.address,tokenDecimals:m.decimal,maxAvailableAmount:r===cr.DEPOSIT.key?p:r===cr.WITHDRAW.key?f:"0",tokenAllowanceAmount:b,stakingContractAddress:o.exchangeAddress,captionComponent:r===cr.WITHDRAW.key&&v()(g||0).gt(0)?Object(ws.jsxs)(a.Fragment,{children:[J({number:g,shouldApplyFloorValue:!0,shouldReturnLocalString:!0})," "+(F[d]||"")+L[s].name," tokens are in post-only order(s). Please go to ",Object(ws.jsx)(ks.b,{to:"/swap#orders",children:"Swap"})," to cancel those orders before unstaking"]}):null,disabled:u,buttonLabel:u?"Inactive fund":null,onClickSignTransactionButton:function(t){e.handleClickSignTransactionButton(t)}})})]})})}}]),n}(a.Component);dr.defaultProps={direction:cr.DEPOSIT.key,onClickClose:function(){}};var mr=Object(o.c)((function(e,t){var n=e.fund.items[t.fundAddress],a=h.a.has(n,"exchangeAddress")?e.exchange.account.items[n.exchangeAddress]:null;return{wallet:e.wallet,fundItem:n,exchangeAccountItem:a}}))(dr),hr={TAKER:"TAKER",MAKER:"MAKER"},pr={BUY:"BUY",SELL:"SELL"},br=function(e){var t=e.pdLevel,n=void 0===t?0:t,a=e.frozenAmount,s=void 0===a?"":a,r=e.reservedAmount;return{pdLevel:n,frozenAmount:s,reservedAmount:void 0===r?"":r}},fr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={amountInput:"",shouldShowStakingModal:!1,message:null},a._mounted=!1,a.mainNode=null,a.postOnlyWrapperNode=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentDidUpdate",value:function(e){var t=e.side,n=e.shouldHideRole,a=this.props,s=a.side,r=a.shouldHideRole;!h.a.isEqual(t,s)&&this.mainNode&&(this.mainNode.classList.remove("".concat(t,"-animation")),this.mainNode.classList.add("".concat(s,"-animation"))),!h.a.isEqual(n,r)&&this.postOnlyWrapperNode&&this.postOnlyWrapperNode.classList.add("animation")}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"_getOrderBook",value:function(){var e=this.props,t=e.fundItem,n=e.exchangeItem,a=e.tranche;return h.a.has(n,"orderBook.tranche".concat(a,".version"))&&h.a.has(t,"summary.rebalanceSize")&&parseInt(n.orderBook["tranche".concat(a)].version)===parseInt(t.summary.rebalanceSize)?n.orderBook["tranche".concat(a)]:null}},{key:"_getTakerEstimatedTradingResult",value:function(){var e=this.props,t=e.fundHistoryNAV,n=e.tranche,a=e.side,s=e.role,r=e.pdLevel,i=e.provider,o=this.state.amountInput,c=this._getOrderBook(),l=h.a.has(t,"M30")&&h.a.isArray(t.M30)?t.M30:[],u=h.a.isNil(c)?[]:c[a===pr.BUY?"asks":"bids"]||[],d=h.a.filter(u,(function(e){return(a===pr.BUY&&e.pdLevel<=r||a===pr.SELL&&e.pdLevel>=r)&&v()(e.totalAmount).gt(0)})),m=h.a.sortBy(d,(function(e){return(a===pr.BUY?1:-1)*e.pdLevel})),p=v()(0),b=v()(o||0);if(s===hr.TAKER&&h.a.size(l)>1&&!h.a.isEmpty(m)&&h.a.inRange(r,1,82)&&b.gt(0)){var f=h.a.isNil(i,"blockTimestamp")?j()():j()(i.blockTimestamp),g=f.minutes()<=29?j()(f).add(-30,"minutes").minutes(30).startOf("minute"):j()(f).minutes(0).startOf("minute"),k=h.a.findLast(l,(function(e){return g.isSame(e.timestamp)})),x=h.a.last(l);if(!h.a.isNil(k)&&!h.a.isNil(x)){for(var y=[],O=0;O<h.a.size(m);O++){var A=m[O],N=v()(A.totalAmount),w=he(A.pdLevel),S=h.a.has(k,n)?v()(k[n]).times(v()(w).div(1e4).plus(1)):null,C=N.div(1.05)[a===pr.BUY?"times":"div"](S||0);if(C.gte(b)){y.push(br({pdLevel:A.pdLevel,frozenAmount:b.toString(),reservedAmount:b.times(1.05)[a===pr.BUY?"div":"times"](S).toString()})),b=v()(0);break}y.push(br({pdLevel:A.pdLevel,frozenAmount:C.toString(),reservedAmount:N.toString()})),b=b.minus(C)}h.a.forEach(y,(function(e){var t=e.pdLevel,s=e.frozenAmount,r=e.reservedAmount,i=he(t),o=h.a.has(x,n)?v()(x[n]).times(v()(i).div(1e4).plus(1)):null;!h.a.isNil(o)&&o.gt(0)&&(p=p.plus(v.a.minimum(r,v()(s)[a===pr.BUY?"div":"times"](o))))}))}}return{estimatedReceivingAmount:p.toString(),remainingAmountToFill:b.toString()}}},{key:"_getBestPDLevel",value:function(){var e=this._getOrderBook(),t={bid:null,ask:null};if(!h.a.isNil(e)){var n=e.bids,a=e.asks,s=h.a.findLast(n,(function(e){return v()(e.totalAmount||0).gt(0)})),r=h.a.find(a,(function(e){return v()(e.totalAmount||0).gt(0)}));s&&(t.bid=s.pdLevel),r&&(t.ask=r.pdLevel)}return t}},{key:"handleClickPlaceOrderButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u,d,m,p,b,f,v,g,j,k,x;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,a=t.fundItem,s=t.tranche,r=t.role,i=t.side,o=t.pdLevel,c=t.onClickPlaceOrder,l=this.state.amountInput,u=h.a.has(a,"assets.underlyingToken.symbol")?a.assets.underlyingToken.symbol:null,d=F[u]||"",m=Jt(a.fundAddress),!h.a.isNil(a)&&!h.a.isNil(m)){e.next=9;break}console.error("OrderEditor handleClickPlaceOrderButton Error: Selected FUND is missing"),e.next=42;break;case 9:if(p=null,b=a.summary.rebalanceSize,e.prev=11,r!==hr.MAKER){e.next=21;break}if(f=i===pr.BUY?"placeBid":"placeAsk",v=Object(Me.a)({tranche:L[s].value,pdLevel:o,version:parseInt(b)},i===pr.BUY?"quoteAmount":"baseAmount",l),!h.a.has(m.exchange,f)){e.next=19;break}return e.next=18,m.exchange[f](v);case 18:p=e.sent;case 19:e.next=28;break;case 21:if(r!==hr.TAKER){e.next=28;break}if(j="".concat(i.toLowerCase()).concat(s),g={version:parseInt(b)},Object(Me.a)(g,i===pr.BUY?"maxPDLevel":"minPDLevel",o),Object(Me.a)(g,i===pr.BUY?"quoteAmount":"baseAmount",l),k=g,!h.a.has(m.exchange,j)){e.next=28;break}return e.next=27,m.exchange[j](k);case 27:p=e.sent;case 28:if(c(),!h.a.has(p,"hash")){e.next=34;break}this._mounted&&this.setState({amountInput:""}),n(Ba({transactionResponse:p,title:(r===hr.MAKER?i===pr.BUY?"Post-only BUY":"Post-only SELL":i)+" ".concat(d).concat(L[s].name," @ ").concat((he(o)/100).toFixed(2),"%"),servicePendingMessageOnSuccess:r===hr.MAKER?'you will see updates in "Pending orders" soon':'you will see updates in "Filled trades" soon'})).then((function(){setTimeout((function(){n(jn()),n(kn()),n(gn(a.exchangeAddress,s))}),2e3)})),e.next=35;break;case 34:throw new Error("Cannot parse transaction's hash");case 35:e.next=42;break;case 37:e.prev=37,e.t0=e.catch(11),x=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:x}))),console.error("NewOrderEditor handleClickPlaceOrderButton Error: ",e.t0);case 42:case"end":return e.stop()}}),e,this,[[11,37]])})));return function(){return e.apply(this,arguments)}}()},{key:"Roles",value:function(){var e=this,t=this.props,n=t.role,s=t.onChangeRole;return Object(ws.jsx)("div",{className:"order-editor--post-only-wrapper clearfix",ref:function(t){e.postOnlyWrapperNode=t},children:Object(ws.jsxs)("div",{className:"order-editor--post-only",children:[Object(ws.jsxs)("label",{children:["Post-only",Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:['If "Post-only" is enabled, your order will enter the order book, rather than executed immediately.',Object(ws.jsx)("br",{}),Object(ws.jsx)("br",{}),"If it is disabled, your placed orders are immediately executed against resting orders. If the order cannot be fully filled, the remaining balance is canceled.",Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/tranchess-swap#what-difference-does-it-make-if-i-check-the-post-only-box-before-placing-orders"},target:"_blank",children:"Learn more"})]})})]}),Object(ws.jsx)(rr,{checked:n===hr.MAKER,onChange:function(e){s(e?hr.MAKER:hr.TAKER)}})]})})}},{key:"render",value:function(){var e,t,n,s=this,r=this.props,i=r.dispatch,o=r.fundAddress,c=r.fundItem,l=r.exchangeItem,u=r.exchangeAccountItem,d=r.tranche,m=r.role,p=r.side,b=r.wallet,f=r.provider,g=r.shouldHideRole,k=r.pdLevel,x=r.onChangePDLevel,y=this.state,O=y.amountInput,A=y.shouldShowStakingModal,N=h.a.has(b,"balance.fundTokens.".concat(o))?b.balance.fundTokens[o]:{},w=h.a.has(c,"summary.isExchangeActive")&&!1===c.summary.isExchangeActive,S=this._getBestPDLevel(),C=m===hr.TAKER&&(p===pr.BUY&&(h.a.isNil(S.ask)||k<S.ask)||p===pr.SELL&&(h.a.isNil(S.bid)||k>S.bid)),T=m===hr.MAKER&&(p===pr.BUY&&!h.a.isNil(S.ask)&&k>=S.ask||p===pr.SELL&&!h.a.isNil(S.bid)&&k<=S.bid),E=h.a.isNil(f,"blockTimestamp")?j()():j()(f.blockTimestamp),M=p===pr.BUY&&h.a.has(l,"variables")?l.variables.minBidAmount:p===pr.SELL&&h.a.has(l,"variables")?l.variables.minAskAmount:0,B=p===pr.BUY?N.quoteToken||0:h.a.has(u,"available")&&u.available["token".concat(d)]||0,R=v()(O||0).gt(B),I=h.a.has(c,"assets.underlyingToken.symbol")?c.assets.underlyingToken.symbol:null,D=h.a.has(c,"assets.quoteToken")?c.assets.quoteToken:null,P=h.a.has(D,"symbol")&&h.a.has(U,D.symbol)?U[D.symbol]:null,H=h.a.has(c,"assets.tranche".concat(d))?c.assets["tranche".concat(d)]:null,V=h.a.has(H,"symbol")&&h.a.has(U,H.symbol)?U[H.symbol]:null,Y=m===hr.TAKER?this._getTakerEstimatedTradingResult():null,K=E.minutes(),z=h.a.inRange(K,0,30)?j()(E).add(1,"hours").minutes(15).startOf("minute"):j()(E).add(1,"hours").minutes(45).startOf("minute"),G=h.a.has(b,"balance.fundTokens.".concat(o,".token").concat(d))?b.balance.fundTokens[o]["token".concat(d)]:null,q=le(o);return p===pr.BUY?(e=h.a.has(D,"symbol")?D.symbol:"Quote",t=P,n=V):p===pr.SELL&&(e=F[I]+L[d].name,t=V,n=P),h.a.isNil(c)||h.a.isNil(l)?null:Object(ws.jsxs)("div",{className:"order-editor ".concat(p," ").concat(m),children:[!g&&this.Roles(),Object(ws.jsxs)("div",{className:"order-editor--main",ref:function(e){return s.mainNode=e},children:[Object(ws.jsx)("div",{className:"order-editor--inputs",children:Object(ws.jsxs)("div",{className:"order-editor--input-row clearfix",children:[t&&Object(ws.jsx)("img",{src:t}),Object(ws.jsx)("input",{placeholder:"0.0 ".concat(e),disabled:h.a.isNil(c),type:"number",min:0,value:O,onChange:function(e){var t=te(e.target.value);if(p===pr.BUY){if(h.a.isNil(D)||t>D.decimal)return}else if(p===pr.SELL&&(h.a.isNil(H)||t>H.decimal))return;s.setState({amountInput:e.target.value,message:null})}})]})}),Object(ws.jsxs)("div",{className:"order-editor--info-row clearfix",children:[Object(ws.jsxs)("div",{className:"order-editor--info-row--max-value",children:["".concat(p===pr.BUY?"Wallet":"Available",": \n                                ").concat(h.a.isNil(B)?"---":Number(B)>=1e3?v()(B).toFormat(0,1):Number(B)>0?v()(B).toFormat(2,1):"0.0"," \n                                ").concat(e),!h.a.isNil(b.address)&&Object(ws.jsxs)(a.Fragment,{children:[" - ",Object(ws.jsx)("button",{disabled:h.a.isNil(c),onClick:function(){s.setState({amountInput:Number(B)>0?B:"0"})},children:"Max"})]})]}),m===hr.MAKER&&Number(M)>0&&Object(ws.jsx)("div",{className:"order-editor--info-row--right-section",children:"Min: ".concat(M)})]}),p===pr.SELL&&Number(G)>0&&Object(ws.jsxs)("div",{className:"order-editor--staking-link-row",children:["Wallet: ",J({number:G,shouldReturnLocalString:!0,defaultPrecision:2,shouldApplyFloorValue:!0})," - ",Object(ws.jsx)("button",{className:"order-editor--staking-link-row--button",onClick:function(){s.setState({shouldShowStakingModal:!0})},children:"Stake"})," before selling"]}),Object(ws.jsx)("div",{className:"order-editor--arrow",children:Object(ws.jsx)(Rs.c,{})}),Object(ws.jsxs)("div",{className:"order-editor--estimated-receiving",children:[n&&Object(ws.jsx)("img",{src:n}),Object(ws.jsxs)("div",{className:"order-editor--estimated-receiving--body",children:[Object(ws.jsxs)("label",{className:m===hr.TAKER?"has-estimated-amount":null,children:[h.a.isNil(Y)?"":"Est. ".concat(v()(Y.estimatedReceivingAmount).gt(0)?v()(Y.estimatedReceivingAmount).toFixed(2,1):"0.0")," ".concat(p===pr.BUY?(F[I]||"")+L[d].name:h.a.has(D,"symbol")?D.symbol:"")]}),m===hr.TAKER&&Object(ws.jsx)("span",{children:"Based on last NAV ".concat(h.a.isNil(q)?"":v()(q[d]||0).toFixed(4,1))})]})]}),Object(ws.jsx)("hr",{}),Object(ws.jsxs)("div",{className:"order-editor--pd-level",children:[Object(ws.jsxs)("label",{children:["Premium/Discount",Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:["Trades are settled at a Premium/Discount of a future time-weighted average price(TWAP)",Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/tranchess-swap#what-does-it-mean-to-set-a-premium-or-discount-when-i-submit-a-trade-order"},target:"_blank",children:"Learn more"})]})})]}),Object(ws.jsx)(ir,{pdLevel:k,onChange:function(e){x(e)}})]}),Object(ws.jsxs)("div",{className:"order-editor--footer",children:[m===hr.TAKER&&Object(ws.jsx)("div",{className:"order-editor--footer--message"+(w||C||v()(Y.remainingAmountToFill).gt(0)?" warning":""),children:w?Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(Rs.l,{}),"Only Post-only orders can be placed in Advanced mode."]}):C?Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(Rs.l,{}),"No liquidity in the market at given premium/discount. ".concat(p===pr.BUY?"Increase":"Decrease"," premium/discount and try again.")]}):Y&&v()(Y.remainingAmountToFill).gt(0)?Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(Rs.l,{}),"Your order might be partially filled"]}):"Trades are expected to be settled around ".concat(z.isValid()?z.format("HH:mm"):"")}),m===hr.MAKER&&Object(ws.jsx)("div",{className:"order-editor--footer--message"+(T?" warning":""),children:T?Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(Rs.l,{}),"Post-only ".concat(h.a.lowerCase(p)," orders are not allowed crossing ").concat(p===pr.BUY?"asks":"bids",". ").concat(p===pr.BUY?"Decrease":"Increase"," premium/discount and try again.")]}):"Post-only orders enter the order book, rather than executed immediately"}),h.a.isNil(b.address)?Object(ws.jsx)("button",{className:"order-editor--footer--button button-style-5",onClick:function(){i(_e(!0))},children:"Connect wallet"}):p===pr.BUY?Object(ws.jsx)(sr,{className:"order-editor--footer--button button-style-5 ".concat(p),tokenDisplayName:e||"Quote",tokenAddress:h.a.has(D,"address")?D.address:null,spenderAddress:h.a.has(c,"exchangeAddress")?c.exchangeAddress:null,allowanceAmount:h.a.has(b,"allowance.fundTokens.".concat(o,".exchange.quoteToken"))?b.allowance.fundTokens[o].exchange.quoteToken:null,amountToSpend:h.a.toString(O),fetchAllowanceDisabled:!0,signTransactionLabel:m===hr.TAKER&&w?"Market is inactive":xa(b.providerNetwork)?m===hr.MAKER&&h.a.toString(O).length>0&&v()(O||0).lt(M||0)?"Amount smaller than minimum":R?"Insufficient ".concat(e," balance"):"Place order":"Wrong network",signTransactionDisabled:m===hr.TAKER&&w||k<1||k>W||C||T||m===hr.TAKER&&Number(O)<=0||m===hr.MAKER&&Number(O)<M||h.a.isNil(c)||!xa(b.providerNetwork)||R,onClickSignTransaction:function(){s.handleClickPlaceOrderButton()}}):Object(ws.jsx)("button",{className:"order-editor--footer--button button-style-5 ".concat(p),disabled:m===hr.TAKER&&w||k<1||k>W||C||T||m===hr.TAKER&&Number(O)<=0||m===hr.MAKER&&Number(O)<M||h.a.isNil(c)||!xa(b.providerNetwork)||R,onClick:function(){s.handleClickPlaceOrderButton()},children:m===hr.TAKER&&w?"Market is inactive":xa(b.providerNetwork)?m===hr.MAKER&&h.a.toString(O).length>0&&Number(O)<M?"Amount smaller than minimum":R?"Insufficient ".concat(e," balance"):"Place order":"Wrong network"})]})]}),A&&Object(ws.jsx)(mr,{fundAddress:o,tranche:d,direction:cr.DEPOSIT.key,onClickClose:function(){s.setState({shouldShowStakingModal:!1})}})]})}}]),n}(a.Component);var vr=Object(o.c)((function(e,t){var n=t.fundAddress,a=e.fund.items[n],s=e.fund.historyNAVs[n],r=h.a.has(a,"exchangeAddress")&&h.a.has(e.exchange.items,a.exchangeAddress)?e.exchange.items[a.exchangeAddress]:null,i=h.a.has(a,"exchangeAddress")&&h.a.has(e.exchange.account.items,a.exchangeAddress)?e.exchange.account.items[a.exchangeAddress]:null;return{provider:e.provider,wallet:e.wallet,fundItem:a,fundHistoryNAV:s,exchangeItem:r,exchangeAccountItem:i}}))(fr),gr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={editingOptions:[],shouldShowOptions:!1},a.handleClickWindow=a.handleClickWindow.bind(Object(Ms.a)(a)),a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleClickWindow)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClickWindow)}},{key:"handleClickWindow",value:function(){var e=this,t=this.props.onToggleOptions;this.state.shouldShowOptions&&this.setState({shouldShowOptions:!1},(function(){t(e.state.shouldShowOptions)}))}},{key:"Trigger",value:function(){var e=this,t=this.props,n=t.label,a=t.selectedOptions,s=t.onToggleOptions,r=this.state.shouldShowOptions;return Object(ws.jsxs)("div",{className:"option-filter--trigger",onClick:function(){e.setState({shouldShowOptions:!r,editingOptions:a},(function(){s(e.state.shouldShowOptions)}))},children:[Object(ws.jsx)("label",{children:n}),r?Object(ws.jsx)(Rs.f,{}):Object(ws.jsx)(Rs.e,{})]})}},{key:"Options",value:function(){var e=this,t=this.props,n=t.options,a=t.optionNames,s=t.onClickConfirm,r=t.onToggleOptions,i=this.state.editingOptions;return Object(ws.jsxs)("div",{className:"option-filter--options",children:[n.map((function(t,n){var s=i.includes(t);return Object(ws.jsxs)("div",{className:"option-filter--item",onClick:function(){var n=!s;e.setState({editingOptions:n?h.a.union(i,[t]):h.a.without(i,t)})},children:[Object(ws.jsx)("label",{children:a[t]||t}),s&&Object(ws.jsx)(Qs.a,{})]},n)})),Object(ws.jsx)("button",{className:"option-filter--confirm-button",disabled:h.a.isEmpty(i),onClick:function(){e.setState({shouldShowOptions:!1},(function(){r(e.state.shouldShowOptions)})),s(i)},children:"CONFIRM"})]})}},{key:"render",value:function(){var e=this.state.shouldShowOptions;return Object(ws.jsxs)("div",{className:"option-filter",onClick:function(e){e.stopPropagation()},children:[this.Trigger(),e&&Object(ws.jsx)("div",{className:"option-filter--options-wrapper",children:this.Options()}),e&&Object(ws.jsx)(Fs.a,{overlayClassName:"fund-rebalance-modal--options-modal--overlay",className:"option-filter--options-modal",isOpen:!0,children:this.Options()})]})}}]),n}(a.Component);gr.defaultProps={options:[],selectedOptions:[],optionNames:{},onClickConfirm:function(){},onToggleOptions:function(){}};var jr=n(175),kr=Ee.a.utils.formatUnits,xr={contract:new Ee.a.Contract("0xdCF0BfFf2d6b542b55840621fb560d43D0a35EBa",["function settleTrades(address[] exchanges, uint256[] encodedEpochs, address account) returns (\n        uint256[] totalTokenAmounts,\n        uint256 totalQuoteAmount\n    )","function batchClaim(address[] contracts, address account)","function batchClaimRewards(address[] exchanges, address account)"],Object(jr.getDefaultProvider)()),getAdjustedGasLimit:function(e){return Math.floor(1.05*e.toNumber()+6e4)},settleTrades:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p,b,f,g,j;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.exchanges,a=void 0===n?[]:n,s=t.encodedEpochs,r=void 0===s?[]:s,i=t.account,o=void 0===i?"":i,c=t.shouldCallStatic,l=void 0!==c&&c,e.next=3,rt();case 3:if(u=e.sent,d=u.getSigner(),m=this.contract.connect(d),!l){e.next=16;break}return e.next=9,m.callStatic.settleTrades(a,r,o);case 9:return p=e.sent,b=p.totalTokenAmounts,f=p.totalQuoteAmount,g={exchanges:{},quoteToken:kr(f)},h.a.forEach(b,(function(e,t){var n=Math.floor(t/3),s=t%3,r=a[n],i=0===s?"M":1===s?"A":"B";h.a.has(g.exchanges,r)||(g.exchanges[r]={exchangeAddress:r,M:null,A:null,B:null}),g.exchanges[r][i]=v()(g.exchanges[r][i]||0).plus(kr(e)).toString()})),e.abrupt("return",g);case 16:return e.next=18,m.estimateGas.settleTrades(a,r,o);case 18:return j=e.sent,e.next=21,m.settleTrades(a,r,o,{gasLimit:this.getAdjustedGasLimit(j)});case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),batchClaim:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contracts,a=void 0===n?[]:n,s=t.account,r=void 0===s?"":s,e.next=3,rt();case 3:return i=e.sent,o=i.getSigner(),c=this.contract.connect(o),e.next=8,c.estimateGas.batchClaim(a,r);case 8:return l=e.sent,e.next=11,c.batchClaim(a,r,{gasLimit:this.getAdjustedGasLimit(l)});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),batchClaimRewards:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.exchanges,a=void 0===n?[]:n,s=t.account,r=void 0===s?"":s,e.next=3,rt();case 3:return i=e.sent,o=i.getSigner(),c=this.contract.connect(o),e.next=8,c.estimateGas.batchClaimRewards(a,r);case 8:return l=e.sent,e.next=11,c.batchClaimRewards(a,r,{gasLimit:this.getAdjustedGasLimit(l)});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},yr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={batchSettleResult:null},a._mounted=!1,a.polling=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,this._getData(),this.polling=setInterval((function(){e._getData()}),1e4)}},{key:"componentDidUpdate",value:function(e){var t=e.unsettledTrades,n=this.props.unsettledTrades;h.a.isEqual(t,n)||this._getData()}},{key:"componentWillUnmount",value:function(){this._mounted=!1,this.polling&&window.clearInterval(this.polling)}},{key:"_getClaimableEpochs",value:function(){return function(e){for(var t=h.a.filter(e,(function(e){return!e.isClaimed&&!h.a.isEmpty(e.claimableAssets)})),n=h.a.filter(t,(function(e){return"maker"===e.side})).map((function(e){return e.epoch})).sort(),a=h.a.filter(t,(function(e){return"taker"===e.side})).map((function(e){return e.epoch})).sort();h.a.size(n)+h.a.size(a)>50;)h.a.isEmpty(a)?n.pop():h.a.isEmpty(n)||h.a.last(a)>=h.a.last(n)?a.pop():n.pop();return{makerEpochs:n,takerEpochs:a}}(this.props.unsettledTrades)}},{key:"_getTotalClaimableTokens",value:function(){var e=this.props.unsettledTrades,t=h.a.filter(e,(function(e){return!e.isClaimed&&!h.a.isEmpty(e.claimableAssets)})),n=function(){return{exchanges:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},quoteToken:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}}({});return t.forEach((function(e){var t=e.contract;h.a.has(n.exchanges,t)||(n.exchanges[t]=function(e){var t=e.exchangeAddress,n=void 0===t?"":t,a=e.M,s=void 0===a?"":a,r=e.A,i=void 0===r?"":r,o=e.B;return{exchangeAddress:n,M:s,A:i,B:void 0===o?"":o}}({exchangeAddress:t})),h.a.forEach(h.a.keys(L),(function(a){n.exchanges[t][a]=v()(n.exchanges[t][a]||0).plus(e.claimableAssets[a]||0).toString()})),n.quoteToken=v()(n.quoteToken||0).plus(e.claimableAssets.quoteToken||0).toString()})),n}},{key:"_getTradesToSettle",value:function(e){var t=h.a.filter(e,(function(e){var t=e.claimableAssets;return!e.isClaimed&&!h.a.isEmpty(t)&&h.a.some(Object.values(t),(function(e){return v()(e||0).gt(0)}))})),n=h.a.take(h.a.sortBy(t,(function(e){return e.epoch})),50),a={exchanges:[],encodedEpochs:[],seivedUnsettledTrades:n};return h.a.forEach(n,(function(e){var t=e.contract,n=e.epoch,s=e.side;h.a.includes(a.exchanges,t)||a.exchanges.push(t);var r=h.a.indexOf(a.exchanges,t);if(r>=0){var i=v()(r.toString(2),2).shiftedBy(224),o=v()("taker"===s?1:0,2).shiftedBy(192),c=v()(i,2).plus(o,2).plus(v()(n).toString(2),2).toString();a.encodedEpochs.push(c)}})),a}},{key:"_cannotClaimAllAssets",value:function(){var e=this.state.batchSettleResult,t=this._getTotalClaimableTokens(),n=!1;return h.a.isNil(e)||(n=v()(t.quoteToken||0).gt(e.quoteToken||0)||h.a.some(t.exchanges,(function(t,n){return!h.a.has(e,"exchanges.".concat(n))||h.a.some(h.a.keys(L),(function(a){return v()(t[a]||0).gt(e.exchanges[n][a]||0)}))}))),n}},{key:"_getData",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.wallet,a=t.unsettledTrades,s=this._getTradesToSettle(a),h.a.isEmpty(n.address)||h.a.isEmpty(s.encodedEpochs)||!this._mounted){e.next=13;break}return e.prev=3,e.next=6,xr.settleTrades({exchanges:s.exchanges,encodedEpochs:s.encodedEpochs,account:n.address,shouldCallStatic:!0});case 6:r=e.sent,this.setState({batchSettleResult:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("ExchangeClaimablesOverview _getData error",e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleClickClaimButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,c,l;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,a=t.wallet,s=t.unsettledTrades,r=t.onSendClaimTransaction,i=this._getTradesToSettle(s),h.a.isEmpty(a.address)||h.a.isEmpty(i.encodedEpochs)){e.next=21;break}return e.prev=3,e.next=6,xr.settleTrades({exchanges:i.exchanges,encodedEpochs:i.encodedEpochs,account:a.address});case 6:if(c=e.sent,!h.a.has(c,"hash")){e.next=13;break}Object(o.b)((function(){h.a.forEach(i.seivedUnsettledTrades,(function(e){var t=be(e);n(wn(t,{isClaiming:!0}))}))})),n(Ba({transactionResponse:c,title:"Claim settled trades"})).then((function(e){Object(o.b)((function(){h.a.forEach(i.seivedUnsettledTrades,(function(t){var a=be(t);n(wn(a,{isClaiming:!1,isClaimed:1===e.status}))}))}))})).catch((function(e){throw h.a.forEach(i.seivedUnsettledTrades,(function(e){var t=be(e);n(wn(t,{isClaiming:!1}))})),e})),r(),e.next=14;break;case 13:throw new Error("Cannot parse transaction's hash");case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(3),l=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:l}))),console.error("ExchangeClaimablesOverview handleClickClaimButton Error: ",e.t0);case 21:case"end":return e.stop()}}),e,this,[[3,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.fundItems,a=t.wallet,s=t.unsettledTrades,r=this.state.batchSettleResult,i=this._getTotalClaimableTokens(),o=i.quoteToken,c=this._cannotClaimAllAssets(),l=h.a.some(s,(function(e){return!h.a.isEmpty(e.claimableAssets)&&e.isClaiming})),u=!h.a.isNil(r)&&(v()(r.quoteToken||0).gt(0)||h.a.some(r.exchanges,(function(e){return v()(e.M||0).gt(0)||v()(e.A||0).gt(0)||v()(e.B||0).gt(0)})));return Object(ws.jsxs)("div",{className:"exchange-claimables-overview",children:[Object(ws.jsx)("div",{className:"exchange-claimables-overview--title",children:"Settled trade assets"}),Object(ws.jsxs)("div",{className:"exchange-claimables-overview--main",children:[h.a.map(n,(function(e,t){var n=e.exchangeAddress,a=h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:null,s=F[a]||"";return h.a.map(h.a.keys(L),(function(a){var r=h.a.has(i,"exchanges.".concat(n,".").concat(a))?i.exchanges[n][a]:null,o=h.a.has(e,"assets.tranche".concat(a,".symbol"))?e.assets["tranche".concat(a)].symbol:null;return Object(ws.jsxs)("div",{className:"exchange-claimables-overview--item"+(v()(r||0).eq(0)?" nil":""),children:[Object(ws.jsx)("img",{src:U[o]||L[a].icon}),v()(r||0).gt(0)?J({number:r,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"," ".concat(s).concat(L[a].name)]},"".concat(t,"--").concat(a))}))})),Object(ws.jsxs)("div",{className:"exchange-claimables-overview--item"+(v()(o||0).eq(0)?" nil":""),children:[Object(ws.jsx)("img",{src:U.USDC}),v()(o||0).gt(0)?J({number:o,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"," USDC"]},"quote")]}),c&&Object(ws.jsx)("div",{className:"exchange-claimables-overview--message",children:"You have more than ".concat(50," unclaimed epochs. You might need to claim more than once.")}),Object(ws.jsx)("div",{className:"exchange-claimables-overview--footer",children:"Claimed Tranchess tokens (QUEEN, BISHOP and ROOK) are staked automatically, while claimed USDC tokens are sent to your wallet."}),Object(ws.jsxs)("div",{className:"exchange-claimables-overview--buttons",children:[Object(ws.jsx)("button",{className:"button-style-5",disabled:!xa(a.providerNetwork)||l||!u,onClick:function(){e.handleClickClaimButton()},children:xa(a.providerNetwork)?l?"Claming":"Claim":"Wrong network"}),Object(ws.jsx)(ks.b,{to:"/swap#filled",children:Object(ws.jsx)("button",{className:"exchange-claimables-overview--exchange-link button-style-7 hidden",children:"View filled trades"})})]})]})}}]),n}(a.Component);yr.defaultProps={onSendClaimTransaction:function(){}};var Or=Object(o.c)((function(e){return{wallet:e.wallet,fundItems:e.fund.items,unsettledTrades:e.exchange.account.unsettledTrades}}))(yr),Ar=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClickClose,n=e.onSendClaimTransaction;return Object(ws.jsx)(Fs.a,{overlayClassName:"exchange-batch-claim-modal--overlay",className:"exchange-batch-claim-modal",isOpen:!0,children:Object(ws.jsxs)("div",{className:"exchange-batch-claim-modal--main centered",children:[Object(ws.jsx)("button",{className:"exchange-batch-claim-modal--close-button",onClick:function(){t()},children:Object(ws.jsx)(Rs.p,{})}),Object(ws.jsx)("div",{className:"exchange-batch-claim-modal--body",children:Object(ws.jsx)(Or,{onSendClaimTransaction:function(){n()}})})]})})}}]),n}(a.Component);Ar.defaultProps={onClickClose:function(){},onSendClaimTransaction:function(){}};var Nr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"Item",value:function(e){var t=e.icon,n=e.symbol,a=e.amount,s=e.defaultPrecision,r=this.props,i=r.shouldShowSymbolName,o=r.symbolPostfix;return Object(ws.jsxs)("div",{className:"asset-list--item",title:n,children:[t&&Object(ws.jsx)("img",{src:t}),J({number:a,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:s||4}),i&&Object(ws.jsx)("span",{children:" ".concat(n)}),o&&Object(ws.jsx)("span",{children:" ".concat(o)})]})}},{key:"render",value:function(){var e=this.props,t=e.fundItems,n=e.fundAddress,a=e.tokenMAmount,s=e.tokenAAmount,r=e.tokenBAmount,i=e.underlyingAmount,o=e.quoteAmount,c=t[n],l=h.a.has(c,"assets.underlyingToken.symbol")?c.assets.underlyingToken.symbol:null,u=h.a.has(c,"assets.trancheM.symbol")?c.assets.trancheM.symbol:null,d=h.a.has(c,"assets.trancheA.symbol")?c.assets.trancheA.symbol:null,m=h.a.has(c,"assets.trancheB.symbol")?c.assets.trancheB.symbol:null,p=h.a.has(c,"assets.quoteToken.symbol")?c.assets.quoteToken.symbol:null;return Object(ws.jsxs)("div",{className:"asset-list",children:[Number(a)>0&&this.Item({icon:U[u]||L.M.icon,symbol:"QUEEN",amount:a,defaultPrecision:2}),Number(s)>0&&this.Item({icon:U[d]||L.A.icon,symbol:"BISHOP",amount:s,defaultPrecision:2}),Number(r)>0&&this.Item({icon:U[m]||L.B.icon,symbol:"ROOK",amount:r,defaultPrecision:2}),Number(i)>0&&this.Item({icon:U[l],symbol:l||"Underlying",amount:i,defaultPrecision:4}),Number(o)>0&&this.Item({icon:U[p],symbol:p||"Quote",amount:o,defaultPrecision:2})]})}}]),n}(a.Component);var wr=Object(o.c)((function(e){return{fundItems:e.fund.items}}))(Nr),Sr=Ee.a.utils.formatUnits,Cr={UNSETTLED:"UNSETTLED",SETTLED:"SETTLED",CLAIMED:"CLAIMED"},Tr=function(e){var t=e.side,n=void 0===t?"BUY":t,a=e.tranche,s=void 0===a?"M":a,r=e.amount,i=void 0===r?0:r,o=e.avgPrice;return{side:n,tranche:s,amount:i,avgPrice:void 0===o?null:o}},Er=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={filteredStatus:h.a.values(Cr),pagination:{pageIndex:1,pageSize:15},shouldTableOverflowVisible:!1,shouldShowBatchClaimModel:!1},a._mounted=!1,a.polling=null,a.tradeSettlementNode=null,a.fetchingDataId=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,this._getData(),this.polling=setInterval((function(){1===e.state.pagination.pageIndex&&e._getData()}),1e4)}},{key:"componentDidUpdate",value:function(e){var t=e.wallet,n=this.props.wallet;h.a.isEqual(t.address,n.address)||(this._clearEvents(),this._getData())}},{key:"componentWillUnmount",value:function(){this._mounted=!1;var e=this.state.pagination;this.polling&&window.clearInterval(this.polling),e.pageIndex>1&&this._clearEvents()}},{key:"_clearEvents",value:function(){(0,this.props.dispatch)(Sn(0)),this.setState({pagination:{pageIndex:1,pageSize:15}})}},{key:"_getData",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.wallet,s=this.state,r=s.pagination,i=s.filteredStatus,o=r.pageIndex,c=r.pageSize;if(!h.a.isNil(a.address)&&i.includes(Cr.CLAIMED)){var l=Object(De.a)();this.fetchingDataId=l,n(xn({tranche:"",event:"TakerSettled,MakerSettled",pageIndex:o,pageSize:c})).then((function(t){if(t&&e.fetchingDataId===l){var a=t.count,s=t.events;n(Sn(a,s))}})).catch((function(e){console.error("TradeSettelement _getData Error: ",e)}))}}},{key:"_getUnsettledTradeStatus",value:function(e){var t=e.claimableAssets,n=e.isClaimed;return h.a.isEmpty(t)?Cr.UNSETTLED:n?Cr.CLAIMED:Cr.SETTLED}},{key:"_getBuyTradeAvgPrice",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=n.frozenQuote,r=n.effectiveQuote,i=n.reservedBase,o=v()(i).times(a).decimalPlaces(18,1);return v()(r).lt(o)?(e=s,t=v()(r).div(a).decimalPlaces(18,1)):(e=v()(s).times(o).div(r).decimalPlaces(18,1),t=i),v()(e).div(t).toFixed(4)}},{key:"_getSellTradeAvgPrice",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=n.frozenBase,r=n.effectiveBase,i=n.reservedQuote,o=v()(r).times(a).decimalPlaces(18,1);return v()(o).lt(i)?(e=o,t=s):(e=i,t=v()(s).times(i).div(o).decimalPlaces(18,1)),v()(e).div(t).toFixed(4)}},{key:"_getFilteredTradeDetail",value:function(e){var t=this,n=this.props,a=n.provider,s=n.fundItems,r=n.fundHistoryNAVs,i=n.exchangeItems,o=e.contract,c=e.epoch,l=e.detail,u=e.side,d=i[o]||{},m=s[d.fundAddress],p=r[d.fundAddress],b=[];if(!h.a.isEmpty(l)&&h.a.has(m,"summary.currentDay")&&!h.a.isEmpty(p)&&!h.a.isNil(a.blockTimestamp)){var f=j.a.min(j()(m.summary.currentDay).add(-1,"second"),j()(a.blockTimestamp).add(-15,"minutes")).toISOString(),v=j.a.unix(c).add(30,"minutes").unix(),g=j.a.unix(v).isBefore(f)?h.a.find(p.M30,(function(e){return j()(e.timestamp).unix()===v}))||p.epochItems[v]:null;h.a.forEach(l,(function(e,n){"taker"===u?(Number(e.takerBuy.frozenQuote)>0&&b.push(Tr({side:"BUY",tranche:n,amount:e.takerBuy.frozenQuote,avgPrice:!h.a.isNil(g)&&h.a.isString(g[n])?t._getBuyTradeAvgPrice(e.takerBuy,g[n]):null})),Number(e.takerSell.frozenBase)>0&&b.push(Tr({side:"SELL",tranche:n,amount:e.takerSell.frozenBase,avgPrice:!h.a.isNil(g)&&h.a.isString(g[n])?t._getSellTradeAvgPrice(e.takerSell,g[n]):null}))):"maker"===u&&(Number(e.makerBuy.reservedQuote)>0&&b.push(Tr({side:"BUY",tranche:n,amount:e.makerBuy.reservedQuote,avgPrice:!h.a.isNil(g)&&h.a.isString(g[n])?t._getSellTradeAvgPrice(e.makerBuy,g[n]):null})),Number(e.makerSell.reservedBase)>0&&b.push(Tr({side:"SELL",tranche:n,amount:e.makerSell.reservedBase,avgPrice:!h.a.isNil(g)&&h.a.isString(g[n])?t._getBuyTradeAvgPrice(e.makerSell,g[n]):null})))}))}return b}},{key:"render",value:function(){var e=this,t=this.props,n=t.fundItems,s=t.exchangeItems,r=t.unsettledTrades,i=t.claimEvent,o=this.state,c=o.filteredStatus,l=o.shouldTableOverflowVisible,u=o.pagination,d=o.shouldShowBatchClaimModel,m=i.count,p=i.items,f=h.a.map(p,(function(e){return fe(e)})),v=h.a.filter(r,(function(t,n){var a=e._getUnsettledTradeStatus(t);return!f.includes(n)&&(a===Cr.UNSETTLED?c.includes(Cr.UNSETTLED):a===Cr.SETTLED?c.includes(Cr.SETTLED):a===Cr.CLAIMED&&c.includes(Cr.CLAIMED))})),g=h.a.sortBy(v,(function(e){return e.isClaimed?1:0})),k=h.a.some(g,(function(e){return e.isClaiming&&!e.isClaimed})),x=h.a.filter(g,(function(e){return!h.a.isEmpty(e.claimableAssets)&&!e.isClaiming&&!e.isClaimed}));return Object(ws.jsxs)("div",{className:"trade-settlement",style:l?{overflow:"visible"}:{},ref:function(t){return e.tradeSettlementNode=t},children:[Object(ws.jsxs)("table",{children:[Object(ws.jsx)("thead",{children:Object(ws.jsxs)("tr",{children:[Object(ws.jsxs)("th",{className:"epoch",children:["Epoch",Object(ws.jsx)(Is,{contentComponent:"Tranchess defines each 30-minute window as one Epoch"})]}),Object(ws.jsx)("th",{children:"Type"}),Object(ws.jsx)("th",{children:"Trade"}),Object(ws.jsx)("th",{children:"Quantity"}),Object(ws.jsx)("th",{className:"center-align",children:"Avg Price (USDC)"}),Object(ws.jsx)("th",{children:"Claimable"}),Object(ws.jsx)("th",{className:"status",children:Object(ws.jsx)(gr,{label:"Status",options:h.a.values(Cr),selectedOptions:c,onToggleOptions:function(t){e.setState({shouldTableOverflowVisible:t})},onClickConfirm:function(t){e.setState({filteredStatus:t,pagination:b.a.set(u,"pageIndex",1)},(function(){e.state.filteredStatus.includes(Cr.CLAIMED)&&e._getData()}))}})}),Object(ws.jsx)("th",{className:"actions",children:k?"Claiming":Object(ws.jsx)("button",{className:"trade-settlement--claim-all-button button-style-5",disabled:h.a.isEmpty(x),onClick:function(){e.setState({shouldShowBatchClaimModel:!0})},children:"Claim assets"})})]})}),Object(ws.jsxs)("tbody",{children:[1===u.pageIndex&&h.a.map(g,(function(t,a){var r=t.contract,i=t.epoch,o=t.side,c=t.claimableAssets,l=t.isClaiming,u=t.isClaimed,d=s[r]||{},m=n[d.fundAddress],p=h.a.has(m,"assets.underlyingToken.symbol")?m.assets.underlyingToken.symbol:null,b=F[p]||"",f=e._getFilteredTradeDetail(t),v=e._getUnsettledTradeStatus(t);return Object(ws.jsxs)("tr",{className:"trade-settlement--item",children:[Object(ws.jsx)("td",{children:j.a.unix(i).format("D MMM, HH:mm")}),Object(ws.jsx)("td",{className:"trade-settlement--item--type ".concat(o),children:"maker"===o?"Post-only":"Standard"}),Object(ws.jsx)("td",{children:Object(ws.jsx)("div",{className:"trade-settlement--item--trades",children:h.a.map(f,(function(e,t){var n=e.side,a=e.tranche;return Object(ws.jsxs)("div",{className:"trade-settlement--item--trades--item",children:[Object(ws.jsx)("span",{className:"trade-settlement--item--trades--item--side ".concat(n),children:h.a.lowerCase(n)}),b,L[a].name]},t)}))})}),Object(ws.jsx)("td",{children:Object(ws.jsx)("div",{className:"trade-settlement--item--amounts",children:h.a.map(f,(function(e,t){var n=e.side,a=e.tranche,s=e.amount;return Object(ws.jsx)("div",{className:"trade-settlement--item--amounts--item",children:Object(ws.jsx)(wr,{fundAddress:d.fundAddress,tokenMAmount:"SELL"===n&&"M"===a?s:null,tokenAAmount:"SELL"===n&&"A"===a?s:null,tokenBAmount:"SELL"===n&&"B"===a?s:null,quoteAmount:"BUY"===n?s:null})},t)}))})}),Object(ws.jsx)("td",{className:"center-align",children:Object(ws.jsx)("div",{className:"trade-settlement--item--prices",children:h.a.map(f,(function(e,t){var n=e.avgPrice;return Object(ws.jsx)("div",{className:"trade-settlement--item--prices--item",children:n},t)}))})}),Object(ws.jsx)("td",{children:Object(ws.jsx)(wr,{fundAddress:d.fundAddress,tokenMAmount:c.M,tokenAAmount:c.A,tokenBAmount:c.B,quoteAmount:c.quoteToken})}),Object(ws.jsx)("td",{children:Object(ws.jsx)("span",{className:"trade-settlement--status ".concat(h.a.lowerCase(v)),children:v})}),Object(ws.jsx)("td",{children:l?Object(ws.jsx)("span",{className:"trade-settlement--claiming",children:"Claiming"}):u?"":h.a.isEmpty(c)?Object(ws.jsx)("span",{className:"trade-settlement--settlement-time",children:"To be settled at ".concat(j.a.unix(i).add(45,"minutes").format("HH:mm"))}):Object(ws.jsx)("span",{className:"trade-settlement--claimable-message",children:"Please claim your assets"})})]},a)})),c.includes(Cr.CLAIMED)&&h.a.map(p,(function(e,t){var r=e.contract,i=e.args,o=e.transactionHash,c=e.event,l=e.blockTimestamp,u=s[r]||{},d=n[u.fundAddress],m=h.a.has(d,"assets.underlyingToken.symbol")?d.assets.underlyingToken.symbol:null,p=F[m]||"";if(i&&o&&c&&h.a.isObject(i.trade_detail)){var b=i.epoch,f=i.amountM,v=i.amountA,g=i.amountB,k=i.quoteAmount,x=i.trade_detail,y=["M","A","B"];return Object(ws.jsxs)("tr",{className:"trade-settlement--item",children:[Object(ws.jsx)("td",{children:j.a.unix(b).format("D MMM, HH:mm")}),Object(ws.jsx)("td",{className:"trade-settlement--item--type ".concat("MakerSettled"===c?"maker":"taker"),children:"MakerSettled"===c?"Post-only":"Standard"}),Object(ws.jsx)("td",{children:Object(ws.jsx)("div",{className:"trade-settlement--item--trades",children:h.a.map(y,(function(e){var t=x[e];if(!h.a.isNil(t)){var n=t.buy_price,s=t.sell_price;if(n||s)return Object(ws.jsxs)(a.Fragment,{children:[n&&Object(ws.jsxs)("div",{className:"trade-settlement--item--trades--item",children:[Object(ws.jsx)("span",{className:"trade-settlement--item--trades--item--side BUY",children:"Buy"}),p,L[e].name]}),s&&Object(ws.jsxs)("div",{className:"trade-settlement--item--trades--item",children:[Object(ws.jsx)("span",{className:"trade-settlement--item--trades--item--side SELL",children:"Sell"}),p,L[e].name]})]},e)}}))})}),Object(ws.jsx)("td",{children:Object(ws.jsx)("div",{className:"trade-settlement--item--amounts",children:h.a.map(y,(function(e){var t=x[e];if(!h.a.isNil(t)){var n=t.origin_buy,s=t.origin_sell;if(n||s)return Object(ws.jsxs)(a.Fragment,{children:[n&&Object(ws.jsx)("div",{className:"trade-settlement--item--amounts--item",children:Object(ws.jsx)(wr,{fundAddress:u.fundAddress,quoteAmount:Sr(n)})}),s&&Object(ws.jsx)("div",{className:"trade-settlement--item--amounts--item",children:Object(ws.jsx)(wr,{fundAddress:u.fundAddress,tokenMAmount:"M"===e?Sr(s):null,tokenAAmount:"A"===e?Sr(s):null,tokenBAmount:"B"===e?Sr(s):null})})]},e)}}))})}),Object(ws.jsx)("td",{className:"center-align",children:Object(ws.jsx)("div",{className:"trade-settlement--item--prices",children:h.a.map(y,(function(e){var t=x[e];if(!h.a.isNil(t)){var n=t.buy_price,s=t.sell_price;if(n||s)return Object(ws.jsxs)(a.Fragment,{children:[n&&Object(ws.jsx)("div",{className:"trade-settlement--item--prices--item",children:Number(Sr(n)).toFixed(4)}),s&&Object(ws.jsx)("div",{className:"trade-settlement--item--trades--item",children:Number(Sr(s)).toFixed(4)})]},e)}}))})}),Object(ws.jsx)("td",{children:Object(ws.jsx)(wr,{fundAddress:u.fundAddress,tokenMAmount:Sr(f),tokenAAmount:Sr(v),tokenBAmount:Sr(g),quoteAmount:Sr(k)})}),Object(ws.jsx)("td",{children:Object(ws.jsx)("span",{className:"trade-settlement--status claimed",children:"CLAIMED"})}),Object(ws.jsx)("td",{children:Object(ws.jsx)("span",{className:"trade-settlement--claim-time",children:"Claimed on ".concat(j.a.unix(l).format("D MMM, HH:mm"))})})]},"".concat(o,"--").concat(t))}}))]})]}),c.includes(Cr.CLAIMED)&&Object(ws.jsx)(Xs,{pageSize:u.pageSize,pageIndex:u.pageIndex,totalSize:m,onChangePageIndex:function(t){e.setState((function(e){return{pagination:b.a.set(e.pagination,"pageIndex",t)}}),(function(){e.tradeSettlementNode&&e.tradeSettlementNode.scrollIntoView({behavior:"smooth"}),e._getData()}))}}),d&&Object(ws.jsx)(Ar,{onClickClose:function(){e.setState({shouldShowBatchClaimModel:!1})},onSendClaimTransaction:function(){e.setState({shouldShowBatchClaimModel:!1})}})]})}}]),n}(a.Component);var Mr=Object(o.c)((function(e){return{provider:e.provider,wallet:e.wallet,fundItems:e.fund.items,fundHistoryNAVs:e.fund.historyNAVs,exchangeItems:e.exchange.items,unsettledTrades:e.exchange.account.unsettledTrades,claimEvent:e.exchange.account.claimEvent}}))(Er),Br=function(e){return{key:e.key,name:e.name,side:e.side,tranche:e.tranche}},Rr={BID_QUEEN:Br({key:"BID_QUEEN",name:"Buy QUEEN",side:"Bid",tranche:"M"}),ASK_QUEEN:Br({key:"ASK_QUEEN",name:"Sell QUEEN",side:"Ask",tranche:"M"}),BID_BISHOP:Br({key:"BID_BISHOP",name:"Buy BISHOP",side:"Bid",tranche:"A"}),ASK_BISHOP:Br({key:"ASK_BISHOP",name:"Sell BISHOP",side:"Ask",tranche:"A"}),BID_ROOK:Br({key:"BID_ROOK",name:"Buy ROOK",side:"Bid",tranche:"B"}),ASK_ROOK:Br({key:"ASK_ROOK",name:"Sell ROOK",side:"Ask",tranche:"B"})},Ir=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={filteredOrderTypes:h.a.keys(Rr),shouldTableOverflowVisible:!1},a._mounted=!1,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"handleClickCancelButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p,b,f,v,g,j,k;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,a=n.dispatch,s=n.fundItems,r=n.exchangeItems,i=t.contract,o=t.version,c=t.side,l=t.pd_level,u=t.tranche,d=t.index,m=pe(t),p=r[i],b=h.a.has(p,"fundAddress")?s[p.fundAddress]:null,f=h.a.isNil(b)?null:Jt(b.fundAddress),!h.a.isNil(f)){e.next=10;break}console.error("PendingOrderTable handleClickCancelButton Error: Fund contract is missing"),e.next=36;break;case 10:if(v=h.a.has(b,"assets.underlyingToken.symbol")?b.assets.underlyingToken.symbol:null,e.prev=11,g={version:parseInt(o),tranche:L[u].value,pdLevel:l,index:d},"BID"!==h.a.toUpper(c)){e.next=19;break}return e.next=16,f.exchange.cancelBid(g);case 16:j=e.sent,e.next=23;break;case 19:if("ASK"!==h.a.toUpper(c)){e.next=23;break}return e.next=22,f.exchange.cancelAsk(g);case 22:j=e.sent;case 23:if(!h.a.has(j,"hash")){e.next=28;break}a(Nn(m,{isCancelling:!0})),a(Ba({transactionResponse:j,title:"Cancel ".concat("Bid"===c?"BUY":"Ask"===c?"SELL":""," ").concat(F[v]||"").concat(L[u].name," order @ ").concat((he(l)/100).toFixed(2),"%")})).then((function(e){a(Nn(m,{isCancelling:!1,isCancelled:1===e.status})),setTimeout((function(){a(jn())}),2e3)})).catch((function(e){throw a(Nn(m,{isCancelling:!1})),e})),e.next=29;break;case 28:throw new Error("Cannot parse transaction's hash");case 29:e.next=36;break;case 31:e.prev=31,e.t0=e.catch(11),k=$(e.t0),a(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:k}))),console.error("PendingOrderTable handleClickCancelButton Error: ",e.t0);case 36:case"end":return e.stop()}}),e,this,[[11,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.wallet,s=t.fundItems,r=t.exchangeItems,i=t.pendingOrders,o=this.state,c=o.filteredOrderTypes,l=o.shouldTableOverflowVisible,u=h.a.filter(i,(function(e){var t=e.side,n=e.tranche,a=e.isCancelled;return h.a.some(c,(function(e){var a=Rr[e];return a.side===t&&a.tranche===n}))&&!a})),d=h.a.sortBy(u,(function(e){return-e.place_timestamp}));return Object(ws.jsx)("div",{className:"pending-order-table",style:l?{overflow:"visible"}:{},children:Object(ws.jsxs)("table",{children:[Object(ws.jsx)("thead",{children:Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("th",{children:"Time"}),Object(ws.jsx)("th",{className:"type",children:Object(ws.jsx)(gr,{label:"Type",options:h.a.keys(Rr),selectedOptions:c,optionNames:h.a.mapValues(Rr,"name"),onToggleOptions:function(t){e.setState({shouldTableOverflowVisible:t})},onClickConfirm:function(t){e.setState({filteredOrderTypes:t})}})}),Object(ws.jsx)("th",{className:"left-align",children:"Prem./Disc."}),Object(ws.jsx)("th",{className:"left-align",children:"Quantity"}),Object(ws.jsx)("th",{className:"left-align",children:"Filled"}),Object(ws.jsxs)("th",{className:"status",children:["Status",Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:["Pending orders become expired if the NAVs of Tranchess Tokens are rebalanced to 1.0 by the primary market settlement.",Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/tranchess-swap#what-happens-if-rebalanced"},target:"_blank",children:"Learn more"})]})})]}),Object(ws.jsx)("th",{children:"Actions"})]})}),Object(ws.jsx)("tbody",{children:h.a.map(d,(function(t,a){var i=t.contract,o=t.version,c=t.side,l=t.tranche,u=t.pd_level,d=t.place_amount,m=t.filled_amount,p=t.place_timestamp,b=t.isCancelling,f=r[i],v=h.a.has(f,"fundAddress")?s[f.fundAddress]:null,g=h.a.has(v,"assets.underlyingToken.symbol")?v.assets.underlyingToken.symbol:null,k=h.a.has(v,"summary.rebalanceSize")&&parseInt(o)<parseInt(v.summary.rebalanceSize);return Object(ws.jsxs)("tr",{className:"pending-order-table--item",children:[Object(ws.jsx)("td",{children:j.a.unix(p).format("D MMM, HH:mm:ss")}),Object(ws.jsx)("td",{children:"".concat("Bid"===c?"Buy":"Sell"," ").concat((F[g]||"")+L[l].name)}),Object(ws.jsx)("td",{className:"left-align",children:(he(u)/100).toFixed(2)+"%"}),Object(ws.jsx)("td",{children:Object(ws.jsx)(wr,{fundAddress:h.a.isNil(v)?null:v.fundAddress,tokenMAmount:"Ask"===c&&"M"===l?d:null,tokenAAmount:"Ask"===c&&"A"===l?d:null,tokenBAmount:"Ask"===c&&"B"===l?d:null,quoteAmount:"Bid"===c?d:null})}),Object(ws.jsx)("td",{className:"left-align",children:Number(m)>0?J({number:m,shouldReturnLocalString:!0,defaultPrecision:3,shouldApplyFloorValue:!0}):"0.0"}),Object(ws.jsx)("td",{children:!h.a.isNil(v)&&Object(ws.jsx)("span",{className:"pending-order-table--status"+(k?" expired":""),children:k?"EXPIRED":"ACTIVE"})}),Object(ws.jsx)("td",{className:"left-align",children:b?Object(ws.jsx)("span",{className:"pending-order-table--canceling",children:"Canceling"}):Object(ws.jsx)("button",{disabled:h.a.isNil(v)||!xa(n.providerNetwork),className:"pending-order-table--cancel-button button-style-5",onClick:function(){e.handleClickCancelButton(t)},children:xa(n.providerNetwork)?"Cancel":"Wrong network"})})]},a)}))})]})})}}]),n}(a.Component);var Dr=Object(o.c)((function(e){return{wallet:e.wallet,fundItems:e.fund.items,exchangeItems:e.exchange.items,pendingOrders:e.exchange.account.pendingOrders}}))(Ir),Pr=Ee.a.utils.formatUnits,Lr={BuyTrade:"Buy Trade",SellTrade:"Sell Trade",BidOrderPlaced:"Post-only Buy Order",AskOrderPlaced:"Post-only Sell Order",BidOrderCanceled:"Post-only Buy Order Cancelled",AskOrderCanceled:"Post-only Sell Order Cancelled",TakerSettled:"Claim Standard Trade",MakerSettled:"Claim Post-only Trade"},Fr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={filteredEvents:h.a.keys(Lr),pagination:{pageIndex:1,pageSize:15},shouldTableOverflowVisible:!1},a._mounted=!1,a.polling=null,a.fetchDataId=null,a.exchangeTransactionsNode=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,this._getData(),this.polling=setInterval((function(){1===e.state.pagination.pageIndex&&e._getData()}),1e4)}},{key:"componentDidUpdate",value:function(e){var t=e.walletAddress,n=this.props.walletAddress;h.a.isEqual(t,n)||(this._clearEvents(),this._getData())}},{key:"componentWillUnmount",value:function(){var e=this.state.pagination;this._mounted=!1,this.polling&&window.clearInterval(this.polling),e.pageIndex>1&&this._clearEvents()}},{key:"_getData",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.walletAddress,s=this.state,r=s.pagination,i=s.filteredEvents,o=r.pageIndex,c=r.pageSize;if(!h.a.isNil(a)){var l=Object(De.a)();this.fetchDataId=l,n(xn({tranche:"",event:i,pageIndex:o,pageSize:c})).then((function(t){if(t&&e.fetchDataId===l){var a=t.count,s=t.events;n(Cn(a,s))}})).catch((function(e){console.error("ExchangeTransactions _getData Error: ",e)}))}}},{key:"_clearEvents",value:function(){(0,this.props.dispatch)(Cn(0)),this.setState({pagination:{pageIndex:1,pageSize:15}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.fundItems,s=t.exchangeItems,r=t.exchangeEvent,i=this.state,o=i.pagination,c=i.filteredEvents,l=i.shouldTableOverflowVisible,u=r.count,d=r.items,m=P[56];return Object(ws.jsxs)("div",{className:"exchange-transactions",ref:function(t){return e.exchangeTransactionsNode=t},style:l?{overflow:"visible"}:{},children:[Object(ws.jsxs)("table",{children:[Object(ws.jsx)("thead",{children:Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("th",{children:"Time"}),Object(ws.jsx)("th",{className:"event",children:Object(ws.jsx)(gr,{label:"Event",options:h.a.keys(Lr),selectedOptions:c,optionNames:Lr,onToggleOptions:function(t){e.setState({shouldTableOverflowVisible:t})},onClickConfirm:function(t){e.setState({filteredEvents:t,pagination:b.a.set(o,"pageIndex",1)},(function(){e._clearEvents(),e._getData()}))}})}),Object(ws.jsx)("th",{children:"Quantity"}),Object(ws.jsx)("th",{children:"Prem./Disc."}),Object(ws.jsx)("th",{children:"Actions"})]})}),Object(ws.jsx)("tbody",{children:h.a.map(d,(function(e,t){var r=e.contract,i=e.blockTimestamp,o=e.event,c=e.transactionHash,l=e.args,u=s[r]||{},d=n[u.fundAddress],p=h.a.has(d,"assets.underlyingToken.symbol")?d.assets.underlyingToken.symbol:null,b=F[p]||"";return Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("td",{children:j.a.unix(i).format("D MMM, HH:mm:ss")}),Object(ws.jsx)("td",{className:"exchange-transactions--event ".concat(o),children:"BuyTrade"===o?"Buy ".concat(h.a.has(L,l.tranche)?b+L[l.tranche].name:""):"SellTrade"===o?"Sell ".concat(h.a.has(L,l.tranche)?b+L[l.tranche].name:""):"BidOrderPlaced"===o?"Post-only Buy ".concat(h.a.has(L,l.tranche)?b+L[l.tranche].name:""):"AskOrderPlaced"===o?"Post-only Sell ".concat(h.a.has(L,l.tranche)?b+L[l.tranche].name:""):"BidOrderCanceled"===o?"Post-only Buy ".concat(h.a.has(L,l.tranche)?b+L[l.tranche].name:""," Cancelled"):"AskOrderCanceled"===o?"Post-only Sell ".concat(h.a.has(L,l.tranche)?b+L[l.tranche].name:""," Cancelled"):"MakerSettled"===o?"Claim Post-only Trade":"TakerSettled"===o?"Claim Standard Trade":o}),Object(ws.jsxs)("td",{children:["BuyTrade"===o&&h.a.has(l,"quoteAmount")&&Object(ws.jsx)(wr,{fundAddress:u.fundAddress,quoteAmount:Pr(l.quoteAmount)}),"SellTrade"===o&&h.a.has(l,"baseAmount")&&Object(ws.jsx)(wr,{fundAddress:u.fundAddress,tokenMAmount:"M"===l.tranche?Pr(l.baseAmount):null,tokenAAmount:"A"===l.tranche?Pr(l.baseAmount):null,tokenBAmount:"B"===l.tranche?Pr(l.baseAmount):null}),"BidOrderPlaced"===o&&h.a.has(l,"quoteAmount")&&Object(ws.jsx)(wr,{fundAddress:u.fundAddress,quoteAmount:Pr(l.quoteAmount)}),"AskOrderPlaced"===o&&h.a.has(l,"baseAmount")&&Object(ws.jsx)(wr,{fundAddress:u.fundAddress,tokenMAmount:"M"===l.tranche?Pr(l.baseAmount):null,tokenAAmount:"A"===l.tranche?Pr(l.baseAmount):null,tokenBAmount:"B"===l.tranche?Pr(l.baseAmount):null}),"BidOrderCanceled"===o&&h.a.has(l,"quoteAmount")&&Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(wr,{fundAddress:u.fundAddress,quoteAmount:Pr(l.quoteAmount),symbolPostfix:"placed"}),l.fillable&&Object(ws.jsx)("span",{className:"exchange-transactions--cancel-order-left-amount",children:"".concat(J({number:v()(Pr(l.quoteAmount)).minus(Pr(l.fillable)).toString(),shouldApplyFloorValue:!0,shouldReturnLocalString:!0})," filled")})]}),"AskOrderCanceled"===o&&h.a.has(l,"baseAmount")&&Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(wr,{fundAddress:u.fundAddress,tokenMAmount:"M"===l.tranche?Pr(l.baseAmount):null,tokenAAmount:"A"===l.tranche?Pr(l.baseAmount):null,tokenBAmount:"B"===l.tranche?Pr(l.baseAmount):null,symbolPostfix:"placed"}),l.fillable&&Object(ws.jsx)("span",{className:"exchange-transactions--cancel-order-left-amount",children:"".concat(J({number:v()(Pr(l.baseAmount)).minus(Pr(l.fillable)).toString(),shouldApplyFloorValue:!0,shouldReturnLocalString:!0})," filled")})]}),(l.amountM&&l.amountA,l.amountB&&l.quoteAmount&&Object(ws.jsx)(wr,{fundAddress:u.fundAddress,tokenMAmount:Pr(l.amountM),tokenAAmount:Pr(l.amountA),tokenBAmount:Pr(l.amountB),quoteAmount:Pr(l.quoteAmount)}))]}),Object(ws.jsxs)("td",{children:[["BuyTrade","SellTrade"].includes(o)&&h.a.has(l,"lastMatchedPDLevel")&&"".concat(Number(he(l.lastMatchedPDLevel)/100).toFixed(2),"%"),["BidOrderPlaced","AskOrderPlaced","BidOrderCanceled","AskOrderCanceled"].includes(o)&&h.a.has(l,"pdLevel")&&"".concat(Number(he(l.pdLevel)/100).toFixed(2),"%")]}),Object(ws.jsx)("td",{children:m&&Object(ws.jsx)("a",{href:"".concat(m.explorerUrl,"/tx/").concat(c),target:"_blank",rel:"noreferrer",children:Object(ws.jsx)("button",{className:"exchange-transactions--link",children:"View on BscScan"})})})]},t)}))})]}),Object(ws.jsx)(Xs,{pageSize:o.pageSize,pageIndex:o.pageIndex,totalSize:u,onChangePageIndex:function(t){e.setState((function(e){return{pagination:b.a.set(e.pagination,"pageIndex",t)}}),(function(){e.exchangeTransactionsNode&&e.exchangeTransactionsNode.scrollIntoView({behavior:"smooth"}),e._getData()}))}})]})}}]),n}(a.Component);var Ur=Object(o.c)((function(e){return{walletAddress:e.wallet.address,fundItems:e.fund.items,exchangeItems:e.exchange.items,exchangeEvent:e.exchange.account.event}}))(Fr),Hr=n.p+"static/media/spinner-white.b12f4573.svg",Vr={UNSETTLED_TRADES:{key:"UNSETTLED_TRADES",name:"Filled trades"},PENDING_ORDERS:{key:"PENDING_ORDERS",name:"Pending orders"},TRANSACTIONS:{key:"TRANSACTIONS",name:"Transaction logs"}},Wr=function(){var e=sessionStorage.tradingProfileTabKey;return h.a.keys(Vr).includes(e)?e:Vr.UNSETTLED_TRADES.key},Yr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={tabKey:Wr()},a._mounted=!1,a.tradingProfile=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location;this._mounted=!0,h.a.isEmpty(e.hash)||this._focusLocaionHash()}},{key:"componentDidUpdate",value:function(e){var t=e.location,n=this.props.location;h.a.isEqual(t.key,n.key)||h.a.isEmpty(n.hash)||this._focusLocaionHash()}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"_focusLocaionHash",value:function(){var e=this,t=this.props.location;h.a.isEmpty(t.hash)||("#filled"===t.hash?setTimeout((function(){e._mounted&&e._focusFilledTrades()}),200):"#orders"===t.hash&&setTimeout((function(){e._mounted&&e._focusPendingOrders()}),200))}},{key:"_focusFilledTrades",value:function(){this.setState({tabKey:Vr.UNSETTLED_TRADES.key}),this.tradingProfile&&this.tradingProfile.scrollIntoView({behavior:"smooth",block:"nearest"})}},{key:"_focusPendingOrders",value:function(){this.setState({tabKey:Vr.PENDING_ORDERS.key}),this.tradingProfile&&this.tradingProfile.scrollIntoView({behavior:"smooth",block:"nearest"})}},{key:"Tabs",value:function(){var e=this,t=this.props,n=t.pendingOrders,a=t.isFetchingPendingOrders,s=t.isFetchingUnsettledTrades,r=t.isFetchingEvents,i=this.state.tabKey,o=h.a.size(h.a.filter(n,(function(e){return!e.isCancelled})));return Object(ws.jsxs)("div",{className:"trading-profile--tabs",children:[Object(ws.jsx)("div",{className:"trading-profile--tabs--content",children:h.a.map(Vr,(function(t,n){return Object(ws.jsxs)("button",{className:"trading-profile--tabs--button"+(n===i?" selected":""),onClick:function(){var t;t=n,sessionStorage.tradingProfileTabKey=t,e.setState({tabKey:Wr()})},children:[t.name,Object(ws.jsx)("span",{children:n===Vr.PENDING_ORDERS.key&&o>0?" (".concat(o,")"):""})]},n)}))}),(a||s||r)&&Object(ws.jsx)("img",{src:Hr})]})}},{key:"render",value:function(){var e=this,t=this.state.tabKey;return Object(ws.jsxs)("div",{className:"trading-profile",ref:function(t){return e.tradingProfile=t},children:[this.Tabs(),Object(ws.jsxs)("div",{className:"trading-profile--main",children:[t===Vr.UNSETTLED_TRADES.key&&Object(ws.jsx)(Mr,{}),t===Vr.PENDING_ORDERS.key&&Object(ws.jsx)(Dr,{}),t===Vr.TRANSACTIONS.key&&Object(ws.jsx)(Ur,{})]})]})}}]),n}(a.Component);var Kr=Object(xs.f)(Object(o.c)((function(e){var t=e.exchange.account;return{pendingOrders:t.pendingOrders,isFetchingPendingOrders:t.isFetchingPendingOrders,isFetchingUnsettledTrades:t.isFetchingUnsettledTrades,isFetchingEvents:t.isFetchingEvents}}))(Yr)),zr="BID",Gr="ASK",qr=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).polling=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._updateOrderBook(),this.polling=setInterval((function(){e._updateOrderBook()}),1e4)}},{key:"componentDidUpdate",value:function(e){var t=e.fundAddress,n=e.tranche,a=e.fundItem,s=this.props,r=s.fundAddress,i=s.tranche,o=s.fundItem;h.a.isEqual(t,r)&&h.a.isEqual(n,i)&&h.a.isEqual(a,o)||this._updateOrderBook()}},{key:"componentWillUnmount",value:function(){this.polling&&window.clearInterval(this.polling)}},{key:"_updateOrderBook",value:function(){var e=this.props,t=e.dispatch,n=e.fundItem,a=e.tranche;h.a.isNil(n)||t(gn(n.exchangeAddress,a))}},{key:"Section",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zr,t=this.props,n=t.fundItem,a=t.orderBook,s=t.tranche,r=t.onClickPDLevel,i=h.a.has(n,"assets.underlyingToken.symbol")?n.assets.underlyingToken.symbol:null,o=h.a.has(n,"fundAddress")?le(n.fundAddress):null,c=h.a.has(a,"tranche".concat(s,".version"))&&h.a.has(n,"summary.rebalanceSize")&&parseInt(a["tranche".concat(s)].version)===parseInt(n.summary.rebalanceSize),l=c&&a["tranche".concat(s)]["".concat(e.toLowerCase(),"s")]||[],u=h.a.sortBy(l,(function(t){return(e===zr?-1:1)*t.pdLevel})),d=0,m=0,p=0;if(!h.a.isNil(o)&&h.a.has(a,"tranche".concat(s))){var b=a["tranche".concat(s)],f=b.bids,g=b.asks;p=Number(o[s]),c&&!h.a.isEmpty(f)&&!h.a.isEmpty(g)&&p>0&&(h.a.forEach(f,(function(e){d+=Number(e.totalAmount)})),h.a.forEach(g,(function(e){d+=Number(e.totalAmount)*p})))}return Object(ws.jsxs)("section",{className:"order-book--section ".concat(e),children:[Object(ws.jsx)("div",{className:"order-book--section--title",children:e}),Object(ws.jsxs)("div",{className:"order-book--section--main",children:[Object(ws.jsxs)("div",{className:"order-book--section--main--header clearfix",children:[Object(ws.jsx)("span",{className:"pd-level",children:"Prem./Disc."}),Object(ws.jsxs)("span",{className:"amount",children:["Amount ","(",e===zr?h.a.has(n,"assets")?n.assets.quoteToken.symbol:"Quote":(F[i]||"")+L[s].name,")"]})]}),Object(ws.jsx)("div",{className:"order-book--section--main--data",children:h.a.map(u,(function(t){var n=t.pdLevel,a=t.totalAmount,s=he(n);m+=Number(a)*(e===zr?1:p);var i=d>0?m/d:0;return v()(a||0).gt(0)?Object(ws.jsxs)("div",{className:"order-book--section--main--item clearfix",children:[Object(ws.jsx)("span",{className:"pd-level left-align",onClick:function(){r(n)},children:(s/100).toFixed(2)+"%"}),Object(ws.jsx)("span",{className:"amount right-align",children:J({number:a,shouldReturnLocalString:!0,shouldApplyFloorValue:!0})}),d>0&&Object(ws.jsx)("div",{className:"order-book--section--level-background",style:{width:"".concat(100*i,"%")}})]},n):null}))})]})]})}},{key:"render",value:function(){var e=this.props.isFetchingOrderBook;return Object(ws.jsxs)("div",{className:"order-book",children:[Object(ws.jsxs)("div",{className:"order-book--title",children:["Order book",e&&Object(ws.jsx)("img",{src:Hr})]}),Object(ws.jsxs)("div",{className:"order-book--main",children:[this.Section(zr),this.Section(Gr)]})]})}}]),n}(a.Component);qr.defaultProps={onClickPDLevel:function(){}};var _r=Object(o.c)((function(e,t){var n=e.fund.items[t.fundAddress];return{fundItem:n,orderBook:!h.a.isNil(n)&&h.a.has(e.exchange,"items.".concat(n.exchangeAddress,".orderBook"))?e.exchange.items[n.exchangeAddress].orderBook:null,isFetchingOrderBook:e.exchange.isFetchingOrderBook}}))(qr),Qr=function(){return sessionStorage.tradeContainerFundAddress||null},Xr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";sessionStorage.tradeContainerFundAddress=e},Jr=function(){var e=sessionStorage.tradeContainerTranche;return h.a.keys(L).includes(e)?e:h.a.keys(L)[0]},Zr=function(e){sessionStorage.tradeContainerTranche=e},$r=function(){var e=sessionStorage.tradeContainerSide;return h.a.keys(pr).includes(e)?e:pr.BUY},ei=function(){return"1"===sessionStorage.tradeContainerAdvanced},ti=function(){var e=sessionStorage.tradeContainerRole;return h.a.keys(hr).includes(e)?e:hr.TAKER},ni=function(e){sessionStorage.tradeContainerRole=e},ai=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;Object(ys.a)(this,n),a=t.call(this,e);var s=Jr(),r=$r(),i=ti(),o=Qr(),c=h.a.keys(e.fundItems),l=!h.a.isEmpty(o)&&c.includes(o)?o:h.a.isEmpty(c)?null:c[0];return a.state={selectedFundAddress:l,tranche:s,side:r,isAdvancedOn:ei(),role:i,defaultRole:i,pdLevel:a._getDefaultPDLevel({side:r,role:i,tranche:s})},a.orderEditorNode=null,a.orderBookNode=null,a}return Object(Os.a)(n,[{key:"_getDefaultPDLevel",value:function(e){var t=e.side,n=void 0===t?pr.BUY:t,a=e.role,s=void 0===a?hr.TAKER:a,r=e.tranche,i={M:8,A:2,B:16}[void 0===r?"M":r]||8;return s===hr.TAKER?h.a.clamp(Y+(n===pr.BUY?i:n===pr.SELL?-i:0),1,W):Y}},{key:"Sides",value:function(){var e=this,t=this.state,n=t.tranche,a=t.side,s=t.role;return Object(ws.jsx)("div",{className:"trade-container--sides clearfix",children:h.a.map(pr,(function(t){return Object(ws.jsx)("button",{className:t+(t===a?" selected":""),onClick:function(){!function(e){sessionStorage.tradeContainerSide=e}(t);var a=$r(),r=e._getDefaultPDLevel({tranche:n,side:a,role:s});e.setState({side:a,pdLevel:r})},children:h.a.lowerCase(t)},t)}))})}},{key:"Advanced",value:function(){var e=this,t=this.state,n=t.tranche,a=t.isAdvancedOn,s=t.side,r=t.role,i=t.pdLevel;return Object(ws.jsx)("div",{className:"trade-container--advanced",children:Object(ws.jsx)(Ks,{checked:a,trueText:"Advanced",falseText:"Advanced",onChange:function(t){!function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];sessionStorage.tradeContainerAdvanced=e?"1":"0"}(t);var a=ei();ni(a?e.state.defaultRole:hr.TAKER);var o=ti();e.setState({isAdvancedOn:a,role:o,pdLevel:h.a.isEqual(r,o)?i:e._getDefaultPDLevel({tranche:n,side:s,role:o})},(function(){e.orderEditorNode&&e.orderBookNode&&(a?(e.orderEditorNode.classList.remove("center-align"),e.orderEditorNode.classList.add("left-align"),e.orderBookNode.classList.add("show")):(e.orderEditorNode.classList.remove("left-align"),e.orderEditorNode.classList.add("center-align"),e.orderBookNode.classList.remove("show")))}))}})})}},{key:"render",value:function(){var e=this,t=this.props.fundItems,n=this.state,a=n.selectedFundAddress,s=n.tranche,r=n.side,i=n.role,o=n.pdLevel,c=n.isAdvancedOn;return h.a.isEmpty(t)?null:Object(ws.jsxs)("div",{className:"trade-container",children:[Object(ws.jsxs)("div",{className:"trade-container--body",children:[Object(ws.jsx)("div",{className:"trade-container--tranche-selector",children:Object(ws.jsx)(nr,{selectedFundAddress:a,selectedTranche:s,onChange:function(t,n){Xr(t),Zr(n);var a=Jr(),s=e._getDefaultPDLevel({tranche:a,side:r,role:i});e.setState({selectedFundAddress:Qr(),tranche:a,pdLevel:s})}})}),Object(ws.jsxs)("div",{className:"trade-container--main",children:[Object(ws.jsxs)("div",{className:"trade-container--main--header clearfix",children:[this.Sides(),this.Advanced()]}),Object(ws.jsxs)("div",{className:"trade-container--main--body",children:[Object(ws.jsx)("div",{className:"trade-container--order-editor",ref:function(t){return e.orderEditorNode=t},children:Object(ws.jsx)(vr,{fundAddress:a,tranche:s,side:r,role:i,pdLevel:o,shouldHideRole:!c&&i===hr.TAKER,onChangeRole:function(t){ni(t);var n=ti();e.setState({role:n,defaultRole:n,pdLevel:e._getDefaultPDLevel({tranche:s,side:r,role:n})})},onChangePDLevel:function(t){e.setState({pdLevel:t})},onClickPlaceOrder:function(){window.gtag&&window.gtag("event","place_order",{is_advanced:c?"1":"0"})}})}),Object(ws.jsx)("div",{className:"trade-container--order-book"+(c?"":" hidden"),ref:function(t){return e.orderBookNode=t},children:Object(ws.jsx)(_r,{fundAddress:a,tranche:s,onClickPDLevel:function(t){e.setState({pdLevel:t})}})})]})]})]}),Object(ws.jsx)("div",{className:"trade-container--trading-profile",children:Object(ws.jsx)(Kr,{})})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.fundItems;if(h.a.isNil(t.selectedFundAddress)&&!h.a.isEmpty(n)){var a=Qr(),s=h.a.keys(n);return{selectedFundAddress:!h.a.isEmpty(a)&&s.includes(a)?a:s[0]}}return null}}]),n}(a.Component);var si=Object(o.c)((function(e){return{fundItems:e.fund.items}}))(ai),ri=n(181),ii=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={shouldShowOptions:!1},a.handleClickWindow=a.handleClickWindow.bind(Object(Ms.a)(a)),a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleClickWindow)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClickWindow)}},{key:"handleClickWindow",value:function(){this.state.shouldShowOptions&&this.setState({shouldShowOptions:!1})}},{key:"CoinStack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(ws.jsx)("span",{className:"asset-dropdown-selector--coin-stack",children:h.a.map(e,(function(e,t){return Object(ws.jsx)("img",{src:e},t)}))})}},{key:"Options",value:function(){var e=this,t=this.props,n=t.fundItems,a=t.type,s=t.onChangeFundAddress;return Object(ws.jsx)("div",{className:"asset-dropdown-selector--options",children:h.a.map(n,(function(t,n){var r=h.a.has(t,"assets.underlyingToken.symbol")?t.assets.underlyingToken.symbol:null,i=h.a.has(t,"assets.trancheM.symbol")?t.assets.trancheM.symbol:null,o=h.a.has(t,"assets.trancheA.symbol")?t.assets.trancheA.symbol:null,c=h.a.has(t,"assets.trancheB.symbol")?t.assets.trancheB.symbol:null;return Object(ws.jsxs)("div",{className:"asset-dropdown-selector--options--item",onClick:function(t){t.stopPropagation(),e.setState({shouldShowOptions:!1}),s(n)},children:[Object(ws.jsxs)("div",{className:"asset-dropdown-selector--options--item--icon",children:["UNDERLYING"===a&&Object(ws.jsx)("img",{src:U[r]}),"TOKEN_M"===a&&Object(ws.jsx)("img",{src:U[i]}),"TOKEN_AB"===a&&e.CoinStack([U[o],U[c]])]}),Object(ws.jsxs)("div",{className:"asset-dropdown-selector--options--item--name",children:["UNDERLYING"===a&&"".concat(r||"Underlying"),"TOKEN_M"===a&&"".concat(F[r]||"").concat(L.M.name),"TOKEN_AB"===a&&"".concat(F[r]||"").concat(L.A.name," & ").concat(F[r]||"").concat(L.B.name)]})]},n)}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.fundItems,s=t.selectedFundAddress,r=t.type,i=this.state.shouldShowOptions,o=n[s],c=h.a.has(o,"assets.underlyingToken.symbol")?o.assets.underlyingToken.symbol:null,l=h.a.has(o,"assets.trancheM.symbol")?o.assets.trancheM.symbol:null,u=h.a.has(o,"assets.trancheA.symbol")?o.assets.trancheA.symbol:null,d=h.a.has(o,"assets.trancheB.symbol")?o.assets.trancheB.symbol:null;return Object(ws.jsxs)("div",{className:"asset-dropdown-selector",children:[Object(ws.jsxs)("button",{className:"asset-dropdown-selector--current-option",onClick:function(t){t.stopPropagation(),e.setState({shouldShowOptions:!h.a.isEmpty(n)&&!i})},children:[Object(ws.jsx)("div",{className:"asset-dropdown-selector--current-option--icon",children:h.a.isNil(o)?Object(ws.jsxs)(a.Fragment,{children:["UNDERLYING"===r&&Object(ws.jsx)(Rs.j,{}),"TOKEN_M"===r&&Object(ws.jsx)("img",{src:L.M.icon}),"TOKEN_AB"===r&&this.CoinStack([L.A.icon,L.B.icon])]}):Object(ws.jsxs)(a.Fragment,{children:["UNDERLYING"===r&&h.a.has(U,c)&&Object(ws.jsx)("img",{src:U[c]}),"TOKEN_M"===r&&h.a.has(U,l)&&Object(ws.jsx)("img",{src:U[l]}),"TOKEN_AB"===r&&h.a.has(U,u)&&h.a.has(U,d)&&this.CoinStack([U[u],U[d]])]})}),h.a.isNil(o)&&Object(ws.jsx)("div",{className:"asset-dropdown-selector--current-option--placeholder",children:"UNDERLYING"===r?"Select BTCB or ETH":"Select a type"}),!h.a.isNil(o)&&Object(ws.jsxs)("div",{className:"asset-dropdown-selector--current-option--name",children:["UNDERLYING"===r&&"".concat(c||"Underlying"),"TOKEN_M"===r&&"".concat(F[c]||"").concat(L.M.name),"TOKEN_AB"===r&&"".concat(F[c]||"").concat(L.A.name," & ").concat(F[c]||"").concat(L.B.name)]}),Object(ws.jsx)("span",{className:"asset-dropdown-selector--current-option--dropdown-icon",children:Object(ws.jsx)(Rs.e,{})})]}),i&&this.Options()]})}}]),n}(a.Component);ii.defaultProps={type:"UNDERLYING",onChangeFundAddress:function(){}};var oi=Object(o.c)((function(e){return{fundItems:e.fund.items}}))(ii),ci="SPLIT",li="MERGE",ui=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={selectedFundAddress:null,amountInput:""},a}return Object(Os.a)(n,[{key:"handleClickSplitButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u,d;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,a=t.fundItems,s=this.state,r=s.selectedFundAddress,i=s.amountInput,o=a[r],c=Jt(r),l=h.a.has(o,"assets.underlyingToken.symbol")?o.assets.underlyingToken.symbol:null,h.a.isNil(o)||h.a.isNil(c)||!v()(i||0).gt(0)){e.next=23;break}return e.prev=6,e.next=9,c.primaryMarket.split(h.a.toString(i));case 9:if(u=e.sent,!h.a.has(u,"hash")){e.next=15;break}this.setState({amountInput:""}),n(Ba({transactionResponse:u,title:"Split ".concat(F[l]||"","QUEEN tokens")})),e.next=16;break;case 15:throw new Error("Cannot get transaction's hash");case 16:e.next=23;break;case 18:e.prev=18,e.t0=e.catch(6),d=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:d}))),console.error("SplitMerge handleClickSplitButton error: ",d);case 23:case"end":return e.stop()}}),e,this,[[6,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleClickMergeButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u,d;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,a=t.fundItems,s=this.state,r=s.selectedFundAddress,i=s.amountInput,o=a[r],c=Jt(r),l=h.a.has(o,"assets.underlyingToken.symbol")?o.assets.underlyingToken.symbol:null,h.a.isNil(o)||h.a.isNil(c)||!v()(i||0).gt(0)){e.next=23;break}return e.prev=6,e.next=9,c.primaryMarket.merge(h.a.toString(i));case 9:if(u=e.sent,!h.a.has(u,"hash")){e.next=15;break}this.setState({amountInput:""}),n(Ba({transactionResponse:u,title:"Merge ".concat(F[l]||"","Bishop & ").concat(F[l]||"","Rook")})),e.next=16;break;case 15:throw new Error("Cannot get transaction's hash");case 16:e.next=23;break;case 18:e.prev=18,e.t0=e.catch(6),d=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:d}))),console.error("SplitMerge handleClickMergeButton error: ",d);case 23:case"end":return e.stop()}}),e,this,[[6,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getEstimatedSplitAmount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=null;return h.a.has(e,"variables.splitFeeRate")&&(n=v()(t||0).times(v()(1).minus(e.variables.splitFeeRate)).div(2).toString()),n}},{key:"_getEstimatedMergedAmount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=null;return h.a.has(e,"variables.mergeFeeRate")&&(n=v()(t||0).times(v()(1).minus(e.variables.mergeFeeRate)).times(2).toString()),n}},{key:"QueenImage",value:function(e){var t=h.a.has(e,"assets.trancheM.symbol")?e.assets.trancheM.symbol:null;return Object(ws.jsx)("img",{className:"split-merge--queen-image",src:h.a.has(U,t)?U[t]:L.M.icon})}},{key:"BishopAndRookImages",value:function(e){var t=h.a.has(e,"assets.trancheA.symbol")?e.assets.trancheA.symbol:null,n=h.a.has(e,"assets.trancheB.symbol")?e.assets.trancheB.symbol:null;return Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{className:"split-merge--bishop-image",src:h.a.has(U,t)?U[t]:L.A.icon}),Object(ws.jsx)("img",{className:"split-merge--rook-image",src:h.a.has(U,n)?U[n]:L.B.icon})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.direction,r=t.wallet,i=t.fundItems,o=t.primaryMarketItems,c=this.state,l=c.amountInput,u=c.selectedFundAddress,d=i[u],m=h.a.has(d,"assets.underlyingToken.symbol")?d.assets.underlyingToken.symbol:null,p=F[m]||"",b=h.a.has(d,"primaryMarketAddress")?o[d.primaryMarketAddress]:null,f=h.a.has(r,"balance.fundTokens.".concat(u))?r.balance.fundTokens[u]:{},g=h.a.has(d,"summary.isPrimaryMarketActive")&&!1===d.summary.isPrimaryMarketActive,j=s===ci?this._getEstimatedSplitAmount(b,l):this._getEstimatedMergedAmount(b,l),k=h.a.isNil(f)?"0":v.a.minimum(f.tokenA||0,f.tokenB||0).toString(),x=v()(l||0).gt(s===ci?f.tokenM||0:k||0);return Object(ws.jsxs)("div",{className:"split-merge",children:[Object(ws.jsxs)("div",{className:"split-merge--title",children:[s===ci?"Split QUEEN":"Merge BISHOP & ROOK",Object(ws.jsxs)("div",{className:"split-merge--fee-rate",children:["Fee: ",h.a.has(b,"variables")?"".concat(v()(b.variables[s===ci?"splitFeeRate":"mergeFeeRate"]||0).times(100).toFixed(2),"%"):"---"]})]}),Object(ws.jsxs)("div",{className:"split-merge--main",children:[Object(ws.jsxs)("div",{className:"split-merge--input-row",children:[Object(ws.jsx)("div",{className:"create-redeem--create--input-row--fund-selector",children:Object(ws.jsx)(oi,{type:s===ci?"TOKEN_M":"TOKEN_AB",selectedFundAddress:u,onChangeFundAddress:function(t){e.setState({selectedFundAddress:t})}})}),Object(ws.jsx)("input",{type:"number",placeholder:"0.0",value:l,min:0,onChange:function(t){te(t.target.value)>18||e.setState({amountInput:t.target.value})}})]}),Object(ws.jsx)("div",{className:"split-merge--info-row clearfix",children:Object(ws.jsxs)("div",{className:"split-merge--wallet-balance",children:["Wallet: ",s===ci&&Object(ws.jsxs)(a.Fragment,{children:[h.a.isNil(f.tokenM)?"--":v()(f.tokenM).gt(0)?J({number:f.tokenM,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"," ".concat(p,"QUEEN")]}),s===li&&Object(ws.jsxs)(a.Fragment,{children:[h.a.isNil(f.tokenA)?"--":v()(f.tokenA).gt(0)?J({number:f.tokenA,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"," ".concat(p,"BISHOP"),", ",h.a.isNil(f.tokenB)?"--":v()(f.tokenB).gt(0)?J({number:f.tokenB,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"," ".concat(p,"ROOK")]}),!h.a.isNil(r.address)&&!h.a.isNil(d)&&Object(ws.jsxs)(a.Fragment,{children:[" - ",Object(ws.jsx)("button",{className:"button-style-7",onClick:function(){e.setState({amountInput:s===ci?v()(f.tokenM||0).gt(0)?f.tokenM:"0":v()(k).gt(0)?k:"0"})},children:"Max"})]})]})}),Object(ws.jsx)("div",{className:"split-merge--arrow",children:Object(ws.jsx)(Rs.c,{})}),Object(ws.jsxs)("div",{className:"split-merge--receiving-row",children:[Object(ws.jsx)("div",{className:"split-merge--images",children:s===ci?this.BishopAndRookImages(d):this.QueenImage(d)}),Object(ws.jsxs)("div",{className:"split-merge--receiving-amount",children:[v()(j||0).gt(0)?J({number:j,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0",s===ci?" ".concat(p,"BISHOP & ").concat(p,"ROOK"):" ".concat(p,"QUEEN")]})]}),h.a.isNil(r.address)?Object(ws.jsx)("button",{className:"split-merge--submit-button button-style-5",onClick:function(){n(_e(!0))},children:"Connect wallet"}):Object(ws.jsx)("button",{className:"split-merge--submit-button button-style-5",disabled:g||h.a.isNil(d)||v()(l||0).lte(0)||!xa(r.providerNetwork)||x,onClick:function(){s===ci?e.handleClickSplitButton():e.handleClickMergeButton()},children:g?"Primary Market is inactive":xa(r.providerNetwork)?x?"Insufficient balance":s===ci?"Split ".concat(p,"QUEEN"):"Merge ".concat(p,"BISHOP & ").concat(p,"ROOK"):"Wrong network"})]})]})}}]),n}(a.Component);var di=Object(o.c)((function(e){return{wallet:e.wallet,fundItems:e.fund.items,primaryMarketItems:e.primaryMarket.items}}))(ui),mi=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={NAVBeforeRebalance:{M:null,A:null,B:null}},a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._getNAVBeforeRebalance()}},{key:"componentDidUpdate",value:function(e){var t=e.rebalance,n=this.props.rebalance;h.a.isEqual(t,n)||this._getNAVBeforeRebalance(!0)}},{key:"_getNAVBeforeRebalance",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]&&l[0],n=this.props,a=n.fundAddress,s=n.rebalance,r=Jt(a),t&&this.setState({NAVBeforeRebalance:{M:null,A:null,B:null}}),h.a.isNil(r)){e.next=19;break}return e.prev=5,i=j()(s.timestamp).utc().hour("14").startOf("hour"),e.next=9,r.twapOracle.getTwap(i.toISOString());case 9:return o=e.sent,e.next=12,r.fund.extrapolateNav(j()(i).add(-1,"second").toISOString(),o);case 12:c=e.sent,this.setState({NAVBeforeRebalance:c}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.error("FundRebalanceModal _getNAVBeforeRebalance error: ",e.t0);case 19:case"end":return e.stop()}}),e,this,[[5,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"TokenItem",value:function(e){var t=e.icon,n=e.nav,a=e.description;return Object(ws.jsxs)("div",{className:"fund-rebalance-modal--token-item",children:[Object(ws.jsx)("img",{className:"fund-rebalance-modal--token-item--icon",src:t}),Object(ws.jsxs)("div",{className:"fund-rebalance-modal--token-item--body",children:[Object(ws.jsx)("div",{className:"fund-rebalance-modal--token-item--nav",children:"NAV: ".concat(n)}),Object(ws.jsx)("div",{className:"fund-rebalance-modal--token-item--description",children:a})]})]})}},{key:"render",value:function(){var e=this.props,t=e.fundItem,n=e.rebalance,a=e.onClickClose,s=e.onClickReadButton,r=this.state.NAVBeforeRebalance,i=n.ratioM,o=n.ratioA2M,c=n.ratioB2M,l=n.ratioAB,u=n.timestamp,d=h.a.has(t,"assets.underlyingToken.symbol")?t.assets.underlyingToken.symbol:null,m=h.a.has(t,"assets.trancheM.symbol")?t.assets.trancheM.symbol:null,p=h.a.has(t,"assets.trancheA.symbol")?t.assets.trancheA.symbol:null,b=h.a.has(t,"assets.trancheB.symbol")?t.assets.trancheB.symbol:null,f=F[d]||"";return j()(u).unix()>0?Object(ws.jsx)(Fs.a,{overlayClassName:"fund-rebalance-modal--overlay",className:"fund-rebalance-modal",isOpen:!0,children:Object(ws.jsxs)("div",{className:"fund-rebalance-modal--main centered",children:[Object(ws.jsxs)("div",{className:"fund-rebalance-modal--header",children:[Object(ws.jsx)("div",{className:"fund-rebalance-modal--title",children:v()(l).gt(0)?"Rebalance reset NAV of tokens to 1.00. Your holding of ".concat(d||""," fund tokens have been adjusted to reflect your original asset value"):"Your total asset value might have been impacted by Rebalance on ".concat(d||""," fund.")}),Object(ws.jsx)("button",{className:"fund-rebalance-modal--close-button",onClick:function(){a()},children:Object(ws.jsx)(Rs.p,{})})]}),Object(ws.jsx)("div",{className:"fund-rebalance-modal--description",children:"The latest rebalance happened on ".concat(j()(u).format("D MMM, HH:mm:ss"),". The amount changes have taken place in all venues. Here is an illustration of how your amount of tokens could be adjusted:")}),Object(ws.jsx)("div",{className:"fund-rebalance-modal--table-wrapper",children:Object(ws.jsxs)("table",{children:[Object(ws.jsx)("thead",{children:Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("th",{children:"Before Rebalance"}),Object(ws.jsx)("th",{}),Object(ws.jsx)("th",{children:"After Rebalance"})]})}),Object(ws.jsxs)("tbody",{children:[Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("td",{children:this.TokenItem({icon:U[m]||L.M.icon,nav:h.a.has(r,"M")&&!h.a.isNil(r.M)?v()(r.M||0).toFixed(4,1):"",description:"If you had 1.00 ".concat(f).concat(L.M.name)})}),Object(ws.jsx)("td",{children:Object(ws.jsx)("div",{className:"fund-rebalance-modal--arrow",children:Object(ws.jsx)(Rs.d,{})})}),Object(ws.jsx)("td",{children:this.TokenItem({icon:U[m]||L.M.icon,nav:"1.00",description:"Now you'd have: ".concat(v()(i).toFixed(4,1))})})]}),Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("td",{children:this.TokenItem({icon:U[p]||L.A.icon,nav:h.a.has(r,"A")&&!h.a.isNil(r.A)?v()(r.A||0).toFixed(4,1):"",description:"If you had 1.00 ".concat(f).concat(L.A.name)})}),Object(ws.jsx)("td",{children:Object(ws.jsx)("div",{className:"fund-rebalance-modal--arrow",children:Object(ws.jsx)(Rs.d,{})})}),Object(ws.jsx)("td",{children:Object(ws.jsxs)("div",{className:"fund-rebalance-modal--tokens",children:[v()(o).gt(0)&&this.TokenItem({icon:U[m]||L.M.icon,nav:"1.00",description:"Now you'd have: ".concat(v()(o).toFixed(4,1))}),this.TokenItem({icon:U[p]||L.A.icon,nav:"1.00",description:"Now you'd have: ".concat(v()(l).toFixed(4,1))})]})})]}),Object(ws.jsxs)("tr",{className:"fund-rebalance-modal--external-link-row",children:[Object(ws.jsx)("td",{}),Object(ws.jsx)("td",{}),Object(ws.jsx)("td",{children:Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/rebalance#how-exactly-will-the-amounts-of-my-tokens-change"},target:"_blank",children:v()(l).gt(0)?"Why do I have additional ".concat(f).concat(L.M.name,"?"):"Where is my ".concat(L.A.name,"?")})})]}),Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("td",{children:this.TokenItem({icon:U[b]||L.B.icon,nav:h.a.has(r,"B")&&!h.a.isNil(r.B)?v()(r.B||0).toFixed(4,1):"",description:"If you had 1.00 ".concat(f).concat(L.B.name)})}),Object(ws.jsx)("td",{children:Object(ws.jsx)("div",{className:"fund-rebalance-modal--arrow",children:Object(ws.jsx)(Rs.d,{})})}),Object(ws.jsx)("td",{children:Object(ws.jsxs)("div",{className:"fund-rebalance-modal--tokens",children:[v()(c).gt(0)&&this.TokenItem({icon:U[m]||L.M.icon,nav:"1.00",description:"Now you'd have: ".concat(v()(c).toFixed(4,1))}),this.TokenItem({icon:U[b]||L.B.icon,nav:"1.00",description:"Now you'd have: ".concat(v()(l).toFixed(4,1))})]})})]}),(v()(c).gt(0)||v()(l).eq(0))&&Object(ws.jsxs)("tr",{className:"fund-rebalance-modal--external-link-row",children:[Object(ws.jsx)("td",{}),Object(ws.jsx)("td",{}),Object(ws.jsxs)("td",{children:[v()(c).gt(0)&&Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/rebalance#how-exactly-will-the-amounts-of-my-tokens-change"},target:"_blank",children:"Why do I have additional ".concat(f).concat(L.M.name,"?")}),v()(l).eq(0)&&Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/rebalance#how-exactly-will-the-amounts-of-my-tokens-change"},target:"_blank",children:"Where is my ".concat(f).concat(L.B.name,"?")})]})]})]})]})}),Object(ws.jsxs)("div",{className:"fund-rebalance-modal--buttons",children:[Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/rebalance"},target:"_blank",children:Object(ws.jsx)("button",{className:"button-style-6",children:"Learn more"})}),Object(ws.jsx)("button",{className:"button-style-5",onClick:function(){s()},children:"Got it!"})]})]})}):null}}]),n}(a.Component);mi.defaultProps={onClickReadButton:function(){}};var hi=Object(o.c)((function(e,t){return{fundItem:e.fund.items[t.fundAddress]}}))(mi),pi=function(e){var t=e.key,n=e.iconComponent,a=e.textComponent,s=e.captionComponent,r=e.priority;return{key:t,iconComponent:n,textComponent:a,captionComponent:s,priority:void 0===r?1:r}},bi=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={shouldShowClaimExchangeAssetModal:!1,rebalanceModal:{fundAddress:null,shouldShow:!1}},a.pageAnnouncmentsNode=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this.dispatchAnnouncementHeight()}},{key:"componentDidUpdate",value:function(e){var t=e.announcements,n=this.props.announcements;h.a.size(t)!==h.a.size(n)&&this.dispatchAnnouncementHeight()}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(qe(0))}},{key:"dispatchAnnouncementHeight",value:function(){var e=this.props,t=e.dispatch,n=e.announcements;t(qe(h.a.size(n)>0&&!h.a.isNil(this.pageAnnouncmentsNode)?this.pageAnnouncmentsNode.offsetHeight:0))}},{key:"handleClickEnrollFeeDistributorButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:"",n=this.props,a=n.dispatch,s=n.fundItems,r=s[t],i=h.a.has(r,"assets.underlyingToken.symbol")?r.assets.underlyingToken.symbol:null,o=Jt(t),h.a.isNil(o)){e.next=22;break}return e.prev=6,e.next=9,o.feeDistributor.syncWithVotingEscrow();case 9:if(c=e.sent,!h.a.has(c,"hash")){e.next=14;break}a(Ba({transactionResponse:c,title:"Enroll veCHESS to earn ".concat(i||""," rebate")})),e.next=15;break;case 14:throw new Error("Cannot parse transaction's hash");case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(6),l=$(e.t0),a(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:l}))),console.error("PageAnnouncements handleClickEnrollFeeDistributorButton error: ",l);case 22:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleClickSyncVotingEscrowToExchangeAccountButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:"",n=this.props,a=n.dispatch,s=n.fundItems,r=s[t],i=h.a.has(r,"assets.underlyingToken.symbol")?r.assets.underlyingToken.symbol:null,o=Jt(t),h.a.isNil(o)){e.next=22;break}return e.prev=6,e.next=9,o.exchange.syncWithVotingEscrow();case 9:if(c=e.sent,!h.a.has(c,"hash")){e.next=14;break}a(Ba({transactionResponse:c,title:"Boost ".concat(i||""," fund CHESS rewards")})),e.next=15;break;case 14:throw new Error("Cannot parse transaction's hash");case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(6),l=$(e.t0),a(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:l}))),console.error("PageAnnouncements handleClickSyncVotingEscrowToExchangeAccountButton error: ",l);case 22:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getLastClaimableTradeEpoch",value:function(){var e=this.props.unsettledTrades,t=h.a.filter(e,(function(e){return!h.a.isEmpty(e.claimableAssets)})),n=h.a.isEmpty(t)?null:h.a.maxBy(t,"epoch");return n?n.epoch:null}},{key:"_getGlobalAnnouncements",value:function(){var e=this,t=this.props,n=t.shouldIgnoreGlobalAnnouncement,a=t.provider,s=t.wallet,r=t.fundItems,i=t.primaryMarketAccountItems,o=t.exchangeAccountItems,c=t.unsettledTrades,l=t.votingEscrowAccount,u=t.feeDistributorAccounts,d=h.a.isNil(a.blockTimestamp)?j()():j()(a.blockTimestamp),m=re(d),p=function(){var e=js.getState(),t=e.provider,n=e.fund,a=[],s=h.a.isNil(t.blockTimestamp)?j()():j()(t.blockTimestamp);return h.a.forEach(n.items,(function(e,t){h.a.has(e,"summary.isFundActive")&&h.a.has(e,"summary.fundActivityStartTime")&&!1===e.summary.isFundActive&&s.isBefore(e.summary.fundActivityStartTime)&&a.push(t)})),a}(),b=Number(l.amount)>0?_({initialAmount:Number(l.amount),unlockTimestamp:l.unlockTime,timestamp:m}):0,f=[];if(!n){var g=this._getLastClaimableTradeEpoch(),k=h.a.filter(c,(function(e){return!h.a.isEmpty(e.claimableAssets)&&!e.isClaimed})),x=h.a.some(c,(function(e){return e.isClaiming})),y=h.a.some(i,(function(e){var t=e.createdShares,n=e.redeemedUnderlying;return Number(t)>0||Number(n)>0}));h.a.isEmpty(p)||f.push(this.UndergoingRebalanceAnnouncement(p)),h.a.forEach(r,(function(t,n){var a=t.summary,s=t.exchangeAddress,r=t.feeDistributorAddress,i=ie(n),c=o[s],p=u[r];if(i.shouldShowUpperRebalanceWarning?f.push(e.RebalanceWarningAnnouncement(n,"upper")):i.shouldShowLowerRebalanceWarning&&f.push(e.RebalanceWarningAnnouncement(n,"lower")),h.a.has(a,"lastRebalance.timestamp")&&h.a.has(a,"rebalanceSize")&&!function(){var e=arguments.length>1?arguments[1]:void 0;return"1"===localStorage["pageAnnouncementsIsRebalanceResultHidden--".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","--").concat(e)]}(n,a.rebalanceSize)&&j()(a.lastRebalance.timestamp).add(3,"days").isAfter(d)&&f.push(e.RebalanceResultAnnouncement(n)),h.a.has(p,"amount")&&!h.a.isNil(p.amount)){var g=_({initialAmount:Number(p.amount),unlockTimestamp:p.unlockTime,timestamp:m});v()(b).gt(g)&&f.push(e.EnrollFeeDistributorAnnouncement(n))}!h.a.isNil(c)&&Oe({exchangeAccount:c,votingEscrowAccount:l})&&f.push(e.ExchangeAccountSyncVotingEscrowAnnouncement(n))})),y&&!function(){return"1"===sessionStorage["pageAnnouncementsIsPrimaryMarketClaimablesHidden--".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")]}(s.address)&&f.push(this.PrimaryMarketClaimablesAnnouncement()),!h.a.isNil(g)&&h.a.toString(g)!==function(){return sessionStorage["pageAnnouncementsLastViewedEpoch--".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")]}(s.address)&&h.a.size(k)>0&&f.push(this.ExchangeClaimablesAnnouncement({epochSize:h.a.size(k),lastClaimableTradeEpoch:g,isClaiming:x})),Number(l.amount)>0&&d.isAfter(l.unlockTime)&&!function(){return"1"===sessionStorage["pageAnnouncementsIsChessUnlockHidden--".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")]}(s.address)&&f.push(this.ChessUnlockAnnouncement()),Number(l.amount)>0&&d.isBefore(l.unlockTime)&&j()(d).add(604800,"seconds").isAfter(l.unlockTime)&&!function(){return"1"===sessionStorage["pageAnnouncementsIsChessExtensionHidden--".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")]}(s.address)&&f.push(this.ChessExtensionAnnouncement())}return f}},{key:"UndergoingRebalanceAnnouncement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.props.fundItems,n=[],a=[],s=null;h.a.forEach(e,(function(e){var r=t[e],i=h.a.has(r,"assets.underlyingToken.symbol")?r.assets.underlyingToken.symbol:null,o=F[i]||"",c=h.a.has(r,"summary.lastRebalance")?r.summary.lastRebalance:null;h.a.isNil(i)||!h.a.has(c,"ratioM")||h.a.isNil(c.ratioM)||(n.push("the ".concat(v()(c.ratioM).gt(1)?"rise of":"drop in"," ").concat(i," price")),a.push("".concat(o,"QUEEN/").concat(o,"BISHOP/").concat(o,"ROOK"))),h.a.isNil(s)&&h.a.has(r,"summary.fundActivityStartTime")&&(s=r.summary.fundActivityStartTime)}));var r=h.a.compact(h.a.map(h.a.omit(t,e),(function(e){return h.a.has(e,"assets.underlyingToken.symbol")?"".concat(e.assets.underlyingToken.symbol," fund"):null})));return h.a.isEmpty(n)||h.a.isEmpty(a)?null:pi({key:"undergoing-rebalance",iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:"Due to ".concat(n.join(" and "),", Rebalance was triggered on ").concat(a.join("/"),". ").concat(h.a.isNil(s)?"":"Until ".concat(j()(s).format("D MMM, HH:mm"),", "),"transferring these tokens to and from your wallet is not allowed, \n                including staking, unstaking and transferring to other wallets. Primary Market and Swap for these tokens are closed. Only post-only orders are allowed. \n                ").concat(h.a.isEmpty(r)?"":"This rebalance does not affect ".concat(r.join(" and ")," tokens.")),captionComponent:Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/rebalance"},target:"_blank",children:Object(ws.jsx)("button",{className:"page-announcements--undergoing-rebalance--view-button",children:"Read more"})}),priority:1})}},{key:"RebalanceWarningAnnouncement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"upper",n=this.props.fundItems,s=n[e],r=h.a.has(s,"assets.underlyingToken.symbol")?s.assets.underlyingToken.symbol:null,i=F[r]||"",o=h.a.has(s,"summary.currentDay")?j()(s.summary.currentDay):null,c=le(e),l=h.a.isNil(c)?null:v()(c.B).div(c.A);return pi({key:"rebalance-warning--".concat(e),iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:Object(ws.jsxs)(a.Fragment,{children:["If the ratio of ".concat(i,"ROOK's NAV to ").concat(i,"BISHOP's "),"upper"===t&&"exceeds ".concat(h.a.has(s,"upperRebalanceThreshold")?Number(s.upperRebalanceThreshold).toFixed(1):""," "),"upper"!==t&&"drops below ".concat(h.a.has(s,"lowerRebalanceThreshold")?Number(s.lowerRebalanceThreshold).toFixed(1):""," "),"at daily settlement time ".concat(o?" (".concat(o.format("HH:mm"),"-").concat(j()(o).add(15,"minutes").format("HH:mm"),")"):"",", "),"Rebalance will be triggered. ",h.a.isNil(l)?"":"(Current ".concat(i,"ROOK NAV/").concat(i,"BISHOP NAV ratio @").concat(l.toFixed(4,l.gte(1)?1:2),")")]}),captionComponent:Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/rebalance"},target:"_blank",children:Object(ws.jsx)("button",{className:"page-announcements--rebalance-warning--view-button",children:"Read more"})}),priority:2})}},{key:"RebalanceResultAnnouncement",value:function(e){var t=this,n=this.props.fundItems[e],a=h.a.has(n,"assets.underlyingToken.symbol")?n.assets.underlyingToken.symbol:null,s=F[a]||"";return pi({key:"rebalance-result--".concat(e),iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:"The amount of ".concat(s,"QUEEN/").concat(s,"BISHOP/").concat(s,"ROOK tokens have been adjusted due to Rebalance."),captionComponent:Object(ws.jsx)("button",{className:"page-announcements--rebalance-result--view-button",onClick:function(){t.setState({rebalanceModal:{fundAddress:e,shouldShow:!0}})},children:"View asset changes"}),priority:3})}},{key:"PrimaryMarketClaimablesAnnouncement",value:function(){var e=this,t=this.props.wallet;return pi({key:"primary-market-claimables",iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:"You have assets ready to claim in Primary Market",captionComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(ks.b,{to:"/primary",children:Object(ws.jsx)("button",{className:"page-announcements--primary-market-claimables--view-button",onClick:function(){Yi("CREATE_REDEEM")},children:"View details"})}),Object(ws.jsx)("button",{className:"page-announcements--primary-market-claimables--close-button",onClick:function(){!function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];sessionStorage["pageAnnouncementsIsPrimaryMarketClaimablesHidden--".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")]=e?"1":"0"}(t.address,!0),e.forceUpdate()},children:Object(ws.jsx)(Rs.p,{})})]}),priority:3})}},{key:"ExchangeClaimablesAnnouncement",value:function(e){var t=this,n=e.epochSize,s=e.lastClaimableTradeEpoch,r=e.isClaiming,i=this.props.wallet;return pi({key:"exchange-claimables",iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:"You have ".concat(n," epoch").concat(n>1?"s":""," ready to claim in Swap"),captionComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("button",{className:"button-style-5 hidden",disabled:r,children:r?"Claiming":"Claim"}),Object(ws.jsx)(ks.b,{to:"/swap#filled",children:Object(ws.jsx)("button",{className:"page-announcements--swap-claimables--view-button",children:"View details"})}),Object(ws.jsx)("button",{className:"page-announcements--swap-claimables--view-button",disabled:r,onClick:function(){t.setState({shouldShowClaimExchangeAssetModal:!0})},children:r?"Claiming":"Claim assets"}),Object(ws.jsx)("button",{className:"page-announcements--swap-claimables--close-button",onClick:function(){!function(){var e=arguments.length>1?arguments[1]:void 0;sessionStorage["pageAnnouncementsLastViewedEpoch--".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")]=h.a.toString(e)}(i.address,s),t.forceUpdate()},children:Object(ws.jsx)(Rs.p,{})})]}),priority:3})}},{key:"EnrollFeeDistributorAnnouncement",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.props,s=n.wallet,r=n.fundItems,i=r[t],o=h.a.has(i,"assets.underlyingToken.symbol")?i.assets.underlyingToken.symbol:null;return pi({key:"enroll-fee-distributor--".concat(t),iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:"Enroll your veCHESS to earn ".concat(o||""," rebate."),captionComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(ks.b,{to:"/staking#locker",children:Object(ws.jsx)("button",{className:"page-announcements--enroll-fee-distributor--view-button",children:"View details"})}),Object(ws.jsx)("button",{className:"page-announcements--enroll-fee-distributor--view-button",disabled:!xa(s.providerNetwork),onClick:function(){e.handleClickEnrollFeeDistributorButton(t)},children:"Enroll now"})]}),priority:3})}},{key:"ChessUnlockAnnouncement",value:function(){var e=this,t=this.props.wallet;return pi({key:"chess-unlock",iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:"Your CHESS lock period ended",captionComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(ks.b,{to:"/staking#locker",children:Object(ws.jsx)("button",{className:"page-announcements--chess-unlock--view-button",children:"View details"})}),Object(ws.jsx)("button",{className:"page-announcements--chess-unlock--close-button",onClick:function(){!function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];sessionStorage["pageAnnouncementsIsChessUnlockHidden--".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")]=e?"1":"0"}(t.address,!0),e.forceUpdate()},children:Object(ws.jsx)(Rs.p,{})})]}),priority:3})}},{key:"ChessExtensionAnnouncement",value:function(){var e=this,t=this.props.wallet;return pi({key:"chess-extension",iconComponent:"\ud83d\udca1",textComponent:"Your locked period is approaching, extend your lock period to earn more rewards and benefits",captionComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(ks.b,{to:"/staking#locker",children:Object(ws.jsx)("button",{className:"page-announcements--chess-extension--view-button",children:"View details"})}),Object(ws.jsx)("button",{className:"page-announcements--chess-extension--close-button",onClick:function(){!function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];sessionStorage["pageAnnouncementsIsChessExtensionHidden--".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")]=e?"1":"0"}(t.address,!0),e.forceUpdate()},children:Object(ws.jsx)(Rs.p,{})})]}),priority:2})}},{key:"ExchangeAccountSyncVotingEscrowAnnouncement",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.props,s=n.wallet,r=n.fundItems,i=r[t],o=h.a.has(i,"assets.underlyingToken.symbol")?i.assets.underlyingToken.symbol:null;return pi({key:"exchange-account-sync-voting-escrow",iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:h.a.has(i,"summary.rebalanceSize")&&Number(i.summary.rebalanceSize)>0?"Boosting was paused due to ".concat(o||""," fund rebalance. Enroll to continue boosting."):"You are eligible to boost your ".concat(o||""," fund staking rewards."),captionComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(ks.b,{to:"/staking#locker",children:Object(ws.jsx)("button",{className:"page-announcements--exchange-account-sync-voting-escrow--view-button",children:"View details"})}),Object(ws.jsx)("button",{className:"page-announcements--exchange-account-sync-voting-escrow--view-button",disabled:!xa(s.providerNetwork),onClick:function(){e.handleClickSyncVotingEscrowToExchangeAccountButton(t)},children:"Enroll now"})]}),priority:3})}},{key:"render",value:function(){var e=this,t=this.props,n=t.announcements,s=t.fundItems,r=this.state,i=r.shouldShowClaimExchangeAssetModal,o=r.rebalanceModal,c=this._getGlobalAnnouncements(),l=h.a.concat(n,c),u=!h.a.isNil(o.fundAddress)&&h.a.has(s,"".concat(o.fundAddress,".summary.lastRebalance"))?s[o.fundAddress].summary.lastRebalance:null;return h.a.isEmpty(l)?null:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("div",{className:"page-announcements",ref:function(t){return e.pageAnnouncmentsNode=t},children:h.a.map(l,(function(e,t){var n=e.iconComponent,a=e.textComponent,s=e.captionComponent,r=e.priority;return Object(ws.jsxs)("div",{className:"page-announcements--item priority-".concat(r),children:[Object(ws.jsxs)("div",{className:"page-announcements--item--main",children:[n&&Object(ws.jsx)("div",{className:"page-announcements--item--icon",children:n}),Object(ws.jsx)("div",{className:"page-announcements--item--text",children:a})]}),s&&Object(ws.jsx)("div",{className:"page-announcements--item--caption",children:s})]},t)}))}),i&&Object(ws.jsx)(Ar,{onClickClose:function(){e.setState({shouldShowClaimExchangeAssetModal:!1})},onSendClaimTransaction:function(){e.setState({shouldShowClaimExchangeAssetModal:!1})}}),o.shouldShow&&!h.a.isNil(o.fundAddress)&&!h.a.isEmpty(u)&&Object(ws.jsx)(hi,{fundAddress:o.fundAddress,rebalance:u,onClickClose:function(){e.setState({rebalanceModal:{shouldShow:!1,fundAddress:null}})},onClickReadButton:function(){var t=s[o.fundAddress];h.a.has(t,"summary.rebalanceSize")&&function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];localStorage["pageAnnouncementsIsRebalanceResultHidden--".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","--").concat(e)]=t?"1":"0"}(t.fundAddress,t.summary.rebalanceSize,!0),e.setState({rebalanceModal:{shouldShow:!1,fundAddress:null}})}})]})}}]),n}(a.Component);bi.defaultProps={announcements:[]};var fi=Object(o.c)((function(e){return{provider:e.provider,wallet:e.wallet,fundItems:e.fund.items,primaryMarketAccountItems:e.primaryMarket.account.items,exchangeAccountItems:e.exchange.account.items,unsettledTrades:e.exchange.account.unsettledTrades,votingEscrowAccount:e.governance.votingEscrow.account,feeDistributorAccounts:e.governance.feeDistributor.accounts,historyNAVs:e.fund.historyNAVs}}))(bi),vi=n.p+"static/media/logo_blackbg.93d1b6fa.png",gi=n.p+"static/media/money.01882b43.gif",ji=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=null;if(h.a.has(e,"summary")&&h.a.has(e,"dailyProtocolFeeRate")){var a=e.summary,s=e.dailyProtocolFeeRate,r=a.totalShares,i=a.totalUnderlying;Number(r)>0&&Number(i)>0&&Number(s)>0&&(n=v()(r).times(t||0).div(i).div(v()(1).minus(s)).toString())}return n},ki=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=js.getState().primaryMarket.items,a=null;if(h.a.has(e,"summary")&&h.a.has(e,"dailyProtocolFeeRate")){var s=e.summary,r=e.dailyProtocolFeeRate,i=e.primaryMarketAddress,o=s.totalShares,c=s.totalUnderlying,l=n[i];if(Number(o)>0&&Number(c)>0&&Number(r)>0&&h.a.has(l,"variables.redemptionFeeRate")){var u=l.variables.redemptionFeeRate;a=v()(c).times(v()(1).minus(r)).times(t||0).times(v()(1).minus(u||0)).div(o).toString()}}return a},xi=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={creationAnimationId:null,redemptionAnimationId:null},a._hideCreationAnimationTimeout=null,a._hideRedemptionAnimationTimeout=null,a._mounted=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentDidUpdate",value:function(e){var t=e.primaryMarketAccountItem,n=this.props.primaryMarketAccountItem,a=t.creatingUnderlying,s=t.redeemingShares,r=n.creatingUnderlying,i=n.redeemingShares;h.a.isNil(a)||h.a.isNil(r)||!v()(r).gt(a)||this._showCreationAnimation(),h.a.isNil(s)||h.a.isNil(i)||!v()(i).gt(s)||this._showRedemptionAnimation()}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"_showCreationAnimation",value:function(){var e=this;this._hideCreationAnimationTimeout&&window.clearTimeout(this._hideCreationAnimationTimeout),this.setState({creationAnimationId:Object(De.a)()}),this._hideCreationAnimationTimeout=setTimeout((function(){e._mounted&&(e.setState({creationAnimationId:null}),e._hideCreationAnimationTimeout=null)}),3e3)}},{key:"_showRedemptionAnimation",value:function(){var e=this;this._hideRedemptionAnimationTimeout&&window.clearTimeout(this._hideRedemptionAnimationTimeout),this.setState({redemptionAnimationId:Object(De.a)()}),this._hideRedemptionAnimationTimeout=setTimeout((function(){e._mounted&&(e.setState({redemptionAnimationId:null}),e._hideRedemptionAnimationTimeout=null)}),3e3)}},{key:"Block",value:function(e){var t=e.icon,n=e.shouldIconShaded,a=e.title,s=e.shouldTitleShaded,r=e.caption,i=e.shouldCaptionShaded,o=e.animation,c=e.isHidden;return Object(ws.jsxs)("div",{className:"primary-market-claimable-asset-item--block"+(c?" hidden":""),children:[t&&Object(ws.jsx)("img",{className:n?"shaded":"",src:t}),Object(ws.jsxs)("div",{className:"primary-market-claimable-asset-item--block--main",children:[Object(ws.jsx)("div",{className:"primary-market-claimable-asset-item--block--title"+(s?" shaded":""),children:a}),Object(ws.jsxs)("div",{className:"primary-market-claimable-asset-item--block--caption"+(i?" shaded":""),children:[r,o&&Object(ws.jsx)("img",{src:o})]})]})]})}},{key:"render",value:function(){var e=this.props,t=e.primaryMarketAccountItem,n=e.fundItems,s=this.state,r=s.creationAnimationId,i=s.redemptionAnimationId,o=t.fundAddress,c=t.creatingUnderlying,l=t.redeemingShares,u=t.createdShares,d=t.redeemedUnderlying,m=n[o],p=h.a.has(m,"assets.underlyingToken.symbol")?m.assets.underlyingToken.symbol:null,b=h.a.has(m,"assets.trancheM.symbol")?m.assets.trancheM.symbol:null,f=ji(m,c),g=ki(m,l);return Object(ws.jsxs)("div",{className:"primary-market-claimable-asset-item",children:[v()(c||0).gt(0)||v()(u||0).gt(0)?this.Block({icon:U[b],title:"".concat(v()(u||0).gt(0)?J({number:u,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"," ").concat(F[p],"QUEEN"),shouldTitleShaded:v()(u||0).lte(0),caption:Object(ws.jsxs)(a.Fragment,{children:["Unsettled: ",v()(c||0).gt(0)?J({number:c,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:3}):"0.0",p?" ".concat(p):""," -> ".concat(v()(f||0).gt(0)?J({number:f,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"")," ".concat(F[p]||"","QUEEN")]}),shouldCaptionShaded:v()(c||0).lte(0),animation:r?"".concat(gi,"?id=").concat(r):null}):null,v()(l||0).gt(0)||v()(d||0).gt(0)?this.Block({icon:U[p],title:"".concat(v()(d||0).gt(0)?J({number:d,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:3}):"0.0"," ").concat(p||""),shouldTitleShaded:v()(d||0).lte(0),caption:Object(ws.jsxs)(a.Fragment,{children:["Unsettled: ",v()(l||0).gt(0)?J({number:l,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"," ".concat(F[p]||"","QUEEN")," -> ".concat(v()(g||0).gt(0)?J({number:g,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:3}):"")," ".concat(p||"")]}),shouldCaptionShaded:v()(l||0).lte(0),animation:i?"".concat(gi,"?id=").concat(i):null}):null]})}}]),n}(a.Component);var yi=Object(o.c)((function(e){return{fundItems:e.fund.items}}))(xi),Oi=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"handleClickClaimAllButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.dispatch,a=t.primaryMarketAccountItems,e.prev=1,e.next=4,rt();case 4:return s=e.sent,r=s.getSigner(),e.next=8,r.getAddress();case 8:if(i=e.sent,o=h.a.filter(a,(function(e){return v()(e.createdShares||0).gt(0)||v()(e.redeemedUnderlying||0).gt(0)})).map((function(e){return e.primaryMarketAddress})),!(h.a.size(o)>0)){e.next=21;break}return e.next=13,xr.batchClaim({contracts:o,account:i});case 13:if(c=e.sent,!h.a.has(c,"hash")){e.next=18;break}n(Ba({transactionResponse:c,title:"Claim primary market assets"})),e.next=19;break;case 18:throw new Error("Cannot parse transaction's hash");case 19:e.next=22;break;case 21:throw new Error("Primary market has no claimable assets");case 22:e.next=29;break;case 24:e.prev=24,e.t0=e.catch(1),l=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:l}))),console.error("PrimaryMarketClaimables handleClcikClaimButton error",l);case 29:case"end":return e.stop()}}),e,this,[[1,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleClickClaimAndStakeButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.dispatch,!t){e.next=23;break}if(a=t.fundAddress,s=t.primaryMarketAddress,r=t.assets,i=h.a.has(r,"underlyingToken.symbol")?r.underlyingToken.symbol:null,!(o=Jt(a))||h.a.isNil(s)){e.next=23;break}return this.setState({message:null}),e.prev=7,e.next=10,o.exchange.claimAndDeposit(s);case 10:if(c=e.sent,!h.a.has(c,"hash")){e.next=15;break}n(Ba({transactionResponse:c,title:"Claim and stake ".concat(F[i]||"","QUEEN")})),e.next=16;break;case 15:throw new Error("Cannot parse transaction's hash");case 16:e.next=23;break;case 18:e.prev=18,e.t0=e.catch(7),l=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:l}))),console.error("PrimaryMarketClaimables handleClickClaimAndStakeButton error",l);case 23:case"end":return e.stop()}}),e,this,[[7,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"EmptyMessage",value:function(){return Object(ws.jsxs)("div",{className:"primary-market-claimables--empty-message",children:[Object(ws.jsx)(Rs.j,{}),Object(ws.jsx)("div",{className:"primary-market-claimables--empty-message--text",children:'Once created or redeemed, assets will show up here as "unsettled" and will be claimable after the next settlement.'})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.wallet,r=t.fundItems,i=t.primaryMarketAccountItems,o=h.a.isEmpty(i)||h.a.every(i,(function(e){var t=e.creatingUnderlying,n=e.redeemingShares,a=e.createdShares,s=e.redeemedUnderlying;return v()(t||0).eq(0)&&v()(n||0).eq(0)&&v()(a||0).eq(0)&&v()(s||0).eq(0)})),c=h.a.filter(i,(function(e){var t=e.createdShares,n=e.redeemedUnderlying;return v()(t||0).gt(0)||v()(n||0).gt(0)})),l=!h.a.isEmpty(c)&&h.a.every(c,(function(e){var t=e.fundAddress,n=e.createdShares,a=r[t];return h.a.has(a,"summary.isFundActive")&&!0===a.summary.isFundActive||v()(n||0).eq(0)})),u=!h.a.isEmpty(c)&&!l,d=!h.a.isEmpty(c)&&h.a.some(c,(function(e){var t=e.createdShares;return v()(t||0).gt(0)}));return Object(ws.jsxs)("div",{className:"primary-market-claimables",children:[Object(ws.jsxs)("div",{className:"primary-market-claimables--title",children:[Object(ws.jsx)("label",{children:"Claimable assets"}),Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:["Settlement takes place once a day. To acquire QUEEN on an immediate basis, please purchase directly from Tranchess Swap.",Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/primary-market#why-is-the-daily-settlement-time-for-creation-and-redemption-set-at-14-15-utc"},target:"_blank",children:"Learn more"})]})})]}),Object(ws.jsxs)("div",{className:"primary-market-claimables--next-settlement",children:["Creation and Redemption are settled daily around ".concat(j()(j()().utc().hour(14).minute(15).startOf("minute").toISOString()).format("HH:mm")),h.a.has(window,"Notification")&&"default"===Notification.permission&&Object(ws.jsx)(Bs,{className:"primary-market-claimables--request-notification-permission-button--popup hidden",trigger:Object(ws.jsx)("button",{className:"primary-market-claimables--request-notification-permission-button hidden"+("denied"===Notification.permission?" blocked":""),onClick:function(){Notification.requestPermission((function(e){"granted"===e&&new Notification("Subscribe Settlement",{body:"Tranchess will notify you when settelement is triggered.",icon:vi})}))},children:Object(ws.jsx)(Rs.o,{})}),children:"Notify me when primary market is settled."})]}),Object(ws.jsxs)("div",{className:"primary-market-claimables--main",children:[o&&this.EmptyMessage(),Object(ws.jsx)("div",{className:"primary-market-claimables--blocks"+(o?" hidden":""),children:h.a.map(i,(function(e,t){return Object(ws.jsx)(a.Fragment,{children:Object(ws.jsx)(yi,{primaryMarketAccountItem:e})},t)}))})]}),Object(ws.jsx)("div",{className:"primary-market-claimables--buttons",children:h.a.isNil(s.address)?Object(ws.jsx)("button",{className:"primary-market-claimables--button connect-meta-mask button-style-5",onClick:function(){n(_e(!0))},children:"Connect wallet"}):Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("button",{disabled:!l||!xa(s.providerNetwork),className:"primary-market-claimables--button button-style-5",onClick:function(){e.handleClickClaimAllButton()},children:xa(s.providerNetwork)?u?"Inactive market":"Claim all":"Wrong network"}),Object(ws.jsx)(Bs,{className:"primary-market-claimables--claim-and-stake-popup",disabled:!d||!xa(s.providerNetwork),on:"click",trigger:Object(ws.jsx)("button",{className:"primary-market-claimables--claim-and-stake-popup--trigger-button button-style-6",disabled:!d||!xa(s.providerNetwork),children:"Claim and stake"}),children:Object(ws.jsx)("div",{className:"primary-market-claimables--claim-and-stake-popup--main",children:h.a.map(i,(function(t,n){var i=t.fundAddress,o=t.createdShares,c=r[i],l=h.a.has(c,"assets.underlyingToken.symbol")?c.assets.underlyingToken.symbol:null,u=h.a.has(c,"assets.trancheM")?c.assets.trancheM:null,d=h.a.has(s,"allowance.fundTokens.".concat(i,".exchange.tokenM"))?s.allowance.fundTokens[i].exchange.tokenM:null,m=h.a.has(c,"summary.isFundActive")&&!1===c.summary.isFundActive;return Object(ws.jsx)(a.Fragment,{children:Object(ws.jsx)(sr,{className:"primary-market-claimables--claim-and-stake-popup--button",tokenDisplayName:"".concat(F[l]||"","QUEEN"),tokenAddress:u?u.address:null,spenderAddress:h.a.has(c,"exchangeAddress")?c.exchangeAddress:null,allowanceAmount:d,amountToSpend:o,fetchAllowanceDisabled:!0,signTransactionLabel:xa(s.providerNetwork)?m?"Inactive ".concat(l||""," market"):"Claim and stake ".concat(F[l]||"","QUEEN"):"Wrong network",signTransactionDisabled:m||v()(o||0).eq(0)||!xa(s.providerNetwork),onClickSignTransaction:function(){e.handleClickClaimAndStakeButton(c)}})},n)}))})})]})})]})}}]),n}(a.Component);var Ai=Object(o.c)((function(e){return{wallet:e.wallet,fundItems:e.fund.items,primaryMarketAccountItems:e.primaryMarket.account.items}}))(Oi),Ni=Ee.a.utils.formatUnits,wi=["Created","Redeemed","Claimed","Split","Merged"],Si=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={eventFilterString:e.defaultEventFilterString,pagination:{pageIndex:1,pageSize:15},shouldTableOverflowVisible:!1},a._mounted=!1,a.fetchDataId=null,a.polling=null,a.mainNode=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,this._getData(),this.polling=setInterval((function(){1===e.state.pagination.pageIndex&&e._getData()}),1e4)}},{key:"componentDidUpdate",value:function(e){var t=e.wallet.address,n=this.props.wallet.address;h.a.isEqual(t,n)||(this._clearEvents(),this._getData())}},{key:"componentWillUnmount",value:function(){var e=this.state.pagination;this._mounted=!1,this.polling&&window.clearInterval(this.polling),e.pageIndex>1&&this._clearEvents()}},{key:"_clearEvents",value:function(){(0,this.props.dispatch)(Tt(0)),this.setState({pagination:{pageIndex:1,pageSize:15}})}},{key:"_getData",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.fundItems,s=t.wallet,r=this.state,i=r.eventFilterString,o=r.pagination,c=o.pageIndex,l=o.pageSize;if(!h.a.isEmpty(a)&&!h.a.isNil(s.address)){var u=j()().valueOf();this.fetchDataId=u,n(function(e){var t=e.event,n=void 0===t?"":t,a=e.pageIndex,s=void 0===a?1:a,r=e.pageSize,i=void 0===r?50:r;return function(e,t){return new Promise((function(a,r){var o=t().wallet.address;if(h.a.isNil(o)){var c=new Error("Wallet address is missing");console.error("fetchPrimaryMarketEvents Error: ",c),r(c)}else{var l=ee({event:n,pageIndex:s,pageSize:i});e({type:jt,isFetching:!0}),Te()("/api/v1/accounts/".concat(o,"/primaryMarketEvents?").concat(l)).then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){return r(e)})).finally((function(){e({type:jt,isFetching:!1})}))}}))}}({event:h.a.isEmpty(i)?wi.join(","):i,pageIndex:c,pageSize:l})).then((function(t){if(t&&e.fetchDataId===u){var a=t.count,s=t.events;n(Tt(a,s))}})).catch((function(e){console.error("PrimaryMarketTransactions _getData Error: ",e)}))}}},{key:"_getEventNames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.props.fundItems,n=t[e];if(h.a.isEmpty(n))return{Created:"Create QUEEN",Redeemed:"Redeem",Claimed:"Claim",Split:"Split QUEEN",Merged:"Merge BISHOP & ROOK"};var a=h.a.has(n,"assets.underlyingToken.symbol")?n.assets.underlyingToken.symbol:null;return{Created:"Create ".concat(F[a]||"","QUEEN"),Redeemed:"Redeem for ".concat(a),Claimed:"Claim",Split:"Split ".concat(F[a]||"","QUEEN"),Merged:"Merge ".concat(F[a]||"","BISHOP & ").concat(F[a]||"","ROOK")}}},{key:"Assets",value:function(e){var t=e.fundAddress,n=e.tokenM,a=e.tokenA,s=e.tokenB,r=e.underlyingToken,i=this.props.fundItems[t],o=h.a.has(i,"assets.underlyingToken.symbol")?i.assets.underlyingToken.symbol:null,c=h.a.has(i,"assets.trancheM.symbol")?i.assets.trancheM.symbol:null,l=h.a.has(i,"assets.trancheA.symbol")?i.assets.trancheA.symbol:null,u=h.a.has(i,"assets.trancheB.symbol")?i.assets.trancheB.symbol:null,d=function(e){var t=e.icon,n=e.symbol,a=e.amount,s=e.defaultPrecision;return Object(ws.jsxs)("div",{className:"primary-market-transactions--assets--item",title:n,children:[t&&Object(ws.jsx)("img",{src:t}),J({number:a,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:s||4}),Object(ws.jsx)("span",{children:n})]})};return Object(ws.jsxs)("div",{className:"primary-market-transactions--assets",children:[Number(n)>0&&d({icon:U[c],symbol:"".concat(F[o]).concat(L.M.name),amount:n,defaultPrecision:2}),Number(a)>0&&d({icon:U[l],symbol:"".concat(F[o]).concat(L.A.name),amount:a,defaultPrecision:2}),Number(s)>0&&d({icon:U[u],symbol:"".concat(F[o]).concat(L.B.name),amount:s,defaultPrecision:2}),Number(r)>0&&d({icon:U[o],symbol:o,amount:r})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.fundItems,s=t.primaryMarketAccountEvent,r=this.state,i=r.eventFilterString,o=r.pagination,c=r.shouldTableOverflowVisible,l=s.count,u=s.items,d=P[56],m=this._getEventNames();return Object(ws.jsx)("div",{className:"primary-market-transactions",children:Object(ws.jsxs)("div",{className:"primary-market-transactions--main",ref:function(t){return e.mainNode=t},children:[Object(ws.jsx)("div",{className:"primary-market-transactions--table-wrapper",style:c?{overflow:"visible"}:{},children:Object(ws.jsxs)("table",{children:[Object(ws.jsx)("thead",{children:Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("th",{children:"Time"}),Object(ws.jsx)("th",{className:"event-type",children:Object(ws.jsx)(gr,{label:"Event type",options:wi,selectedOptions:h.a.isEmpty(i)?wi:i.split(","),optionNames:m,onToggleOptions:function(t){e.setState({shouldTableOverflowVisible:t})},onClickConfirm:function(t){e.setState({eventFilterString:h.a.size(wi)===h.a.size(t)?"":t.join(","),pagination:b.a.set(o,"pageIndex",1)},(function(){e._clearEvents(),e._getData()}))}})}),Object(ws.jsx)("th",{children:"Asset"}),Object(ws.jsx)("th",{children:"Actions"})]})}),Object(ws.jsx)("tbody",{children:h.a.map(u,(function(t){var s=t.blockTimestamp,r=t.event,i=t.transactionHash,o=t.args,c=t.contract,l=h.a.find(n,(function(e){return e.primaryMarketAddress===c})),u=h.a.has(l,"assets.underlyingToken")?l.assets.underlyingToken:{},m=e._getEventNames(h.a.has(l,"fundAddress")?l.fundAddress:null);return l?Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("td",{children:s?j.a.unix(s).format("D MMMM YYYY, HH:mm"):""}),Object(ws.jsx)("td",{className:"primary-market-transactions--event ".concat(r),children:m[r]||r}),Object(ws.jsxs)("td",{children:["Created"===r&&e.Assets({fundAddress:l.fundAddress,underlyingToken:Ni(o.underlying,u?u.decimal:18)}),"Redeemed"===r&&e.Assets({fundAddress:l.fundAddress,tokenM:Ni(o.shares)}),"Claimed"===r&&e.Assets({fundAddress:l.fundAddress,tokenM:Ni(o.createdShares),underlyingToken:Ni(o.redeemedUnderlying,u?u.decimal:18)}),"Split"===r&&Object(ws.jsxs)(a.Fragment,{children:[e.Assets({fundAddress:l.fundAddress,tokenM:Ni(o.inM)}),Object(ws.jsx)("div",{className:"primary-market-transactions--arrow",children:Object(ws.jsx)(Rs.c,{})}),e.Assets({fundAddress:l.fundAddress,tokenA:Ni(o.outA),tokenB:Ni(o.outB)})]}),"Merged"===r&&Object(ws.jsxs)(a.Fragment,{children:[e.Assets({fundAddress:l.fundAddress,tokenA:Ni(o.inA),tokenB:Ni(o.inB)}),Object(ws.jsx)("div",{className:"primary-market-transactions--arrow",children:Object(ws.jsx)(Rs.c,{})}),e.Assets({fundAddress:l.fundAddress,tokenM:Ni(o.outM)})]})]}),Object(ws.jsx)("td",{children:d&&Object(ws.jsx)("a",{href:"".concat(d.explorerUrl,"/tx/").concat(i),target:"_blank",rel:"noreferrer",children:Object(ws.jsx)("button",{className:"primary-market-transactions--link",children:"View on BscScan"})})})]},i):null}))})]})}),Object(ws.jsx)(Xs,{pageSize:o.pageSize,pageIndex:o.pageIndex,totalSize:l,onChangePageIndex:function(t){e.setState((function(e){return{pagination:b.a.set(e.pagination,"pageIndex",t)}}),(function(){e.mainNode&&e.mainNode.scrollIntoView({behavior:"smooth"}),e._getData()}))}})]})})}}]),n}(a.Component);Si.defaultProps={defaultEventFilterString:""};var Ci=Object(o.c)((function(e){return{wallet:e.wallet,fundItems:e.fund.items,primaryMarketAccountEvent:e.primaryMarket.account.event}}))(Si),Ti={CREATION:"CREATION",REDEMPTION:"REDEMPTION"},Ei=function(){var e=sessionStorage.createRedeemType;return h.a.keys(Ti).includes(e)?e:Ti.CREATION},Mi=function(e){sessionStorage.createRedeemType=e},Bi=function(){var e=sessionStorage.createRedeemSelectedFundAddress;return h.a.isEmpty(e)?null:e},Ri=function(e){sessionStorage.createRedeemSelectedFundAddress=e},Ii=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={type:Ei(),selectedFundAddress:Bi(),creationAmountInput:"",redemptionAmountInput:""},a._mounted=!1,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"handleClickCreateButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u,d,m;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,a=t.fundItems,s=this.state,r=s.selectedFundAddress,i=s.creationAmountInput,o=a[r],c=Jt(r),h.a.isNil(o)||h.a.isNil(c)){e.next=24;break}return l=h.a.has(o,"assets.underlyingToken.symbol")?o.assets.underlyingToken.symbol:null,u=F[l]||"",e.prev=7,e.next=10,c.primaryMarket.create(h.a.toString(i));case 10:if(d=e.sent,!h.a.has(d,"hash")){e.next=16;break}this.setState({creationAmountInput:""}),n(Ba({transactionResponse:d,title:"Create ".concat(u,"QUEEN"),successMessage:"You can claim after settlement".concat(h.a.has(o,"summary.currentDay")?" on ".concat(j()(o.summary.currentDay).add(15,"minutes").format("D MMM, HH:mm")):"")})),e.next=17;break;case 16:throw new Error("Cannot parse transaction's hash");case 17:e.next=24;break;case 19:e.prev=19,e.t0=e.catch(7),m=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:m}))),console.error("CreateRedeem handleClickCreateButton error: ",m);case 24:case"end":return e.stop()}}),e,this,[[7,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleClickRedeemButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u,d;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,a=t.fundItems,s=this.state,r=s.selectedFundAddress,i=s.redemptionAmountInput,o=a[r],c=Jt(r),h.a.isNil(o)||h.a.isNil(c)){e.next=23;break}return l=h.a.has(o,"assets.underlyingToken.symbol")?o.assets.underlyingToken.symbol:null,e.prev=6,e.next=9,c.primaryMarket.redeem(h.a.toString(i));case 9:if(u=e.sent,!h.a.has(u,"hash")){e.next=15;break}this.setState({redemptionAmountInput:""}),n(Ba({transactionResponse:u,title:"Redeem for ".concat(l||"Underlying"),successMessage:"You can claim after settlement".concat(h.a.has(o,"summary.currentDay")?" on ".concat(j()(o.summary.currentDay).add(15,"minutes").format("D MMM, HH:mm")):"")})),e.next=16;break;case 15:throw new Error("Cannot parse transaction's hash");case 16:e.next=23;break;case 18:e.prev=18,e.t0=e.catch(6),d=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:d}))),console.error("CreateRedeem handleClickRedeemButton error: ",d);case 23:case"end":return e.stop()}}),e,this,[[6,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"Creation",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.fundItems,r=t.primaryMarketItems,i=t.wallet,o=t.provider,c=this.state,l=c.selectedFundAddress,u=c.creationAmountInput,d=s[l],m=h.a.has(d,"primaryMarketAddress")?r[d.primaryMarketAddress]:null,p=h.a.has(d,"assets.underlyingToken")?d.assets.underlyingToken:null,b=h.a.isNil(p)?null:p.symbol,f=F[b]||"",g=h.a.has(d,"assets.trancheM.symbol")?d.assets.trancheM.symbol:null,k=h.a.has(i.balance,"fundTokens.".concat(l))?i.balance.fundTokens[l]:null,x=h.a.has(k,"underlyingToken")?k.underlyingToken:null,y=h.a.has(d,"summary.isPrimaryMarketActive")&&!1===d.summary.isPrimaryMarketActive,O=!h.a.isNil(x)&&v()(u||0).gt(x),A=h.a.has(m,"variables.minCreationUnderlying")&&Number(u)<Number(m.variables.minCreationUnderlying),N=ji(d,u),w=h.a.isNil(o.blockTimestamp)?j()():j()(o.blockTimestamp),S=se(w);return Object(ws.jsxs)("div",{className:"create-redeem--create",children:[Object(ws.jsxs)("div",{className:"create-redeem--create--main",children:[Object(ws.jsxs)("div",{className:"create-redeem--create--input-row",children:[Object(ws.jsx)("div",{className:"create-redeem--create--input-row--fund-selector",children:Object(ws.jsx)(oi,{type:"UNDERLYING",selectedFundAddress:l,onChangeFundAddress:function(t){Ri(t),e.setState({selectedFundAddress:Bi()})}})}),Object(ws.jsx)("input",{disabled:h.a.isNil(d),type:"number",min:0,placeholder:"0.0",value:u,onChange:function(t){var n=te(t.target.value);!h.a.isNil(p)&&n>p.decimal||e.setState({creationAmountInput:t.target.value})}})]}),Object(ws.jsxs)("div",{className:"create-redeem--create--info-row clearfix",children:[Object(ws.jsxs)("div",{className:"create-redeem--create--info-row--max-value",children:["Wallet: ",h.a.isNil(d)&&h.a.reduce(s,(function(e,t){var n=h.a.has(t,"assets.underlyingToken.symbol")?t.assets.underlyingToken.symbol:null,a=h.a.has(i.balance,"fundTokens.".concat(t.fundAddress,".underlyingToken"))?i.balance.fundTokens[t.fundAddress].underlyingToken:null;return e.push("".concat(h.a.isNil(a)?"--":v()(a||0).eq(0)?"0.0":v()(a).toFixed(3,1)," ").concat(n||"")),e}),[]).join(", "),!h.a.isNil(d)&&Object(ws.jsxs)(a.Fragment,{children:[h.a.isNil(x)?"--":v()(x||0).eq(0)?"0.0":v()(x).toFixed(3,1)," ".concat(b||"Underlying"),!h.a.isNil(i.address)&&Object(ws.jsxs)(a.Fragment,{children:[" - ",Object(ws.jsx)("button",{className:"button-style-7",onClick:function(){e.setState({creationAmountInput:v()(x||0).gt(0)?x:"0"})},children:"Max"})]})]})]}),h.a.has(m,"variables.minCreationUnderlying")&&!h.a.isEmpty(m.variables.minCreationUnderlying)&&Object(ws.jsx)("span",{className:"create-redeem--create--info-row--right-section",children:"Min: ".concat(m.variables.minCreationUnderlying)})]}),Object(ws.jsx)("div",{className:"create-redeem--create--arrow",children:Object(ws.jsx)(Rs.c,{})}),Object(ws.jsxs)("div",{className:"create-redeem--create--estimated-receiving",children:[h.a.isNil(d)?Object(ws.jsx)("img",{alt:L.M.name,src:L.M.icon}):Object(ws.jsx)("img",{alt:g,src:U[g]}),Object(ws.jsxs)("label",{children:[h.a.isNil(N)?"":"".concat(Number(N)>0?J({number:N,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0")," ".concat(F[b]||"","QUEEN"),h.a.has(d,"summary")&&Number(d.summary.totalShares)>0&&Object(ws.jsx)(Is,{contentComponent:Object(ws.jsxs)(a.Fragment,{children:["The amount of ".concat(f,"QUEEN to create depends on total tokens (").concat(f,"QUEEN, ").concat(f,"BISHOP and ").concat(f,"ROOK) supply and total ").concat(b||"underlying"," deposited as of last settlement:"),Object(ws.jsx)("br",{}),Object(ws.jsx)("br",{}),"".concat(f,"QUEEN amount to create = ").concat(b||"underlying"," amount to deposit \xd7 Total tokens supply \xf7 [Total ").concat(b||"underlying"," deposited \xd7 (1 - Daily protocol fee%)]"),Object(ws.jsx)("br",{}),Object(ws.jsx)("br",{}),"Currently, total tokens supply is ".concat(J({number:d.summary.totalShares,shouldApplyFloorValue:!0,shouldReturnLocalString:!0})," \n                                        and ").concat(b||"underlying"," deposited is ").concat(J({number:d.summary.totalUnderlying,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:4})),Object(ws.jsx)("br",{}),"Daily protocol fee: ".concat(v()(d.dailyProtocolFeeRate).times(100).toFixed(6),"%")]})})]})]})]}),Object(ws.jsx)("div",{className:"create-redeem--create--message",children:"Token ".concat(F[b]||"","QUEEN created will be claimable after ").concat(j()(S).format("D MMM, HH:mm"))}),h.a.isNil(i.address)?Object(ws.jsx)("button",{className:"create-redeem--create--button button-style-5",onClick:Object(Se.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(_e(!0));case 1:case"end":return e.stop()}}),e)}))),children:"Connect wallet"}):h.a.isNil(d)?Object(ws.jsx)("button",{className:"create-redeem--create--button button-style-5",disabled:!0,children:"Create QUEEN"}):Object(ws.jsx)(sr,{className:"create-redeem--create--button button-style-5",tokenDisplayName:b||"Underlying",tokenAddress:h.a.has(p,"address")?p.address:null,spenderAddress:h.a.has(d,"primaryMarketAddress")?d.primaryMarketAddress:null,allowanceAmount:h.a.has(i,"allowance.fundTokens.".concat(l,".primaryMarketUnderlying"))?i.allowance.fundTokens[l].primaryMarketUnderlying:null,amountToSpend:u,fetchAllowanceDisabled:!0,signTransactionLabel:y?"Primary Market is inactive":xa(i.providerNetwork)?h.a.toString(u).length>0&&A?"Amount smaller than minimum":O?"Insufficient ".concat(h.a.upperCase(b||"")," balance"):"Create ".concat(b?"".concat(F[b],"QUEEN"):"QUEEN"):"Wrong network",signTransactionDisabled:y||A||O||h.a.isNil(d)||!xa(i.providerNetwork),onClickSignTransaction:function(){e.handleClickCreateButton()}})]})}},{key:"Redemption",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.fundItems,r=t.wallet,i=t.provider,o=this.state,c=o.selectedFundAddress,l=o.redemptionAmountInput,u=s[c],d=h.a.has(u,"assets.trancheM")?u.assets.trancheM:null,m=h.a.has(u,"assets.underlyingToken.symbol")?u.assets.underlyingToken.symbol:null,p=F[m]||"",b=h.a.has(U,m)?U[m]:null,f=h.a.has(u,"summary.isPrimaryMarketActive")&&!1===u.summary.isPrimaryMarketActive,g=h.a.has(r.balance,"fundTokens.".concat(c))?r.balance.fundTokens[c]:null,k=h.a.has(g,"tokenM")?g.tokenM:null,x=!h.a.isNil(k)&&v()(l||0).gt(k),y=ki(u,l),O=h.a.isNil(i.blockTimestamp)?j()():j()(i.blockTimestamp),A=se(O);return Object(ws.jsxs)("div",{className:"create-redeem--redemption",children:[Object(ws.jsxs)("div",{className:"create-redeem--redemption--main",children:[Object(ws.jsxs)("div",{className:"create-redeem--redemption--input-row",children:[Object(ws.jsx)("div",{className:"create-redeem--create--input-row--fund-selector",children:Object(ws.jsx)(oi,{type:"TOKEN_M",selectedFundAddress:c,onChangeFundAddress:function(t){Ri(t),e.setState({selectedFundAddress:Bi()})}})}),Object(ws.jsx)("input",{disabled:h.a.isNil(u),type:"number",min:0,placeholder:"0.0",value:l,onChange:function(t){var n=te(t.target.value);!h.a.isNil(d)&&n>d.decimal||e.setState({redemptionAmountInput:t.target.value})}})]}),Object(ws.jsx)("div",{className:"create-redeem--redemption--info-row clearfix",children:Object(ws.jsxs)("div",{className:"create-redeem--redemption--info-row--max-value",children:["Wallet: ",h.a.isNil(k)?"--":v()(k||0).gt(0)?J({number:k,shouldApplyFloorValue:!0,shouldReturnLocalString:!0}):"0.0",h.a.isNil(m)?" QUEEN":" ".concat(F[m]||"","QUEEN"),!h.a.isNil(r.address)&&!h.a.isNil(u)&&Object(ws.jsxs)(a.Fragment,{children:[" - ",Object(ws.jsx)("button",{className:"button-style-7",onClick:function(){e.setState({redemptionAmountInput:v()(k||0).gt(0)?k:"0"})},children:"Max"})]})]})}),Object(ws.jsx)("div",{className:"create-redeem--create--arrow",children:Object(ws.jsx)(Rs.c,{})}),Object(ws.jsxs)("div",{className:"create-redeem--redemption--estimated-receiving",children:[b?Object(ws.jsx)("img",{alt:m||"Undelrying",src:b}):Object(ws.jsx)(Rs.j,{}),Object(ws.jsxs)("label",{children:[h.a.isNil(u)?"0.0":h.a.isNil(y)?"":"".concat(v()(y).gt(0)?J({number:y,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:3}):"0.0"),!h.a.isNil(m)&&" ".concat(m),h.a.has(u,"summary")&&Number(u.summary.totalShares)>0&&Object(ws.jsx)(Is,{contentComponent:Object(ws.jsxs)(a.Fragment,{children:["The amount of ".concat(m||"underlying"," to receive depends on total tokens (").concat(p,"QUEEN, ").concat(p,"BISHOP and ").concat(p,"ROOK) supply and total ").concat(m||"underlying"," deposited as of last settlement:"),Object(ws.jsx)("br",{}),Object(ws.jsx)("br",{}),"".concat(m||"Underlying"," amount to receive = ").concat(p,"QUEEN amount to redeem \xd7 (1 - Redemption fee%) \xd7 Total ").concat(m||"underlying"," deposited \xd7 (1 - Daily protocol fee%) \xf7 Total tokens supply"),Object(ws.jsx)("br",{}),Object(ws.jsx)("br",{}),"Currently, total tokens supply is ".concat(J({number:u.summary.totalShares,shouldApplyFloorValue:!0,shouldReturnLocalString:!0})," \n                                        and ").concat(m||"underlying"," deposited is ").concat(J({number:u.summary.totalUnderlying,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:4})),Object(ws.jsx)("br",{}),"Daily Protocol Fee: ".concat(v()(u.dailyProtocolFeeRate||0).times(100).toFixed(6),"%")]})})]})]})]}),Object(ws.jsx)("div",{className:"create-redeem--redemption--message",children:"".concat(m||"Assets"," redeemed for will be claimable after ").concat(j()(A).format("D MMM, HH:mm"))}),h.a.isNil(r.address)?Object(ws.jsx)("button",{className:"create-redeem--create--button button-style-5",onClick:function(){n(_e(!0))},children:"Connect wallet"}):Object(ws.jsx)("button",{className:"create-redeem--redemption--button button-style-5",disabled:f||Number(l)<=0||h.a.isNil(u)||!xa(r.providerNetwork)||x,onClick:function(){e.handleClickRedeemButton()},children:f?"Primary Market is inactive":xa(r.providerNetwork)?x?"Insufficient Queen balance":"Redeem ".concat(m?" for ".concat(m):""):"Wrong network"})]})}},{key:"Types",value:function(){var e=this,t=this.props,n=t.fundItems,a=t.primaryMarketItems,s=this.state,r=s.type,i=n[s.selectedFundAddress],o=h.a.isNil(i)?null:a[i.primaryMarketAddress];return Object(ws.jsxs)("div",{className:"create-redeem--types-wrapper clearfix",children:[Object(ws.jsx)("div",{className:"create-redeem--types clearfix",children:h.a.map(Ti,(function(t){return Object(ws.jsx)("button",{className:t===r?"selected":null,onClick:function(){Mi(t),e.setState({type:Ei()})},children:t===Ti.CREATION?"Create":"Redeem"},t)}))}),Object(ws.jsxs)("div",{className:"create-redeem--types-wrapper--fee",children:["Fee: ",r===Ti.CREATION?"0.0%":r===Ti.REDEMPTION&&h.a.has(o,"variables.redemptionFeeRate")&&!h.a.isEmpty(o.variables.redemptionFeeRate)?"".concat(v()(o.variables.redemptionFeeRate).times(100).toFixed(2),"%"):"---"]})]})}},{key:"render",value:function(){var e=this.state.type;return Object(ws.jsxs)("div",{className:"create-redeem",children:[this.Types(),e===Ti.CREATION&&this.Creation(),e===Ti.REDEMPTION&&this.Redemption()]})}}]),n}(a.Component);var Di=Object(o.c)((function(e){return{fundItems:e.fund.items,primaryMarketItems:e.primaryMarket.items,wallet:e.wallet,provider:e.provider}}))(Ii),Pi=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e))._mounted=!1,a.handleClickWindow=a.handleClickWindow.bind(Object(Ms.a)(a)),a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,setTimeout((function(){e._mounted&&window.addEventListener("click",e.handleClickWindow)}),500)}},{key:"componentWillUnmount",value:function(){this._mounted=!1,window.removeEventListener("click",this.handleClickWindow)}},{key:"handleClickWindow",value:function(){this._mounted&&this.props.onClickClose()}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.onClickClose;return Object(ws.jsxs)(Fs.a,{overlayClassName:"youtube-modal--overlay",className:"youtube-modal",isOpen:!0,children:[Object(ws.jsx)("button",{className:"youtube-modal--close-button",onClick:function(e){e.stopPropagation(),n()},children:Object(ws.jsx)(Rs.p,{})}),Object(ws.jsx)("div",{className:"youtube-modal--main centered",onClick:function(e){e.stopPropagation()},children:Object(ws.jsx)("iframe",{width:"100%",height:"100%",src:t,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}}]),n}(a.Component),Li=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"Item",value:function(e){var t=e.icon,n=e.label,a=e.subLabel,s=e.amount;return Object(ws.jsxs)("div",{className:"wallet-balance--item",children:[t&&Object(ws.jsx)("img",{className:"wallet-balance--item--icon",src:t}),Object(ws.jsx)("label",{className:"wallet-balance--item--label",children:n}),a&&Object(ws.jsx)("span",{className:"wallet-balance--item--sub-label",children:"[".concat(a,"]")}),Object(ws.jsx)("span",{className:"wallet-balance--item--amount",children:Number(s)>0?J({number:s,shouldApplyFloorValue:!0,shouldReturnLocalString:!0}):"0.0"})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.wallet,s=t.fundItems,r=null,i=null;if(!h.a.isEmpty(s)){var o=Object.values(s)[0];r=h.a.has(o,"assets.quoteToken.symbol")?o.assets.quoteToken.symbol:null,i=h.a.has(n,"balance.fundTokens.".concat(o.fundAddress,".quoteToken"))?n.balance.fundTokens[o.fundAddress].quoteToken:null}return Object(ws.jsxs)("div",{className:"wallet-balance",children:[h.a.map(s,(function(t,s){var r=h.a.has(t,"assets.underlyingToken.symbol")?t.assets.underlyingToken.symbol:null,i=h.a.has(n,"balance.fundTokens.".concat(s,".underlyingToken"))?n.balance.fundTokens[s].underlyingToken:null;return v()(i||0).gt(0)?Object(ws.jsx)(a.Fragment,{children:e.Item({icon:U[r],label:r,amount:i})},"".concat(s,"--underlying")):null})),!h.a.isEmpty(r)&&v()(i||0).gt(0)&&this.Item({icon:U[r],label:r,amount:i}),this.Item({icon:U.CHESS,label:"CHESS",amount:n.balance.chess}),h.a.map(s,(function(t,s){return h.a.map(L,(function(r,i){var o=h.a.has(t,"assets.underlyingToken.symbol")?t.assets.underlyingToken.symbol:null,c=h.a.has(t,"assets.tranche".concat(i,".symbol"))?t.assets["tranche".concat(i)].symbol:null,l=h.a.has(n,"balance.fundTokens.".concat(s,".token").concat(i))?n.balance.fundTokens[s]["token".concat(i)]:null;return v()(l||0).gt(0)?Object(ws.jsx)(a.Fragment,{children:e.Item({icon:U[c],label:"".concat(F[o]||"").concat(r.name),amount:l})},"".concat(s,"--").concat(i)):null}))}))]})}}]),n}(a.Component);var Fi=Object(o.c)((function(e){return{wallet:e.wallet,fundItems:e.fund.items}}))(Li),Ui=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.isFetchingProtocolData,a=e.provider,s=e.walletTokens,r=e.shouldHideWallet,i=a.connected;return Object(ws.jsxs)("div",{className:"footer",children:[Object(ws.jsxs)("div",{className:"footer--left-content clearfix",children:[!r&&Object(ws.jsxs)("div",{className:"footer--wallet-balance",children:[Object(ws.jsx)("div",{className:"footer--wallet-balance--title",children:"WALLET"}),Object(ws.jsx)("div",{className:"footer--wallet-balance--main",children:Object(ws.jsx)(Fi,{tokenKeys:s})})]}),Object(ws.jsx)("button",{className:"footer--refresh-button",title:"REFRESH",onClick:function(){t(Xa())},children:Object(ws.jsx)(Zs,{isLoading:n,shouldAlwaysShow:!0})})]}),Object(ws.jsx)("div",{className:"footer--right-content",children:Object(ws.jsx)("div",{className:"footer--connection vertical-centered"+(i?" connected":""),title:a.blockNumber?"Block #: ".concat(a.blockNumber):null})})]})}}]),n}(a.Component);Ui.defaultProps={walletTokens:[],shouldHideWallet:!1};var Hi=Object(o.c)((function(e){return{isFetchingProtocolData:e.fund.isFetchingProtocolData,provider:e.provider}}))(Ui),Vi={CREATE_REDEEM:"Create & Redeem",SPLIT_MERGE:"Split & Merge",TRANSACTION:"Transaction logs"},Wi=function(){var e=sessionStorage.primaryMarketPageTab,t=h.a.keys(Vi);return t.includes(e)?e:t[0]},Yi=function(e){sessionStorage.primaryMarketPageTab=e},Ki=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={tab:Wi(),shouldShowYoutubeModal:!1},a}return Object(Os.a)(n,[{key:"_getPageAnnouncements",value:function(){var e=this.props,t=e.provider,n=e.fundItems,s=h.a.isNil(t.blockTimestamp)?j()():j()(t.blockTimestamp),r=!h.a.isEmpty(n)&&h.a.every(n,(function(e){return h.a.has(e,"summary.isPrimaryMarketActive")&&e.summary.isPrimaryMarketActive})),i=h.a.filter(n,(function(e){return h.a.has(e,"summary.isFundActive")&&h.a.has(e,"summary.isPrimaryMarketActive")&&h.a.has(e,"summary.currentDay")&&e.summary.isFundActive&&!1===e.summary.isPrimaryMarketActive})),o=h.a.minBy(i,(function(e){return j()(e.summary.currentDay).valueOf()})),c=[];if(r){var l=Object.values(n)[0].summary.currentDay;j()(s).add(30,"minutes").isSameOrAfter(l)&&c.push(pi({iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:"Primary Market will be closed daily at ".concat(j()(l).format("HH:mm")," for about 15-20 min"),captionComponent:Object(ws.jsx)(ri.a,{date:j()(l).toISOString(),renderer:function(e){var t=e.hours,n=e.minutes,a=e.seconds;return e.completed?null:"Closing in ".concat(0===t?"00":t<10?"0".concat(t):t,":").concat(0===n?"00":n<10?"0".concat(n):n,":").concat(0===a?"00":a<10?"0".concat(a):a)}})}))}else if(!h.a.isNil(o)){var u=o.summary,d=u.fundActivityStartTime,m=u.currentDay;if(s.isBefore(d))c.push(pi({iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:"Primary Market is undergoing settlement and will be available after ".concat(j()(d).format("D MMMM, HH:mm"))}));else{var p=h.a.compact(h.a.map(n,(function(e,t){var n=ie(t);return(n.shouldShowUpperRebalanceWarning||n.shouldShowLowerRebalanceWarning)&&h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:null})));c.push(pi({iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:Object(ws.jsxs)(a.Fragment,{children:["Primary Market is closed daily between ".concat(j()(m).format("HH:mm"),"-").concat(j()(m).add(15,"minutes").format("HH:mm"),". "),h.a.isEmpty(p)?"":"If Rebalance on ".concat(p.join("/")," is triggered during this period, relating Primary Market will remain closed until the following day ").concat(j()(m).add(12,"hours").format("D MMM, HH:mm"),". ")]})}))}}return c}},{key:"render",value:function(){var e=this,t=this.state,n=t.tab,s=t.shouldShowYoutubeModal,r=this._getPageAnnouncements();return Object(ws.jsxs)("div",{className:"primary-market-page page",children:[Object(ws.jsxs)(Ts.a,{children:[Object(ws.jsx)("title",{children:"Primary Market - Tranchess"}),Object(ws.jsx)("meta",{name:"description",content:"Deposit your ETH and BTC and create QUEEN to enjoy the extra yield of CHESS tokens."})]}),Object(ws.jsxs)("div",{className:"page--body",children:[Object(ws.jsx)(fi,{announcements:r}),Object(ws.jsx)("div",{className:"primary-market-page--title",children:"Primary Market"}),Object(ws.jsxs)("div",{className:"primary-market-page--tabs",children:[Object(ws.jsx)("div",{children:h.a.map(Vi,(function(t,a){return Object(ws.jsx)("button",{className:"primary-market-page--tab"+(a===n?" selected":""),onClick:function(){Yi(a),e.setState({tab:Wi()})},children:t},a)}))}),Object(ws.jsxs)("button",{className:"primary-market-page--youtube-link",onClick:function(){e.setState({shouldShowYoutubeModal:!0})},children:[Object(ws.jsx)(Rs.n,{}),Object(ws.jsx)("span",{children:"How Create & Redeem works"})]})]}),Object(ws.jsxs)("div",{className:"page--main",children:["CREATE_REDEEM"===n&&Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(Di,{}),Object(ws.jsx)(Ai,{})]}),"SPLIT_MERGE"===n&&Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(di,{direction:ci}),Object(ws.jsx)(di,{direction:li})]}),"TRANSACTION"===n&&Object(ws.jsx)(a.Fragment,{children:Object(ws.jsx)(Ci,{defaultEventFilterString:""})})]})]}),Object(ws.jsx)(Hi,{walletTokens:["underlyingToken","tokenM","tokenA","tokenB"],shouldHideStakedBalance:!0}),s&&Object(ws.jsx)(Pi,{url:"https://www.youtube.com/embed/BW2yunp-Y-Q",onClickClose:function(){e.setState({shouldShowYoutubeModal:!1})}})]})}}],[{key:"getDerivedStateFromProps",value:function(){return{tab:Wi()}}}]),n}(a.Component);var zi=Object(xs.f)(Object(o.c)((function(e){return{provider:e.provider,fundItems:e.fund.items,historyNAVs:e.fund.historyNAVs}}))(Ki)),Gi=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"TokenInfo",value:function(e){var t=e.label,n=void 0===t?"":t,a=e.component;return Object(ws.jsxs)("div",{children:[Object(ws.jsx)("label",{children:n}),Object(ws.jsx)("div",{children:a})]})}},{key:"render",value:function(){var e=this.props.fundItem,t=e.fundAddress,n=e.assets,s=h.a.has(n,"underlyingToken")?n.underlyingToken:null,r=h.a.has(s,"symbol")?s.symbol:null,i=F[r]||"",o=h.a.has(n,"quoteToken")?n.quoteToken:null,c=h.a.has(n,"trancheM")?n.trancheM:null,l=h.a.has(n,"trancheA")?n.trancheA:null,u=h.a.has(n,"trancheB")?n.trancheB:null,d="The estimated annualized percentage yield of CHESS rewards, compounded manually on a daily basis. Your actual APY depends on your boost factor.";if(s&&o&&c&&l&&u){var m=de({fundItem:e}),p=ue(t),b=le(t);return Object(ws.jsxs)("div",{className:"fund-overview",children:[Object(ws.jsxs)("div",{className:"fund-overview--header clearfix",children:[Object(ws.jsx)("div",{className:"fund-overview--title",children:"".concat(s.symbol," Fund")}),Object(ws.jsx)(ks.b,{to:"/compare?fund=".concat(t),children:Object(ws.jsxs)("button",{className:"fund-overview--compare-link",onClick:function(){window.gtag&&window.gtag("event","visit_compare_tokens",{source:"Home Page"})},children:[Object(ws.jsx)(Rs.k,{}),"Compare tokens"]})})]}),Object(ws.jsxs)("div",{className:"fund-overview--main",children:[Object(ws.jsx)(Us,{className:"token-m",icon:U[c.symbol],name:"".concat(F[s.symbol]).concat(L.M.name),caption:oe(e,"M"),description:ce(e,"M"),lastNAV:b?b.M:null,infoComponent:this.TokenInfo({label:"APY",component:h.a.isNil(m.stakingAPR.M)||2!==h.a.size(m.stakingAPR.M)||!v()(m.stakingAPR.M[0]||0).gt(0)||h.a.isNil(m.APY.M)||2!==h.a.size(m.APY.M)?"---":Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("span",{className:"value",children:"".concat(v()(m.APY.M[0]).times(100).toFixed(1,1),"%")}),Object(ws.jsx)("span",{className:"symbol",children:"~"}),Object(ws.jsx)("span",{className:"value",children:"".concat(v()(m.APY.M[1]).times(100).toFixed(1,1),"%")}),Object(ws.jsx)(Is,{contentComponent:d})]})}),actionComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(ks.b,{to:"/primary",onClick:function(e){e.stopPropagation(),Yi("CREATE_REDEEM"),Mi("CREATION"),Ri(t)},children:Object(ws.jsxs)("button",{className:"button-style-5",children:["Create with ",h.a.has(s,"symbol")&&Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:U[s.symbol]}),s.symbol]})]})}),Object(ws.jsx)(ks.b,{to:"/swap",children:Object(ws.jsxs)("button",{className:"button-style-6",onClick:function(){Xr(t),Zr("M")},children:["Trade with ",h.a.has(o,"symbol")&&Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:U[o.symbol]}),o.symbol]})]})})]}),addToWalletComponent:Object(ws.jsx)(Ys,{tokenSymbol:c.symbol,tokenAddress:c.address,tokenDecimals:c.decimal}),learnMoreLink:"https://docs.tranchess.com/faq/general"}),Object(ws.jsx)(Us,{className:"token-a",icon:U[l.symbol],name:"".concat(F[s.symbol]).concat(L.A.name),caption:oe(e,"A"),description:ce(e,"A"),lastNAV:b?b.A:null,infoComponent:this.TokenInfo({label:"APY",component:h.a.isNil(m.stakingAPR.A)||2!==h.a.size(m.stakingAPR.A)||!v()(m.stakingAPR.A[0]||0).gt(0)||h.a.isNil(m.APY.A)||2!==h.a.size(m.APY.A)?"---":Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("span",{className:"value",children:"".concat(v()(m.APY.A[0]).times(100).toFixed(1,1),"%")}),Object(ws.jsx)("span",{className:"symbol",children:"~"}),Object(ws.jsx)("span",{className:"value",children:"".concat(v()(m.APY.A[1]).times(100).toFixed(1,1),"%")}),Object(ws.jsx)(Is,{contentComponent:d})]})}),actionComponent:Object(ws.jsx)(a.Fragment,{children:Object(ws.jsx)(ks.b,{to:"/swap",children:Object(ws.jsxs)("button",{className:"button-style-6",onClick:function(){Xr(t),Zr("A")},children:["Trade with ",h.a.has(o,"symbol")&&Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:U[o.symbol]}),o.symbol]})]})})}),addToWalletComponent:Object(ws.jsx)(Ys,{tokenSymbol:l.symbol,tokenAddress:l.address,tokenDecimals:l.decimal}),learnMoreLink:"https://docs.tranchess.com/faq/general"}),Object(ws.jsx)(Us,{className:"token-b",icon:U[u.symbol],name:"".concat(F[s.symbol]).concat(L.B.name),caption:oe(e,"B"),description:ce(e,"B"),lastNAV:b?b.B:null,infoComponent:this.TokenInfo({label:"Leverage",component:h.a.isNil(p)?"---":Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("span",{className:"value",children:"".concat(v()(p).toFixed(2),"x")}),Object(ws.jsx)(Is,{contentComponent:"Token ".concat(i,"ROOK pays daily interest & utilizes Token ").concat(i,"BISHOP to become a leveraged tracker of ").concat(s?s.symbol:"",".")})]})}),actionComponent:Object(ws.jsx)(a.Fragment,{children:Object(ws.jsx)(ks.b,{to:"/swap",children:Object(ws.jsxs)("button",{className:"button-style-6",onClick:function(){Xr(t),Zr("B")},children:["Trade with ",h.a.has(o,"symbol")&&Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:U[o.symbol]}),o.symbol]})]})})}),addToWalletComponent:Object(ws.jsx)(Ys,{tokenSymbol:u.symbol,tokenAddress:u.address,tokenDecimals:u.decimal}),learnMoreLink:"https://docs.tranchess.com/faq/general"})]})]})}}}]),n}(a.Component);var qi=Object(o.c)((function(e){return{historyNAVs:e.fund.historyNAVs,underlyingTokenTwaps:e.fund.underlyingTokenTwaps}}))(Gi),_i=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"ChessCirculatingSupply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.chessSupply;return h.a.has(t,"circulating")?Object(ws.jsxs)(a.Fragment,{children:["Circulating supply: ".concat(e?Z(t.circulating,1):J({number:t.circulating,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:0})),Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:[e&&Object(ws.jsxs)(a.Fragment,{children:["The total circulating supply of CHESS token is ".concat(J({number:t.circulating,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:0})),Object(ws.jsx)("br",{})]}),"Read more about ",Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/chess-token"},target:"_blank",children:"tokenomics"})]})})]}):""}},{key:"render",value:function(){var e=this.props.fundItems,t=X(),n=Q();return Object(ws.jsxs)("div",{className:"introduction",children:[Object(ws.jsxs)("div",{className:"introduction--top",children:[Object(ws.jsxs)("div",{className:"introduction--title",children:["Yield Enhancing Asset Tracker With ",Object(ws.jsx)("br",{}),"Varied Risk-Return Solutions"]}),Object(ws.jsxs)("div",{className:"introduction--content clearfix",children:[Object(ws.jsx)(Ps,{}),!1]})]}),Object(ws.jsx)("div",{className:"introduction--fund-overview clearfix",children:h.a.map(e,(function(e,t){return Object(ws.jsx)("div",{className:"introduction--fund-overview--item",children:Object(ws.jsx)(qi,{fundItem:e})},t)}))}),Object(ws.jsxs)("div",{className:"introduction--chess",children:[Object(ws.jsx)("div",{className:"introduction--chess--title",children:"Governance Token"}),Object(ws.jsx)("div",{className:"introduction--chess--item",children:Object(ws.jsx)(Us,{className:"chess",icon:Es,name:"CHESS",nameRemarkComponent:this.ChessCirculatingSupply(!0),caption:this.ChessCirculatingSupply(!0),description:"<section>CHESS is the governance token of Tranchess Community. You can harvest CHESS by staking Tranchess ETH and BTCB fund tokens in the protocol.</section>\n                                <section>By locking CHESS on Tranchess protocol, you obtain veCHESS, which is a representation of your long term investment in Tranchess, your voting rights and your voice in the community. veCHESS enables you to participate in governance voting, earn protocol fee rebate and boost your staking rewards to earn CHESS at a faster rate.</section>",learnMoreLink:"https://docs.tranchess.com/faq/vechess",infoComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsxs)("div",{children:[Object(ws.jsx)("label",{children:"Indicative APY"}),h.a.isNil(t)?Object(ws.jsx)("div",{children:"---"}):Object(ws.jsxs)("div",{children:[Object(ws.jsx)("span",{className:"value",children:"".concat(v()(t).times(100).toFixed(1,1),"%")}),Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:["Lock CHESS and be eligible for protocol rebate. The indicative annualized percentage yield is based on the last 7-day protocol income, CHESS token price, and the average lock duration, compounded manually on a weekly basis.",Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/chess-token#how-to-calculate-the-apy-for-staking-chess"},target:"_blank",children:"Learn more"})]})})]})]}),Object(ws.jsxs)("div",{children:[Object(ws.jsx)("label",{children:"Current Price"}),h.a.isNil(n)?Object(ws.jsx)("div",{children:"---"}):Object(ws.jsxs)("div",{children:[Object(ws.jsx)("span",{className:"value",children:"$".concat(v()(n).toFixed(2,1))}),Object(ws.jsx)(Is,{contentComponent:"CHESS token price is taken from PancakeSwap."})]})]})]}),actionComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(ks.b,{to:"/staking#detail",children:Object(ws.jsxs)("button",{className:"button-style-6",children:["Mine with ",Object(ws.jsxs)("span",{className:"coin-stack",children:[Object(ws.jsx)("img",{src:L.M.icon}),Object(ws.jsx)("img",{src:L.A.icon}),Object(ws.jsx)("img",{src:L.B.icon})]})]})}),Object(ws.jsx)(ks.b,{to:"/staking#locker",children:Object(ws.jsxs)("button",{className:"button-style-6",children:["Lock to earn ",Object(ws.jsxs)("span",{className:"coin-stack",children:[Object(ws.jsx)("img",{src:U.ETH}),Object(ws.jsx)("img",{src:U.BTC})]})]})})]}),addToWalletComponent:Object(ws.jsx)(Ys,{tokenSymbol:"CHESS",tokenAddress:"0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6",tokenDecimals:18})})})]})]})}}]),n}(a.Component);var Qi=Object(o.c)((function(e){return{fundItems:e.fund.items,chessSupply:e.governance.chessSupply,historyNAVs:e.fund.historyNAVs,underlyingTokenTwaps:e.fund.underlyingTokenTwaps,incomes:e.fund.incomes}}))(_i),Xi=n.p+"static/media/three-arrow-capital.7876adc9.svg",Ji=n.p+"static/media/spartan.ece13c7c.svg",Zi=n.p+"static/media/imo-ventures.6e750042.svg",$i=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"Block",value:function(e){var t=e.className,n=e.image;return Object(ws.jsx)("div",{className:"investors--block"+(t?" ".concat(t):""),children:Object(ws.jsx)("img",{src:n})})}},{key:"render",value:function(){return Object(ws.jsxs)("div",{className:"investors",children:[Object(ws.jsx)("div",{className:"investors--title",children:"Our investors"}),Object(ws.jsxs)("div",{className:"investors--main",children:[this.Block({className:"three-arrow-capital",image:Xi,link:"https://www.threearrowscap.com"}),this.Block({className:"spartan-group",image:Ji,link:"https://www.spartangroup.io"}),this.Block({className:"binance-lab",image:"data:image/png;base64,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",link:"https://academy.binance.com/en/glossary/binance-labs"}),this.Block({className:"long-hash",image:"data:image/png;base64,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",link:"https://www.longhash.com"}),this.Block({className:"imo-ventures",image:Zi,link:"https://www.imo.vc"})]})]})}}]),n}(a.Component),eo=n.p+"static/media/discord.98df18c3.svg",to=n.p+"static/media/telegram.2314e974.svg",no=n.p+"static/media/twitter.61e81bce.svg",ao=n.p+"static/media/medium.2c4f4dab.svg",so=n.p+"static/media/immunefi.908679c2.svg",ro=n.p+"static/media/certik.a324941c.svg",io=n.p+"static/media/github.8bce972e.svg",oo=n.p+"static/media/peck-shield.9221dac5.svg",co=n.p+"static/media/insurace.fe205c54.svg",lo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"SocialNetwork",value:function(e){var t=e.className,n=e.url,a=e.icon,s=e.name,r=e.subContent;return Object(ws.jsxs)("a",{className:"social-networks--link"+(t?" ".concat(t):""),target:"_blank",rel:"noreferrer nofollow",href:n,children:[a,s,r&&Object(ws.jsx)("sub",{children:r})]})}},{key:"Block",value:function(e){var t=e.className,n=e.label,a=e.component;return Object(ws.jsxs)("div",{className:"social-networks--block"+(t?" ".concat(t):""),children:[Object(ws.jsx)("label",{children:n}),Object(ws.jsx)("div",{className:"social-networks--block--component",children:a})]})}},{key:"render",value:function(){return Object(ws.jsx)("div",{className:"social-networks clearfix",children:Object(ws.jsxs)("div",{className:"social-networks--list clearfix",children:[this.Block({label:"Get latest updates",component:Object(ws.jsxs)(a.Fragment,{children:[this.SocialNetwork({url:"https://twitter.com/tranchess",name:"Twitter",icon:Object(ws.jsx)("img",{src:no})}),this.SocialNetwork({url:"https://medium.com/@tranchess",name:"Medium",icon:Object(ws.jsx)("img",{src:ao})}),this.SocialNetwork({url:"https://github.com/tranchess",name:"Github",icon:Object(ws.jsx)("img",{src:io})})]})}),this.Block({label:"Get community support",component:Object(ws.jsxs)(a.Fragment,{children:[this.SocialNetwork({url:"https://discord.gg/tKxAq78VBr",name:"Discord",icon:Object(ws.jsx)("img",{src:eo})}),this.SocialNetwork({url:"https://t.me/tranchess",name:"Telegram",icon:Object(ws.jsx)("img",{src:to})})]})}),Object(ws.jsxs)("div",{className:"social-networks--list--blocks",children:[this.Block({className:"bug-bounty",label:"Join Bug Bounty",component:Object(ws.jsx)(a.Fragment,{children:this.SocialNetwork({className:"immunefi",url:"https://immunefi.com/bounty/tranchess",icon:Object(ws.jsx)("img",{src:so})})})}),this.Block({className:"insurance",label:"Get cover on",component:Object(ws.jsx)(a.Fragment,{children:this.SocialNetwork({className:"insurace",url:"https://app.insurace.io/Insurance/Cart?id=87&referrer=".concat("159497163372294810180214247808389248226332457595","&chain=BSC"),icon:Object(ws.jsx)("img",{src:co})})})})]}),this.Block({label:"Audited by",component:Object(ws.jsxs)(a.Fragment,{children:[this.SocialNetwork({className:"peck-shield",url:"https://github.com/peckshield/publications/blob/master/audit_reports/PeckShield-Audit-Report-TranchessV2-v1.0.pdf",icon:Object(ws.jsx)("img",{src:oo}),subContent:"on 10 Sep, 2021"}),this.SocialNetwork({className:"peck-shield",url:"https://github.com/peckshield/publications/blob/master/audit_reports/PeckShield-Audit-Report-Tranchess-v1.0.pdf",icon:Object(ws.jsx)("img",{src:oo}),subContent:"on 28 Jun, 2021"}),this.SocialNetwork({className:"certik",url:"https://www.certik.org/projects/tranchess",icon:Object(ws.jsx)("img",{src:ro}),subContent:"on 3 Jun, 2021"})]})})]})})}}]),n}(a.Component),uo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).polling=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._getData(),this.polling=setInterval((function(){e._getData()}),1e4)}},{key:"componentWillUnmount",value:function(){this.polling&&window.clearInterval(this.polling)}},{key:"_getData",value:function(){var e=this.props.dispatch;e(es()),e(Kn())}},{key:"render",value:function(){return Object(ws.jsxs)("div",{className:"page home-page",children:[Object(ws.jsxs)(Ts.a,{children:[Object(ws.jsx)("title",{children:"Tranchess"}),Object(ws.jsx)("meta",{name:"description",content:"Tranchess is a yield enhancing asset tracker with varied risk-return solutions, which is inspired by tranche funds that cater to different class of investors with varying risk appetites."})]}),Object(ws.jsx)(Qi,{}),Object(ws.jsx)($i,{}),Object(ws.jsx)(lo,{})]})}}]),n}(a.Component);var mo=Object(o.c)((function(){return{}}))(uo),ho=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={shouldShowYoutubeModal:null},a._mounted=!1,a.polling=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,this._getData(),this.polling=setInterval((function(){e._getData()}),1e4)}},{key:"componentDidUpdate",value:function(e){var t=e.wallet,n=this.props.wallet;h.a.isEqual(t.address,n.address)&&h.a.isEqual(t.providerNetwork,n.providerNetwork)||this._getData()}},{key:"componentWillUnmount",value:function(){this._mounted=!1,this.polling&&window.clearInterval(this.polling)}},{key:"_getData",value:function(){var e=this.props,t=e.dispatch,n=e.wallet;t((function(e,t){var n=t().fund.items;h.a.forEach(n,(function(t){var n=t.exchangeAddress;Te()("/api/v1/exchanges/".concat(n,"/dailyVolume")).then((function(e){return e.json()})).then((function(t){h.a.isObject(t)&&e({type:mn,exchangeAddress:n,dailyVolume:{trancheM:Zt(t.trancheM),trancheA:Zt(t.trancheA),trancheB:Zt(t.trancheB)}})})).catch((function(e){console.error("fetchExchangeDailyVolume Error:",e)}))}))})),h.a.isNil(n.address)||t(jn())}},{key:"_getPageAnnouncements",value:function(){var e=this.props,t=e.provider,n=e.fundItems,s=h.a.isNil(t.blockTimestamp)?j()():j()(t.blockTimestamp),r=!h.a.isEmpty(n)&&h.a.every(n,(function(e){return h.a.has(e,"summary.isExchangeActive")&&e.summary.isExchangeActive})),i=h.a.filter(n,(function(e){return h.a.has(e,"summary.isFundActive")&&h.a.has(e,"summary.isExchangeActive")&&h.a.has(e,"summary.currentDay")&&e.summary.isFundActive&&!1===e.summary.isExchangeActive})),o=h.a.minBy(i,(function(e){return j()(e.summary.currentDay).valueOf()})),c=[];if(r){var l=Object.values(n)[0],u=j()(l.summary.currentDay).add(-60,"minutes");j()(s).add(30,"minutes").isSameOrAfter(u)&&c.push(pi({iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:"Swap will be closed daily from ".concat(u.format("HH:mm")," for about 90 minutes. Only Post-only orders can be placed in Advanced mode during close time."),captionComponent:Object(ws.jsx)(ri.a,{date:u.toISOString(),renderer:function(e){var t=e.hours,n=e.minutes,a=e.seconds;return e.completed?null:"Closing in ".concat(0===t?"00":t<10?"0".concat(t):t,":").concat(0===n?"00":n<10?"0".concat(n):n,":").concat(0===a?"00":a<10?"0".concat(a):a)}})}))}else if(!h.a.isNil(o)){var d=o.summary,m=d.exchangeActivityStartTime,p=d.currentDay;if(s.isBefore(m))c.push(pi({iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:"Swap is closed daily between ".concat(j()(m).add(-90,"minutes").format("HH:mm"),"-").concat(j()(m).format("HH:mm"),". Only Post-only orders can be placed in Advanced mode.")}));else{var b=h.a.compact(h.a.map(n,(function(e,t){var n=ie(t);return(n.shouldShowUpperRebalanceWarning||n.shouldShowLowerRebalanceWarning)&&h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:null})));c.push(pi({iconComponent:Object(ws.jsx)(Rs.m,{}),textComponent:Object(ws.jsxs)(a.Fragment,{children:["Swap is closed daily between ".concat(j()(p).add(-60,"minutes").format("HH:mm"),"-").concat(j()(p).add(30,"minutes").format("HH:mm"),". "),h.a.isEmpty(b)?"":"If Rebalance on ".concat(b.join("/")," is triggered during this period, relating Swap will remain closed until the following day ").concat(j()(p).add(12,"hours").format("D MMM, HH:mm"),". "),"Only Post-only orders can be placed in Advanced mode."]})}))}}return c}},{key:"render",value:function(){var e=this,t=this.state.shouldShowYoutubeModal,n=this._getPageAnnouncements();return Object(ws.jsxs)("div",{className:"trade-page page",children:[Object(ws.jsxs)(Ts.a,{children:[Object(ws.jsx)("title",{children:"Swap - Tranchess"}),Object(ws.jsx)("meta",{name:"description",content:"Trade QUEEN, BISHOP and ROOK with USDC \u30fb Achieve leveraged positions \xb7 Higher yields \u30fb No lock in period"})]}),Object(ws.jsx)("div",{className:"page--body",children:Object(ws.jsxs)("div",{className:"page--main",children:[Object(ws.jsx)(fi,{announcements:n}),Object(ws.jsxs)("div",{className:"trade-page--title clearfix",children:["Swap",Object(ws.jsxs)("button",{className:"trade-page--youtube-link",onClick:function(){e.setState({shouldShowYoutubeModal:!0})},children:[Object(ws.jsx)(Rs.n,{}),Object(ws.jsx)("span",{children:"How Swap works"})]}),Object(ws.jsx)(ks.b,{to:"/compare",children:Object(ws.jsxs)("button",{onClick:function(){window.gtag&&window.gtag("event","visit_compare_tokens",{source:"Swap Page"})},children:[Object(ws.jsx)(Rs.k,{}),"Compare tokens"]})})]}),Object(ws.jsx)(si,{})]})}),Object(ws.jsx)(Hi,{walletTokens:["quoteToken"]}),t&&Object(ws.jsx)(Pi,{url:"https://www.youtube.com/embed/lyTjsNZTuGs",onClickClose:function(){e.setState({shouldShowYoutubeModal:!1})}})]})}}]),n}(a.Component);var po=Object(o.c)((function(e){return{provider:e.provider,wallet:e.wallet,fundItems:e.fund.items,historyNAVs:e.fund.historyNAVs}}))(ho),bo=n.p+"static/media/binance.1422bc1e.svg",fo=n.p+"static/media/pancake.e078718e.svg",vo="data:image/png;base64,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",go="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAwQSURBVHgB7VlZjBzFGf6qj+mec+f03vau1wbbuyYQUMglIqMkIjjYEBGJhCTkMYryECkoQnkIIOUlD1GIhFBeeIQgBUUWMVESiUMiCBCEI9iLjWHva3Zmdu7pnumj8lePvb7nWC/4ZT6pp2u6q6rrr/rr+48Ceuihhx566KGHHj4nMHxG4O/cqiK6dwA1cwcUdwCcB+lSwCWXXjcgsxIc1GCzFRQKS+zQqzY+B2yLwPzE93eC1e+m4i107aNud5JwI2BM6bALl+p/CoktU3kBLnsFkv06O3D8DLYZWxaY/+97u2lQD1IXD1IvN174zm5YqJsm6jUDjm3Btm04jkNi8WYFiUGWZMiKAp+uQVFV6IEAFJ966WemwfhfYDvPsptenME2oGuB+YkjR2jlHqaWXwcHsy0LxWwO5UIBlUIJrmORYA3oNHZZAhSZLsYhSee/xt2m7K7LYFO5Qcps03zY8MGnafCHgogk4ghHo96EnB3pm6QFT7LJF57BNaBjgfl7947B5z5NTe7knCOfziCzsoJqsYCgxhGmy68DGikxY5d/hik+yME45MgwrNwMuFkmwa2Lv0GTYFrNq2IwVE2GYCyOxGA/EgP957r6G+rsV+yWY3PYAjoSmJ84ej+p1tO0opG1xSWk5+bRp1uIBEhI39XbyX1DUKLDkLTwVeu4ZglWdgZubeOK74XwuTKD4WhIjoxgcNdO8bhEs/oQO3DsGLpEW4H59H3foqX4Z8OsS3PT01DtAlIR7qlrK8iRQfgG9m/+NypVmJUyYgMDyCwtoi+ZInXVqWvX2/PO+gla9eJV+7NI7bMkeF2KYPfUJDRdt0nou9jksZfQBVoKTCrGMH10hgY1dvrttzAQMqCp6AhKah/U2NDmf9usEJGXvFU3Z99AtmDTvmUksE37nCOkc2/ft4PY76tlP2647XZIipSB6xthU39toEO0FvjDI4eJUY/n1tagbEzD16mRIVRsPyLjN0Pz+y/vl1iL0wRwqwKnmodrFMFtE52iTmpuRW5AanSEE0vexQ4e/3enbVuKsFG09sZjRDb1ja6EFQgpBnKn3oClxOELxRAIh4l9A54aMyaB+SMAXXJEaAGHtf4x7MJyR30LLZNZxSsbdZfsPjoWuPVOrKSbg4+E0Q2YpIDpESR3JDCY9KFPq8FKn0Rtfd57v/bJNDZWVy5sASW2C93AH+nz7kZ+TeqmXet123gf6O8jph2BXU6TGpbQCSyyqdqOg5s2VBC5FsmAN2re/5hmAGrgojZmtYxOwVQ/FCJF2NRf+l10gzazQ15B7oTnKWiDU5DDO9AJFGYje+Zd5FbXIGy2gBxKQYk3V1EbvRVacswr20S/64sLKC+d7qhvOZiENkIeLJEd1t9lwWTyBnSBlqSVexa/jIfxx7oUgzL8ZciqD05xhRyHuY5IRtjQQk2BJParrCOSTCCWSmF1bgEN04Bbr0Gxy+gL2FDl1n0x2QclMe7ZdbtRh7X0FvzIA4kpILL7P0QD97ODL6TbjakjgUvk9WRrIezetwcIC8PP4ZQzxLBZuqebLlIHqEt9MOQkQo0F0gKrbX3GZLBQEkowAYm0S5AdKguYPfUpbYsyokGOqjaB4PCUqD5LFuVOtr+1B9Yx97pi/2Xeg1taQFXfi3Ci31Nx3r+PvKQ8HPKUhKlxhfMgnOUrQLWLkMV1lY3kkZ0WgkSEJ9xQpvfRs+bSVws56NVTZDGyZM7o2VkXO724DDtPdnlqYhwO/zM9ugtbFTgeRPXSZ04th/kzRUxO+GlwUZjaGDEm+ci0CufALYOuuih5jgUooOCuc34ixEqRIJ4wkurdmap7/vY5pRMemFHOI2CvArU05mZM7BlwaFtdPJ5IgGExs4j0cgT9w6lv8/cPH2I3v/gKtiIwYjiGIp66Yr0GsapVxvypVQwkZUTjUVQZEZO/D1ogCBaIoisQJ5jFLN1KCPEcKvkcFtddHBi1Ww7VpNWOhTgqGxkhMKmR8lV6vDWB2R3I8BfwBBUfblUPTsNbhSJ9VISBA1EXeSKrmq1jOM5R5yqW8xrGUq73fmaNYShahy5bWMpJCKh1xAMWSkUJDYshlBSxs1jp1kxWNDQKL5v7IxL0NIPiTUNv1ab9Hh7CbxqnsZdKR9EFhEpaxMQi0HXFfBToUyHbM4S1ogJHI6HIf3YaEmV90DVMS0Hd0Tb/R4fOOi7r77Vs1/ZT7DZYqQf5vT6ZPS7kwHWGMAgK7XXT8TcHQ8F3YuxGqDo5MqVZcr0yLdt3PLc7bz/8XyS/sIbrCNOWsVIKkjvUZC5fIITBfV9EODUER7jBwklqg7YqzT86KvIxj1HxUcGswkEY2+GgUGWIhbegi11CpIHKdRV+v0a80GRwPRwlFR6DHol5zJ+ZOwWpeAaJsNu2v5YC8xMiEYlHSG8ezawXsXp6BjcNi0iFY4n2YSzqw+h4ipiClEsmCybTnuWdh3lXFBBN5q07MjQKixYLkudlBWNh6ME+BBMDULRm4oDXMmAbJ4gvKxRPd9Z/uxUeoNzxr6tVEx+88xF2xeoXvyXnPcDn8XEmhIk9gxia2iXyemSuKgjWqmAG1ddr5Cw0EIrSG79D710auAtHsonFKXPik2CRR7VRl+FqPmhBPyo+H9SIHwNagFaTnBD1PDnBoT4LH+P0yXmMxgwEdbGTpUvnbIsCc/Ub1FdsYXaV4ltKu9pXrm5RShb5T4g0zmC50vSXgxRS+iJkF30hL1oaGzlff8/w+XIArcEt6ru6goZRxfJSDuORtEdWtnXFsZCngw9b9ddmhe1RUYUMgJduNcmEVEzKJzPnqi2McgF+nkfQcLGcE+qoYnggDIMHYLghxPvo8IFpqNCAwzrzxkgKBI1ssiKRLS6JNK+BiFxGvlBFsdTwOEMsbFWYtkjLAc+yo3geWxa4TAF73wRSgykU15sEPZsJYDRRQ8dwyPaaWVgUgGzQfowPOl5Cbn5FweSo7aV0F5cUDMUdLwta3pA8XztCzgu3L0hmtwHluddJG3/Yrl5rms0SzRtZRCmsi6aS3qM6DWI2I46JPrNjqa5BBxlz62X3EDuMt9rWbVdBREiwapg4OImh3eO0IgwOmQqDknTLeX3z9OQ64plR3f3a1M/oWKYDtBeYmLg2/zqRRg1D47sw9ZUvIda/gwRlWC1oOLkchk2Hgk57E7h94PDUX1O5IP032Q+w0mnTjuJhu25g9YPXPNOjxW7ExNQBmLvH6CypiOzKGirFIqaXfQiQf2zbwvRY2G4wMk0xsa3UAmaXTMRDrkek6HKiO04AeHFteY6yHGlk+S70j+6EPjSIJF3iQK1SLHkHarVSBStlA+lSjU4MXQR8Dspm87Ds3JnTpXePlzafUQaT7DAdJ0LXIlAoiYi+EIqrOaQ0Mn30Lc4viqK62lRt7DDWLiVJp2HQIdon2MFPUwKgDxsYRSSebBJb8oIkgIiWGg0viSeOShkJ309lUxYrI2HvMA1abe6oCUpNe6eL9DM07vMSBDYl52vZLJI2WYrVIjLz5BAQw1+2CYmwsG0CuzhOH6BMGaUCLpsMmth6AetLFSh5Milh8nUtSvYFYwj3hSmcFee+lK5R1JYfdmjFJJiQGyVUSlU6Uy4ioeZQqzSwnpWR3EwAXIFuOJapo9fQBVonAO5Dgf8dIix8Au3gmBTzpiGX0giT01GsSCiRsy+cBuFhzqyr2D/qChOCkwsSJQNszy1cykieHywc/yolAGybKiSEY9P+nE+Mi92NzpLlZ9E+Hr4HfzLr1x4Le/lpL6/lbOaqr6U7o85+y47gD+gSHcV3/T92H9N05zsk8iyuL8RMzekq++bQQ+7vsAV0ngD4Cf6FMG4it/D35KHP4vPNftC3+JLL+OMwcHDkp/bL2CK6OhNkhyCO7Cg+dh7hx/EADeMBGsk9uMiwbBs4Y1zEo69Sz09N/dw5zti1T3KXh6Dnwb6L5+j23EdP2glVwSEq3+FwNqEwd5LKOy+u3Py9ZEYuGzzJs8IZf5verKgSf6luOi8ThxSwjdiywOew/xfI0e355tUMG/k/EDEa7qTE5ASZtlGZgY4R4CfzqtJ/ifzvhiTzMj3bYJKbt12cgo3F/h/xbRWuhx566KGHHnro4bri/2Nu8cnAokcKAAAAAElFTkSuQmCC",jo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={shouldShowYoutubeModal:!1},a}return Object(Os.a)(n,[{key:"handleClickClaimChessRewardsButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,a=t.wallet,s=t.exchangeAccountItems,r=h.a.filter(s,(function(e){return v()(e.chessRewards||0).gt(0)})).map((function(e){return e.exchangeAddress})),!h.a.isEmpty(r)){e.next=6;break}console.error("StakingOverview handleClickClaimChessRewardsButton Error: Exchange address list is empty"),e.next=26;break;case 6:if(!h.a.isNil(a.address)){e.next=10;break}console.error("StakingOverview handleClickClaimChessRewardsButton Error: Wallet address missing"),e.next=26;break;case 10:return e.prev=10,e.next=13,xr.batchClaimRewards({exchanges:r,account:a.address});case 13:if(i=e.sent,!h.a.has(i,"hash")){e.next=18;break}n(Ba({transactionResponse:i,title:"Claim CHESS rewards"})),e.next=19;break;case 18:throw new Error("Cannot parse transaction's hash");case 19:e.next=26;break;case 21:e.prev=21,e.t0=e.catch(10),o=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:o}))),console.error("StakingOverview handleClickClaimChessRewardsButton Error: ",e.t0);case 26:case"end":return e.stop()}}),e,this,[[10,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleClickClaimFeeDistributorRewardsButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,a=t.wallet,s=t.fundItems,r=t.feeDistributorAccounts,i=h.a.filter(r,(function(e){return v()(e.claimableRewards||0).gt(0)})).map((function(e){return e.feeDistributorAddress})),!h.a.isEmpty(i)){e.next=6;break}console.error("StakingOverview handleClickClaimFeeDistributorRewardsButton Error: FeeDistributor address list is empty"),e.next=27;break;case 6:if(!h.a.isNil(a.address)){e.next=10;break}console.error("StakingOverview handleClickClaimFeeDistributorRewardsButton Error: Wallet address missing"),e.next=27;break;case 10:return o=h.a.map(s,(function(e){return h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:""})),e.prev=11,e.next=14,xr.batchClaimRewards({exchanges:i,account:a.address});case 14:if(c=e.sent,!h.a.has(c,"hash")){e.next=19;break}n(Ba({transactionResponse:c,title:"Claim ".concat(o.join(" & ")," rebates")})),e.next=20;break;case 19:throw new Error("Cannot parse transaction's hash");case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(11),l=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:l}))),console.error("StakingOverview handleClickClaimFeeDistributorRewardsButton error: ",l);case 27:case"end":return e.stop()}}),e,this,[[11,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getTotalStakedAndLockedValue",value:function(){var e=this.props,t=e.fundItems,n=e.exchangeAccountItems,a=e.votingEscrowAccount,s=Q(),r={total:null,stakingValue:null,lockedValue:null};if(!h.a.isNil(a.amount)&&Number(s)>0&&!h.a.isEmpty(t)){r.lockedValue=v()(a.amount).times(s).toString();for(var i=0,o=Object.values(t);i<o.length;i++){var c=o[i],l=c.fundAddress,u=c.exchangeAddress,d=le(l),m=n[u],p=ve(m);if(h.a.isNil(d)||h.a.isNil(p.mAmount)){r.lockedValue=null,r.stakingValue=null;break}r.stakingValue=v()(r.stakingValue||0).plus(v()(d.M).times(p.mAmount)).plus(v()(d.A).times(p.aAmount)).plus(v()(d.B).times(p.bAmount)).toString()}r.total=v()(r.lockedValue).plus(r.stakingValue).toString()}return r}},{key:"_getTotalChessRewards",value:function(){for(var e=this.props.exchangeAccountItems,t=null,n=0,a=Object.values(e);n<a.length;n++){var s=a[n];if(h.a.isNil(s.chessRewards)){t=null;break}t=v()(t||0).plus(s.chessRewards).toString()}return t}},{key:"_getFeeDistributorClaimable",value:function(){for(var e=this.props,t=e.fundItems,n=e.feeDistributorAccounts,a={total:null,assets:{}},s=0,r=Object.values(t);s<r.length;s++){var i=r[s],o=i.fundAddress,c=i.feeDistributorAddress,l=i.assets,u=n[c],d=h.a.has(l,"underlyingToken.symbol")?l.underlyingToken.symbol:null,m=ae(o);if(!h.a.has(u,"claimableRewards")||h.a.isNil(u.claimableRewards)||h.a.isNil(d)||h.a.isNil(m)){a.total=null,a.assets={};break}a.total=v()(a.total||0).plus(v()(u.claimableRewards).times(m)).toString(),a.assets[d]=v()(a.assets[d]||0).plus(u.claimableRewards).toString()}return a}},{key:"Block",value:function(e){var t=e.title,n=e.titleRemark,a=e.leftComponent,s=e.rightComponent,r=e.footerComponent;return Object(ws.jsxs)("div",{className:"staking-overview--block",children:[Object(ws.jsxs)("div",{className:"staking-overview--block--title clearfix",children:[t,n&&Object(ws.jsx)("div",{className:"staking-overview--block--title--remark",children:n})]}),Object(ws.jsxs)("div",{className:"staking-overview--block--main clearfix",children:[Object(ws.jsx)("div",{className:"staking-overview--block--left",children:a}),s&&Object(ws.jsx)("div",{className:"staking-overview--block--right",children:s})]}),r&&Object(ws.jsx)("div",{className:"staking-overview--block--footer",children:r})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.provider,r=t.wallet,i=t.fundItems,o=t.exchangeItems,c=t.exchangeAccountItems,l=t.votingEscrowAccount,u=this.state.shouldShowYoutubeModal,d=h.a.isNil(s.blockTimestamp)?j()():j()(s.blockTimestamp),m=this._getTotalStakedAndLockedValue(),p=this._getTotalChessRewards(),b=this._getFeeDistributorClaimable(),f=v()(l.amount||0).gt(0)&&j()(l.unlockTime).isAfter(d),g=h.a.map(i,(function(e){return h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:""}));return Object(ws.jsxs)("div",{className:"staking-overview clearfix",children:[this.Block({title:"Your total staked & locked value",leftComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:go}),Object(ws.jsx)("label",{children:h.a.isNil(m.total)?"---":v()(m.total).gt(1)?"$".concat(v()(m.total).toFormat(0)):v()(m.total).gt(0)?"$".concat(v()(m.total).toFormat(2)):"$0.0"})]}),footerComponent:Object(ws.jsxs)(a.Fragment,{children:["Staked: ",h.a.isNil(m.stakingValue)?"---":v()(m.stakingValue).gt(1)?"$".concat(v()(m.stakingValue).toFormat(0)):v()(m.stakingValue).gt(0)?"$".concat(v()(m.stakingValue).toFormat(2)):"$0.0",Object(ws.jsx)("span",{children:"\xa0\xa0"}),"Locked: ",h.a.isNil(m.lockedValue)?"---":v()(m.lockedValue).gt(1)?"$".concat(v()(m.lockedValue).toFormat(0)):v()(m.lockedValue).gt(0)?"$".concat(v()(m.lockedValue).toFormat(2)):"$0.0"]})}),this.Block({title:"CHESS rewards",leftComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:Es}),Object(ws.jsx)("label",{children:h.a.isNil(p)?"---":v()(p).gt(0)?J({number:p,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:Number(p)>=1e4?0:2}):"0.0"})]}),rightComponent:h.a.isNil(r.address)?Object(ws.jsx)("button",{className:"button-style-7",onClick:Object(Se.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(_e(!0));case 1:case"end":return e.stop()}}),e)}))),children:"Connect wallet"}):Object(ws.jsx)("button",{disabled:0===Number(p)||!xa(r.providerNetwork),className:"button-style-7",onClick:function(){e.handleClickClaimChessRewardsButton()},children:xa(r.providerNetwork)?"Harvest":"Wrong network"}),footerComponent:f?Object(ws.jsxs)(a.Fragment,{children:["Boosted: ",h.a.map(i,(function(e){var t=e.exchangeAddress,n=h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:"",a=o[t],s=c[t];if(h.a.isNil(a)||h.a.isNil(s))return"".concat(n," --");var r=ve(s),i=r.mAmount,l=r.aAmount,u=r.bAmount,d=xe({workingSupply:a.workingSupply,mAmount:i,aAmount:l,bAmount:u,workingBalance:s.workingBalance});return"".concat(n," ").concat(v()(d).toFixed(2),"x")})).join(", ")]}):Object(ws.jsx)(ks.b,{to:"/staking#locker",children:Object(ws.jsx)("button",{className:"button-style-7",children:"Lock CHESS to boost"})})}),this.Block({title:Object(ws.jsxs)(a.Fragment,{children:["".concat(g.join(" & ")," rebates"),Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:["50% of the fees collected within Tranchess are accrued to a rebate pool and distributed to those who enroll their veCHESS.",Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/chess-token#how-do-i-participate-in-the-weekly-rebates"},target:"_blank",children:"Learn more"}),Object(ws.jsx)("br",{}),Object(ws.jsx)("button",{className:"staking-overview--youtube-link",onClick:function(){e.setState({shouldShowYoutubeModal:!0})},children:"Watch a video on how ".concat(g.join(" & ")," rebate works")})]})})]}),leftComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:vo}),Object(ws.jsx)("label",{children:h.a.isNil(b.total)?"---":v()(b.total||0).gt(0)?"Est. $".concat(Number(b.total)>1?Z(b.total,1):v()(b.total).toFixed(2)):"$0.0"})]}),rightComponent:h.a.isNil(r.address)?Object(ws.jsx)("button",{className:"button-style-7",onClick:function(){n(_e(!0))},children:"Connect wallet"}):Object(ws.jsx)("button",{disabled:h.a.isNil(b.total)||v()(b.total||0).eq(0)||!xa(r.providerNetwork),className:"button-style-7",onClick:function(){e.handleClickClaimFeeDistributorRewardsButton()},children:xa(r.providerNetwork)?"Harvest":"Wrong network"}),footerComponent:!f&&v()(b.total||0).eq(0)?Object(ws.jsx)(ks.b,{to:"/staking#locker",children:Object(ws.jsx)("button",{className:"button-style-7",children:"Lock CHESS to earn rebate"})}):Object(ws.jsx)(a.Fragment,{children:h.a.map(b.assets,(function(e,t){return"".concat(v()(e||0).gt(1)?v()(e).toFixed(2,1):v()(e||0).gt(0)?v()(e).toFixed(5,1):"0.0"," ").concat(t)})).join(" & ")})}),u&&Object(ws.jsx)(Pi,{url:"https://www.youtube.com/embed/IzeKPlWEIlU",onClickClose:function(){e.setState({shouldShowYoutubeModal:!1})}})]})}}]),n}(a.Component);var ko=Object(o.c)((function(e){return{provider:e.provider,wallet:e.wallet,fundItems:e.fund.items,exchangeItems:e.exchange.items,exchangeAccountItems:e.exchange.account.items,votingEscrowAccount:e.governance.votingEscrow.account,feeDistributorAccounts:e.governance.feeDistributor.accounts,historyNAVs:e.fund.historyNAVs,underlyingTokenTwaps:e.fund.underlyingTokenTwaps,chessRate:e.governance.chessRate}}))(jo),xo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).initialStakingModalState={shouldShow:!1,fundAddress:null,tranche:null,direction:cr.DEPOSIT.key},a.state={stakingModal:a.initialStakingModalState},a}return Object(Os.a)(n,[{key:"Item",value:function(e){var t=e.iconComponent,n=e.name,a=void 0===n?"":n,s=e.infoComponent,r=e.yieldLable,i=void 0===r?"":r,o=e.yieldComponent,c=e.balanceComponent,l=e.actionComponent;return Object(ws.jsxs)("div",{className:"staking-container--item clearfix",children:[Object(ws.jsx)("div",{className:"staking-container--item--icon",children:t}),Object(ws.jsxs)("div",{className:"staking-container--item--main",children:[Object(ws.jsx)("label",{children:a}),Object(ws.jsx)("div",{children:s})]}),Object(ws.jsxs)("div",{className:"staking-container--item--yield",children:[Object(ws.jsx)("label",{children:i}),Object(ws.jsx)("div",{children:o})]}),Object(ws.jsxs)("div",{className:"staking-container--item--balance",children:[Object(ws.jsx)("label",{children:"You staked"}),Object(ws.jsx)("div",{children:c})]}),Object(ws.jsx)("div",{className:"staking-container--item--action",children:l})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.wallet,r=t.fundItems,i=t.exchangeItems,o=t.exchangeAccountItems,c=this.state.stakingModal;return Object(ws.jsxs)("div",{className:"staking-container",children:[h.a.map(r,(function(t,r){var c=t.assets,l=t.exchangeAddress,u=i[l],d=o[l]||{},m=ve(d),p=le(r),b=de({fundItem:t,shouldSkipAPY:!0}),f=ke({workingBalance:d.workingBalance,mAmount:m.mAmount,aAmount:m.aAmount,bAmount:m.bAmount}),g=ge({mAmount:m.mAmount,aAmount:"0",bAmount:"0"}),j=ge({mAmount:"0",aAmount:m.aAmount,bAmount:m.bAmount});return h.a.isNil(u)?null:h.a.map(L,(function(t,i){var o=u.totalDeposited,l=h.a.has(c,"underlyingToken.symbol")?c.underlyingToken.symbol:null,k=h.a.has(c,"tranche".concat(i))?c["tranche".concat(i)]:null,x=h.a.isNil(k)?null:U[k.symbol],y=h.a.has(p,i)?p[i]:null,O=b.stakingAPR[i],A=h.a.isNil(o,"token".concat(i))||h.a.isNil(y)?null:v()(o["token".concat(i)]).times(y),N=m["".concat(i.toLowerCase(),"Amount")],w=h.a.has(d,"available.token".concat(i))?d.available["token".concat(i)]:null,S=h.a.has(d,"locked.token".concat(i))?d.locked["token".concat(i)]:null,C=h.a.isNil(N)||h.a.isNil(y)?null:v()(N).times(y).toString(),T=h.a.isNil(N)||h.a.isNil(O)||2!==h.a.size(O)?null:v()(O[0]||0).times("M"===i?f.workingM:f.workingAB).div("M"===i?g:j),E=function(e){var t=e.fundAddress,n=void 0===t?"":t,a=e.tranche,s=void 0===a?"M":a,r=e.weightedSupply,i=void 0===r?"":r,o=e.workingSupply,c=void 0===o?"":o,l=e.mAmount,u=void 0===l?"":l,d=e.aAmount,m=void 0===d?"":d,p=e.bAmount,b=void 0===p?"":p,f=e.workingBalance,g=void 0===f?"":f,j=js.getState().fund.items[n],k=null;if(!h.a.isNil(j)){var x=je({weightedSupply:i,mAmount:u,aAmount:m,bAmount:b,veProportion:1}),y=v()(c||0).minus(g||0).plus(x.total||0).toString(),O=de({fundItem:j,newWorkingSupply:y,shouldSkipAPY:!0});if("M"===s){var A=ge({mAmount:u,aAmount:"0",bAmount:"0"});k=v()(A).gt(0)&&!h.a.isNil(O.stakingAPR.M)?v()(O.stakingAPR.M[0]).times(x.workingM).div(A).toString():v()(0).toString()}else{var N=ge({mAmount:"0",aAmount:m,bAmount:b});k=v()(N).gt(0)&&!h.a.isNil(O.stakingAPR[s])?v()(O.stakingAPR[s][0]).times(x.workingAB).div(N).toString():v()(0).toString()}}return k}({fundAddress:r,tranche:i,weightedSupply:u.weightedSupply,workingSupply:u.workingSupply,mAmount:m.mAmount,aAmount:m.aAmount,bAmount:m.bAmount,workingBalance:d.workingBalance});return Object(ws.jsx)(a.Fragment,{children:e.Item({iconComponent:Object(ws.jsx)("img",{src:x||t.icon}),name:(F[l]||"")+t.name,infoComponent:Object(ws.jsxs)(a.Fragment,{children:["Last NAV: "+(h.a.isNil(y)?"---":v()(y).toFixed(4,1)),Object(ws.jsx)("br",{}),"Total staked: "+(h.a.isNil(A)?"---":"$".concat(J({number:v()(A).toString(),shouldReturnLocalString:!0,defaultPrecision:0}))),Object(ws.jsx)("br",{})]}),yieldLable:v()(N||0).gt(0)?"Your staking APR":"Staking APR Range",yieldComponent:Object(ws.jsxs)(a.Fragment,{children:[v()(N||0).gt(0)?v()(T||0).gt(0)?"".concat(v()(T).times(100).toFixed(1,1),"%"):"---":!h.a.isNil(O)&&2===h.a.size(O)&&v()(O[0]||0).gt(0)?Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("span",{className:"staking-container--yield-item",children:"".concat(v()(O[0]||0).times(100).toFixed(1,1),"%")})," ~ ",Object(ws.jsx)("span",{className:"staking-container--yield-item",children:"".concat(v()(O[1]||0).times(100).toFixed(1,1),"%")})]}):"---",Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:[v()(N||0).eq(0)?"This is the range of annualized percentage return of CHESS rewards. Your actual APR depends on your boost factor.":"This is your actual annualized percentage return of CHESS rewards taking the boost factor into account.",Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/vechess#what-is-boosting"},target:"_blank",children:"Learn more"})]})}),v()(N||0).gt(0)&&v()(E||0).minus(T||0).gt(V)&&Object(ws.jsx)(ks.b,{to:"/staking#locker",children:Object(ws.jsx)("button",{className:"button-style-7",children:"Boost to ".concat(v()(E).times(100).toFixed(1,1),"%")})})]}),balanceComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("span",{className:"staking-container--balance-value",children:h.a.isNil(N)?"---":v()(N).gt(0)?J({number:N,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"}),!h.a.isNil(C)&&Object(ws.jsx)("span",{className:"staking-container--balance-dollar-value",children:"Est. $".concat(J({number:C,shouldReturnLocalString:!0,defaultPrecision:0===Number(C)?1:0}))})]}),actionComponent:Object(ws.jsxs)(a.Fragment,{children:[h.a.isNil(s.address)?Object(ws.jsx)("button",{className:"button-style-5",onClick:function(){n(_e(!0))},children:"Connect wallet"}):Object(ws.jsx)("button",{className:"button-style-5",onClick:function(){e.setState({stakingModal:{shouldShow:!0,fundAddress:r,tranche:i,direction:cr.DEPOSIT.key}})},children:"Stake"}),Object(ws.jsx)(Bs,{className:"staking-container--unstake-popup",disabled:v()(w||0).gt(0)||v()(S||0).eq(0),trigger:Object(ws.jsx)("button",{className:"button-style-6"+(v()(w||0).eq(0)?" disabled-button":""),onClick:function(){v()(w||0).gt(0)&&e.setState({stakingModal:{shouldShow:!0,fundAddress:r,tranche:i,direction:cr.WITHDRAW.key}})},children:"Unstake"}),children:"All your ".concat(v()(S||0).toFixed(2,1)," tokens are in pending orders. You have to cancel pending orders before unstaking.")})]})})},"".concat(r,"--").concat(i))}))})),c.shouldShow&&!h.a.isNil(c.fundAddress)&&!h.a.isNil(c.tranche)&&Object(ws.jsx)(mr,{fundAddress:c.fundAddress,tranche:c.tranche,direction:c.direction,onClickClose:function(){e.setState({stakingModal:e.initialStakingModalState})}})]})}}]),n}(a.Component);var yo=Object(o.c)((function(e){return{wallet:e.wallet,fundItems:e.fund.items,exchangeItems:e.exchange.items,exchangeAccountItems:e.exchange.account.items,historyNAVs:e.fund.historyNAVs,underlyingTokenTwaps:e.fund.underlyingTokenTwaps}}))(xo),Oo=n.p+"static/media/veChess.99180de1.svg",Ao=n.p+"static/media/dashboard-body.f4f1f8ca.svg",No=n.p+"static/media/dashboard-pointer.7d2d6643.svg",wo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){return Object(ys.a)(this,n),t.call(this,e)}return Object(Os.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.min,a=e.max,s=e.value,r=a>n?v()(h.a.clamp(s,n,a)-n).div(a-n):v()(0),i=v()(144).times(r).minus(72);return Object(ws.jsxs)("div",{className:"dashboard"+(t?" ".concat(t):""),children:[Object(ws.jsx)("img",{className:"dashboard--body",src:Ao}),Object(ws.jsx)("div",{className:"dashboard--pointer-wrapper",style:{transform:"rotate(".concat(i,"deg) translateX(-50%)")},children:Object(ws.jsx)("img",{className:"dashboard--pointer",src:No})})]})}}]),n}(a.Component),So=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.value,a=e.type,s=e.placeholder,r=e.min,i=e.max,o=e.step,c=e.suffix,l=e.keysShouldPrevent,u=e.onChange;return Object(ws.jsxs)("div",{className:"input-with-suffix",children:[Object(ws.jsx)("input",{className:"input-with-suffix--input-layer"+(t?" ".concat(t):""),value:h.a.isNumber(n)?v()(n).toString():n,type:a,placeholder:s,min:h.a.isNil(r)?null:r,max:h.a.isNil(i)?null:i,step:h.a.isNil(o)?null:o,spellCheck:!1,onKeyPress:function(e){l.includes(e.key)&&e.preventDefault()},onChange:function(e){u(e.target.value)}}),Object(ws.jsx)("input",{className:"input-with-suffix--display-layer"+(t?" ".concat(t):""),value:"".concat(n).concat(h.a.isElement(c)?"":" ".concat(c)),type:"text",spellCheck:!1})]})}}]),n}(a.Component);So.defaultProps={value:"",placeholder:"",suffix:"",keysShouldPrevent:[],onChange:function(){}};var Co=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"Item",value:function(e){var t=e.label,n=e.weekDuration,a=void 0===n?0:n,s=e.hasDisableTooltip,r=void 0!==s&&s,i=this.props,o=i.maxWeekDuration,c=i.onChange;return Object(ws.jsxs)("button",{className:"chess-locker-duration-tabs--item button-style-6",disabled:a>o,onClick:function(){c({weekDuration:a})},children:[t,(r||a>o)&&Object(ws.jsx)(Bs,{className:"chess-locker-duration-tabs--item--tooltip",trigger:Object(ws.jsx)("div",{className:"chess-locker-duration-tabs--item--tooltip--trigger"}),children:"Longer lock duration options will be enabled in the future. Stay tuned!"})]})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.maxWeekDuration,a=e.shouldHaveFourYearOption,s=e.shouldHaveMaxOption;return Object(ws.jsxs)("div",{className:"chess-locker-duration-tabs"+(t?" ".concat(t):""),children:[this.Item({label:"1 WEEK",weekDuration:1}),this.Item({label:"1 MONTH",weekDuration:4}),this.Item({label:"3 MONTHS",weekDuration:12}),this.Item({label:"6 MONTHS",weekDuration:25}),this.Item({label:"1 YEAR",weekDuration:52,hasDisableTooltip:!0}),a&&this.Item({label:"4 YEARS",weekDuration:207,hasDisableTooltip:!0}),s&&this.Item({label:"MAX",weekDuration:n})]})}}]),n}(a.Component);Co.defaultProps={shouldHaveFourYearOption:!1,shouldHaveMaxOption:!1,onChange:function(){}};var To={contract:new Ee.a.Contract("0x95A2bBCD64E2859d40E2Ad1B5ba49Dc0e1Abc6C2",["function MAX_TIME () view returns (uint256)","function totalSupply () view returns (uint256)","function locked (address) view returns (int128 amount, uint256 unlockTime)","function getTimestampDropBelow(address account, uint256 threshold) view returns (uint256)","function createLock (uint256 amount, uint256 unlockTime)","function increaseUnlockTime (uint256 unlockTime)","function increaseAmount (address account, uint256 amount)","function balanceOf (address account) view returns (uint256)","function balanceOfAtTimestamp (address account, uint256 timestamp) view returns (uint256)","function withdraw ()"],it()),getAdjustedGasLimit:function(e){return Math.floor(1.05*e.toNumber()+6e4)},MAX_TIME:function(){var e=Object(Se.a)(we.a.mark((function e(){var t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.MAX_TIME();case 2:return t=e.sent,e.abrupt("return",t.toNumber());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),totalSupply:function(){var e=Object(Se.a)(we.a.mark((function e(){var t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.totalSupply();case 2:return t=e.sent,e.abrupt("return",Ee.a.utils.formatUnits(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),locked:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.locked(t);case 2:return n=e.sent,a=n.unlockTime.toNumber(),e.abrupt("return",{amount:Ee.a.utils.formatUnits(n.amount),unlockTimestamp:0===a?null:j.a.unix(a).toISOString()});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),getTimestampDropBelow:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"0",e.next=3,this.contract.getTimestampDropBelow(t,Ee.a.utils.parseUnits(n.toString()));case 3:return a=e.sent,e.abrupt("return",j.a.unix(a).toISOString());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),createLock:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d,m,p;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.amountString,s=void 0===a?"":a,r=t.unlockTimestamp,i=void 0===r?"":r,e.next=3,rt();case 3:return o=e.sent,c=o.getSigner(),l=this.contract.connect(c),u=Ee.a.utils.parseUnits(h.a.toString(s)),d=j()(i).unix(),m=[u,d],e.next=11,(n=l.estimateGas).createLock.apply(n,m);case 11:return p=e.sent,e.next=14,l.createLock.apply(l,m.concat([{gasLimit:this.getAdjustedGasLimit(p)}]));case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),increaseUnlockTime:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.unlockTimestamp,a=void 0===n?"":n,e.next=3,rt();case 3:return s=e.sent,r=s.getSigner(),i=this.contract.connect(r),o=j()(a).unix(),e.next=9,i.estimateGas.increaseUnlockTime(o);case 9:return c=e.sent,e.next=12,i.increaseUnlockTime(o,{gasLimit:this.getAdjustedGasLimit(c)});case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),increaseAmount:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s,r,i,o,c,l,u,d;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.amountString,s=void 0===a?"":a,e.next=3,rt();case 3:return r=e.sent,i=r.getSigner(),e.next=7,i.getAddress();case 7:return o=e.sent,c=this.contract.connect(i),l=Ee.a.utils.parseUnits(h.a.toString(s)),u=[o,l],e.next=13,(n=c.estimateGas).increaseAmount.apply(n,u);case 13:return d=e.sent,e.next=16,c.increaseAmount.apply(c,u.concat([{gasLimit:this.getAdjustedGasLimit(d)}]));case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),balanceOf:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.balanceOf(t);case 2:return n=e.sent,e.abrupt("return",Ee.a.utils.formatUnits(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),balanceOfAtTimestamp:function(){var e=Object(Se.a)(we.a.mark((function e(t,n){var a,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j()(n).unix(),e.next=3,this.contract.balanceOfAtTimestamp(t,a);case 3:return s=e.sent,e.abrupt("return",Ee.a.utils.formatUnits(s));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),withdraw:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:return t=e.sent,n=t.getSigner(),a=this.contract.connect(n),e.next=7,a.estimateGas.withdraw();case 7:return s=e.sent,e.next=10,a.withdraw({gasLimit:this.getAdjustedGasLimit(s)});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},Eo=604800,Mo={CREATE_LOCK:"CREATE_LOCK",INCREASE_LOCK_AMOUNT:"INCREASE_LOCK_AMOUNT",EXTEND_LOCK_TIME:"EXTEND_LOCK_TIME"},Bo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={amountInput:"",weekDurationInput:"",shouldShowConfirmModal:!1,shouldShowMaxDurationWarning:!1,shouldShowYoutubeModal:!1},a._mounted=!1,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"handleClickCreateLockButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.dispatch,a=t.onSendLockTransaction,s=this.state.amountInput,e.prev=2,r=this._getNewUnlockTimestamp(),e.next=6,To.createLock({amountString:h.a.toString(s),unlockTimestamp:r});case 6:if(i=e.sent,!h.a.has(i,"hash")){e.next=13;break}this._mounted&&this.setState({amountInput:"",weekDurationInput:"",shouldShowConfirmModal:!1}),n(Ba({transactionResponse:i,title:"Lock CHESS"})),a(),e.next=14;break;case 13:throw new Error("Cannot parse transaction's hash");case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(2),o=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:o}))),console.error("ChessLocker handleClickCreateLockButton: ",o);case 21:case"end":return e.stop()}}),e,this,[[2,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleClickIncreaseAmountButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.dispatch,a=t.onSendLockTransaction,s=this.state.amountInput,e.prev=2,e.next=5,To.increaseAmount({amountString:h.a.toString(s)});case 5:if(r=e.sent,!h.a.has(r,"hash")){e.next=12;break}this._mounted&&this.setState({amountInput:""}),n(Ba({transactionResponse:r,title:"Increase CHESS locked amount"})),a(),e.next=13;break;case 12:throw new Error("Cannot parse transaction's hash");case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),i=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:i}))),console.error("ChessLocker handleClickIncreaseAmountButton: ",i);case 20:case"end":return e.stop()}}),e,this,[[2,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleClickIncreaseLockTimeButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.dispatch,a=t.onSendLockTransaction,e.prev=1,s=this._getNewUnlockTimestamp(),e.next=5,To.increaseUnlockTime({unlockTimestamp:s});case 5:if(r=e.sent,!h.a.has(r,"hash")){e.next=12;break}this._mounted&&this.setState({weekDurationInput:""}),n(Ba({transactionResponse:r,title:"Extend locked up period"})),a(),e.next=13;break;case 12:throw new Error("Cannot parse transaction's hash");case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(1),i=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:i}))),console.error("ChessLocker handleClickIncreaseLockTimeButton: ",i);case 20:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getBaseMoment",value:function(){var e=this.props,t=e.votingEscrow,n=e.mode,a=e.provider,s=t.account;return n===Mo.CREATE_LOCK?j()(re(a.blockTimestamp)):j()(s.unlockTime)}},{key:"_getMaxWeekDuration",value:function(){var e=this._getBaseMoment(),t=q();return h.a.isNil(e)?0:v()(t.diff(e,"seconds")).div(Eo).toNumber()}},{key:"_getNewUnlockTimestamp",value:function(){var e=this.props.mode,t=this.state.weekDurationInput,n=this._getBaseMoment();return!h.a.isNil(n)&&([Mo.INCREASE_LOCK_AMOUNT,Mo.EXTEND_LOCK_TIME].includes(e)||parseInt(t)>=1)?n.add((parseInt(t)||0)*Eo,"seconds").toISOString():null}},{key:"ConfirmModal",value:function(){var e=this,t=this.props.wallet,n=this.state,a=n.amountInput,s=n.weekDurationInput,r=this._getNewUnlockTimestamp(),i=t.balance.chess,o=v()(h.a.toString(a)).isGreaterThan(i);return Object(ws.jsx)(Fs.a,{overlayClassName:"chess-locker--confirm-modal--overlay",className:"chess-locker--confirm-modal",isOpen:!0,children:Object(ws.jsxs)("div",{className:"chess-locker--confirm-modal--main centered",children:[Object(ws.jsxs)("div",{className:"chess-locker--confirm-modal--header",children:[Object(ws.jsx)("div",{className:"chess-locker--confirm-modal--title",children:"Lock until ".concat(h.a.isNil(r)?"":j()(r).format("D MMM YYYY, HH:mm"))}),Object(ws.jsx)("button",{className:"chess-locker--confirm-modal--close-button",onClick:function(){e.setState({shouldShowConfirmModal:!1})},children:Object(ws.jsx)(Rs.p,{})})]}),Object(ws.jsxs)("div",{className:"chess-locker--confirm-modal--description",children:["Once confirmed, lock period can only be extended, not shortened. All your locked CHESS will follow the same lock period and you can only withdraw after the lock period ends.",Object(ws.jsx)("br",{}),Object(ws.jsx)("br",{}),"If you decide to lock more CHESS in the future, newly locked CHESS will follow the same lock up period."]}),Object(ws.jsxs)("div",{className:"chess-locker--confirm-modal--buttons",children:[Object(ws.jsx)("button",{className:"button-style-6",onClick:function(){e.setState({shouldShowConfirmModal:!1})},children:"Adjust time"}),Object(ws.jsx)("button",{className:"button-style-5",disabled:Number(a)<=0||o||Number(s)<1||!xa(t.providerNetwork),onClick:function(){e.handleClickCreateLockButton()},children:xa(t.providerNetwork)?"Yes, continue to lock":"Wrong network"})]})]})})}},{key:"Block",value:function(e){var t=e.title,n=e.captionComponent,a=e.bodyComponent,s=e.remarkComponent;return Object(ws.jsxs)("div",{className:"chess-locker--block clearfix",children:[Object(ws.jsx)("div",{className:"chess-locker--block--title",children:t}),Object(ws.jsx)("div",{className:"chess-locker--block--caption",children:n}),Object(ws.jsx)("div",{className:"chess-locker--block--body clearfix",children:a}),s&&Object(ws.jsx)("div",{className:"chess-locker--block--remark",children:s})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.mode,r=t.wallet,i=t.provider,o=t.fundItems,c=t.fundIncomes,l=t.exchangeItems,u=t.exchangeAccountItems,d=t.votingEscrow,m=this.state,p=m.amountInput,b=m.weekDurationInput,f=m.shouldShowConfirmModal,g=m.shouldShowMaxDurationWarning,k=m.shouldShowYoutubeModal,x=d.account,y=d.totalSupply,O=d.tradingWeekTotalSupply,A=x.amount,N=x.unlockTime,w=r.balance.chess,S=v()(p||0).gt(w||0),C=this._getMaxWeekDuration(),T=this._getNewUnlockTimestamp(),E=re(i.blockTimestamp),M=h.a.isNil(i.blockTimestamp)?j()():j()(i.blockTimestamp),B=h.a.map(o,(function(e){return h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:""})),R=Number(A)>0?_({initialAmount:Number(A),unlockTimestamp:N,timestamp:M.toISOString()}):0,I={totalDollarValue:null,assets:{}},D=0,P=0,U=0,H=0;if(!h.a.isNil(T)){var V=s===Mo.CREATE_LOCK?Number(p):s===Mo.INCREASE_LOCK_AMOUNT?v()(A||0).plus(p||0).toNumber():s===Mo.EXTEND_LOCK_TIME?Number(A):0;if(D=_({initialAmount:V,unlockTimestamp:T,timestamp:M.toISOString()}),U=_({initialAmount:V,unlockTimestamp:T,timestamp:E}),D>0&&(P=v()(D).div(v()(y||0).minus(R).plus(D)).toString()),U>0){var W=_({initialAmount:Number(A),unlockTimestamp:N,timestamp:E});H=v()(U).div(v()(O||0).minus(W).plus(U)).toNumber()}}if(!h.a.isEmpty(c))for(var Y=0,K=Object.values(o);Y<K.length;Y++){var z=K[Y],G=z.fundAddress,q=h.a.has(c,"".concat(G,".income"))?c[G].income:0,Q=h.a.has(z,"assets.underlyingToken.symbol")?z.assets.underlyingToken.symbol:null,X=ae(G);if(h.a.isNil(Q)||h.a.isNil(X)){I.totalDollarValue=null,I.assets={};break}var Z=v()(q||0).times(.5).times(H||0).toString();I.totalDollarValue=v()(I.totalDollarValue||0).plus(v()(X).times(Z)).toString(),I.assets[Q]=v()(I.assets[Q]||0).plus(Z).toString()}return Object(ws.jsxs)("div",{className:"chess-locker",children:[Object(ws.jsxs)("div",{className:"chess-locker--main",children:[Object(ws.jsxs)("div",{className:"chess-locker--main--input-section",children:[this.Block({title:"CHESS amount",bodyComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:Es}),Object(ws.jsx)("div",{className:"chess-locker--input-wrapper",children:s===Mo.EXTEND_LOCK_TIME?Object(ws.jsx)("label",{children:J({number:A,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:0===Number(A)?1:2})}):Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("input",{type:"number",placeholder:"0.0 CHESS",value:p,min:0,onChange:function(t){te(t.target.value)>18||e.setState({amountInput:t.target.value})}}),Object(ws.jsxs)("div",{className:"chess-locker--input-wrapper--info-row",children:["Wallet: ".concat(Number(w)>0?J({number:w,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"," CHESS"),!h.a.isNil(r.address)&&Object(ws.jsxs)(a.Fragment,{children:[" - ",Object(ws.jsx)("button",{className:"button-style-7",onClick:function(){e.setState({amountInput:Number(w)>0?w:"0"})},children:"Max"})]})]})]})})]})}),this.Block({title:"Lock duration",bodyComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(Rs.i,{}),Object(ws.jsx)("div",{className:"chess-locker--input-wrapper",children:s===Mo.INCREASE_LOCK_AMOUNT?Object(ws.jsxs)("label",{className:"chess-locker--input-wrapper--unlock-label",children:["Locked until ",j()(N).format("D MMM YYYY, HH:mm")]}):Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(So,{type:"number",placeholder:"0 week(s)",value:b,min:0,max:C||0,step:1,suffix:h.a.isNumber(b)&&b>=0?"week".concat(b>1?"s":""):"",keysShouldPrevent:["E","e","+","-","."],onChange:function(t){var n=h.a.clamp(parseInt(t),0,C);e.setState({weekDurationInput:n>=0?n:"",shouldShowMaxDurationWarning:parseInt(t)>C||0===C})}}),Object(ws.jsxs)("div",{className:"chess-locker--input-wrapper--info-row",children:[g&&Object(ws.jsx)("div",{className:"chess-locker--max-duration-message",children:"The max ".concat(s===Mo.CREATE_LOCK?"total lock duration":"duration extension"," is ").concat(C," week").concat(C>1?"s":"")}),"Lock until ".concat(b>0&&!h.a.isNil(T)?j()(T).format("D MMM YYYY, HH:mm"):"")]})]})})]})}),s!==Mo.INCREASE_LOCK_AMOUNT&&Object(ws.jsx)(Co,{className:"chess-locker--duration-tabs",maxWeekDuration:C,shouldHaveFourYearOption:s===Mo.CREATE_LOCK,shouldHaveMaxOption:s!==Mo.CREATE_LOCK,onChange:function(t){var n=t.weekDuration;e.setState({weekDurationInput:n>=0?n:"",shouldShowMaxDurationWarning:n>C||0===C})}}),h.a.isNil(r.address)?Object(ws.jsx)("button",{className:"chess-locker--button button-style-5",onClick:function(){n(_e(!0))},children:"Connect wallet"}):s===Mo.CREATE_LOCK?Object(ws.jsx)(sr,{className:"chess-locker--button  button-style-5",tokenDisplayName:"CHESS",tokenAddress:"0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6",spenderAddress:"0x95A2bBCD64E2859d40E2Ad1B5ba49Dc0e1Abc6C2",allowanceAmount:r.allowance.votingEscrowChess,amountToSpend:h.a.toString(p),fetchAllowanceDisabled:!0,signTransactionLabel:xa(r.providerNetwork)?S?"Insufficient CHESS Balance":"Lock CHESS":"Wrong network",signTransactionDisabled:Number(p)<=0||S||Number(b)<1||!xa(r.providerNetwork),onClickSignTransaction:function(){e.setState({shouldShowConfirmModal:!0})}}):s===Mo.INCREASE_LOCK_AMOUNT?Object(ws.jsx)(sr,{className:"chess-locker--button button-style-5",tokenDisplayName:"CHESS",tokenAddress:"0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6",spenderAddress:"0x95A2bBCD64E2859d40E2Ad1B5ba49Dc0e1Abc6C2",allowanceAmount:r.allowance.votingEscrowChess,amountToSpend:h.a.toString(p),fetchAllowanceDisabled:!0,signTransactionLabel:xa(r.providerNetwork)?S?"Insufficient CHESS Balance":"Lock CHESS":"Wrong network",signTransactionDisabled:Number(p)<=0||S||!xa(r.providerNetwork),onClickSignTransaction:function(){e.handleClickIncreaseAmountButton()}}):s===Mo.EXTEND_LOCK_TIME?Object(ws.jsx)("button",{className:"chess-locker--button button-style-5",disabled:""===b||Number(b)<1||!xa(r.providerNetwork),onClick:function(){e.handleClickIncreaseLockTimeButton()},children:xa(r.providerNetwork)?"Extend lock duration":"Wrong network"}):null]}),Object(ws.jsx)("div",{className:"chess-locker--arrow",children:Object(ws.jsx)(Rs.d,{})}),Object(ws.jsxs)("div",{className:"chess-locker--estimated-result",children:[this.Block({title:Object(ws.jsxs)(a.Fragment,{children:["veCHESS (Voting power)",Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:["veCHESS enables you to participate in the ".concat(B.join(" and ")," rebate program and governance voting."),Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/chess-token#how-exactly-is-voting-power-or-vechess-calculated"},target:"_blank",children:"Learn more"})]})})]}),bodyComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:Oo}),Object(ws.jsxs)("div",{className:"chess-locker--estimated-result--vechess",children:[Object(ws.jsx)("label",{children:D>0?J({number:D,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"}),Object(ws.jsx)("span",{children:"Your share of veCHESS: ".concat(v()(P).eq(0)?"0.0":v()(P).times(100).toFixed(4,1),"%")})]})]})}),this.Block({title:Object(ws.jsxs)(a.Fragment,{children:["Weekly ".concat(B.join(" and ")," rebate"),Object(ws.jsx)(Is,{contentComponent:Object(ws.jsxs)(a.Fragment,{children:["This is estimated based on the last 7-day protocol income and your share of veCHESS.",Object(ws.jsx)("br",{}),Object(ws.jsx)("br",{}),"Your actual weekly rebate earning from the rebate depends on the protocol's income and your share of veCHESS during each particular week. ",Object(ws.jsx)("br",{}),Object(ws.jsx)("br",{}),"Lock now and your newly added veCHESS will join the rebate pool starting on ".concat(j()(E).format("D MMM, HH:mm"),".")]})})]}),captionComponent:Object(ws.jsxs)(a.Fragment,{children:["Effective after ".concat(j()(E).format("D MMM, HH:mm")),Object(ws.jsx)("button",{className:"chess-locker--trigger-video-button button-style-7",onClick:function(){e.setState({shouldShowYoutubeModal:!0})},children:"Watch video tutorial"})]}),bodyComponent:Object(ws.jsxs)("div",{className:"chess-locker--estimated-result--rebate clearfix",children:[Object(ws.jsx)("img",{src:vo}),Object(ws.jsxs)("div",{className:"chess-locker--estimated-result--rebate--body",children:[Object(ws.jsxs)("label",{children:["Est. ",h.a.isNil(I.totalDollarValue)?"---":v()(I.totalDollarValue).eq(0)?"$0.0/week":v()(I.totalDollarValue).gt(1)?"$".concat(v()(I.totalDollarValue).toFormat(0,1),"/week"):"$".concat(v()(I.totalDollarValue).toFormat(2,1),"/week")]}),Object(ws.jsxs)("span",{children:["Est. ",h.a.isEmpty(I.assets)?"---":h.a.map(I.assets,(function(e,t){return"".concat(v()(e).gt(1)?v()(e).toFormat(2,1):v()(e).gt(0)?v()(e).toFixed(5,1):"0.0"," ").concat(t)})).join(" & ")]})]})]})}),this.Block({title:Object(ws.jsxs)(a.Fragment,{children:["Boost factor to staking rewards",Object(ws.jsx)(Is,{contentComponent:Object(ws.jsx)(a.Fragment,{children:"Boost factor speeds up your CHESS rewards via staking QUEEN, BISHOP or ROOK. Locking more CHESS or for longer time improves your boost factor. Over time, boost factor may fluctuate based on your share of total veCHESS and staking amount."})})]}),bodyComponent:Object(ws.jsx)(a.Fragment,{children:h.a.map(o,(function(e,t){var n=e.exchangeAddress,s=h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:null,r=F[s]||"",i=l[n];if(i){var o,c,d,m,p,b,f=u[n]||{},g=ve(f),j=g.mAmount,k=g.aAmount,x=g.bAmount,O=v()(D).div(v()(y||0).minus(R).plus(D)).toNumber(),A=ge({mAmount:j,aAmount:"0",bAmount:"0"}),N=ge({mAmount:"0",aAmount:k,bAmount:x}),w=ke({workingBalance:f.workingBalance,mAmount:j,aAmount:k,bAmount:x}),S=je({weightedSupply:i.weightedSupply,mAmount:j,aAmount:k,bAmount:x,veProportion:O}),C=v()(i.workingSupply).minus(f.workingBalance||0).plus(S.total).toString(),T=de({fundItem:e,shouldSkipAPY:!0}),E=de({fundItem:e,newWorkingSupply:C,shouldSkipAPY:!0});v()(j||0).gt(0)&&(o=h.a.isNil(T.stakingAPR.M)?null:v()(T.stakingAPR.M[0]).times(w.workingM).div(A).toString(),c=h.a.isNil(E.stakingAPR.M)?null:v()(E.stakingAPR.M[0]).times(S.workingM).div(A).toString()),v()(k||0).gt(0)&&(d=h.a.isNil(T.stakingAPR.A)?null:v()(T.stakingAPR.A[0]).times(w.workingAB).div(N).toString(),m=h.a.isNil(E.stakingAPR.A)?null:v()(E.stakingAPR.A[0]).times(S.workingAB).div(N).toString()),v()(x||0).gt(0)&&(p=h.a.isNil(T.stakingAPR.B)?null:v()(T.stakingAPR.B[0]).times(w.workingAB).div(N).toString(),b=h.a.isNil(E.stakingAPR.B)?null:v()(E.stakingAPR.B[0]).times(S.workingAB).div(N).toString());var M=Number(i.weightedSupply)>0&&Number(f.weightedBalance)>0?ye({weightedSupply:i.weightedSupply,workingSupply:i.workingSupply,mAmount:j,aAmount:k,bAmount:x,workingBalance:f.workingBalance,veProportion:1}):3,B=xe({workingSupply:i.workingSupply,mAmount:j,aAmount:k,bAmount:x,workingBalance:f.workingBalance});return D>R&&(B=ye({weightedSupply:i.weightedSupply,workingSupply:C,mAmount:j,aAmount:k,bAmount:x,workingBalance:S.total,veProportion:O})),Object(ws.jsxs)("div",{className:"chess-locker--estimated-result--boost-factor clearfix",children:[Object(ws.jsxs)("div",{className:"chess-locker--estimated-result--boost-factor--main clearfix",children:[Object(ws.jsx)(wo,{className:"chess-locker--dashboard",min:1,max:Number(M),value:Number(B)}),Object(ws.jsxs)("div",{className:"chess-locker--estimated-result--boost-factor--body",children:[Object(ws.jsxs)("label",{children:["".concat(s||""," Fund: "),v()(f.weightedBalance||0).gt(0)?"".concat(v()(B).toFixed(2),"x"):"N/A"]}),Object(ws.jsx)("span",{children:v()(f.weightedBalance||0).gt(0)?Object(ws.jsxs)(a.Fragment,{children:["Potential max boost: ".concat(v()(M).toFixed(2),"x"),Object(ws.jsx)(Is,{contentComponent:"This is decided by your current ".concat(r,"QUEEN/").concat(r,"BISHOP/").concat(r,"ROOK's staking amount.")})]}):"You are not staking any ".concat(r,"QUEEN, ").concat(r,"BISHOP or ").concat(r,"ROOK")})]})]}),Object(ws.jsxs)("div",{className:"chess-locker--estimated-result--boost-factor--remark",children:[r+L.M.name+" APR: ",h.a.isNil(o)?"n/a":"".concat(v()(o).times(100).toFixed(1,1),"%"),h.a.isNil(c)?"":" -> ".concat(v()(c).times(100).toFixed(1,1),"%"),Object(ws.jsx)("br",{}),r+L.A.name+" APR: ",h.a.isNil(d)?"n/a":"".concat(v()(d).times(100).toFixed(1,1),"%"),h.a.isNil(m)?"":" -> ".concat(v()(m).times(100).toFixed(1,1),"%"),Object(ws.jsx)("br",{}),r+L.B.name+" APR: ",h.a.isNil(p)?"n/a":"".concat(v()(p).times(100).toFixed(1,1),"%"),h.a.isNil(b)?"":" -> ".concat(v()(b).times(100).toFixed(1,1),"%")]})]},t)}}))})})]})]}),f&&this.ConfirmModal(),k&&Object(ws.jsx)(Pi,{url:"https://www.youtube.com/embed/IzeKPlWEIlU",onClickClose:function(){e.setState({shouldShowYoutubeModal:!1})}})]})}}]),n}(a.Component);Bo.defaultProps={mode:Mo.CREATE_LOCK,onSendLockTransaction:function(){}};var Ro=Object(o.c)((function(e){return{provider:e.provider,wallet:e.wallet,fundItems:e.fund.items,fundIncomes:e.fund.incomes,exchangeItems:e.exchange.items,exchangeAccountItems:e.exchange.account.items,votingEscrow:e.governance.votingEscrow}}))(Bo);v.a.config({EXPONENTIAL_AT:1e9});var Io=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={chessLockerModal:{shouldShow:!1,mode:Mo.INCREASE_LOCK_AMOUNT,shouldShowYoutubeModal:!1}},a}return Object(Os.a)(n,[{key:"_getFeeDistributorRewards",value:function(){for(var e=this.props,t=e.fundItems,n=e.feeDistributor,a={totalDollarValue:null,assets:{}},s=0,r=Object.values(n.items);s<r.length;s++){var i=r[s],o=i.fundAddress,c=i.currentRewards,l=ae(o),u=t[o],d=h.a.has(u,"assets.underlyingToken.symbol")?u.assets.underlyingToken.symbol:null;if(h.a.isNil(l)||h.a.isNil(c)||h.a.isNil(d)){a.totalDollarValue=null,a.assets={};break}a.totalDollarValue=v()(a.totalDollarValue||0).plus(v()(c).times(l)).toString(),a.assets[d]=v()(a.assets[d]||0).plus(c).toString()}return a}},{key:"handleClickWithdrawButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.prev=1,e.next=4,To.withdraw();case 4:if(n=e.sent,!h.a.has(n,"hash")){e.next=9;break}t(Ba({transactionResponse:n,title:"Withdraw locked CHESS"})),e.next=10;break;case 9:throw new Error("Cannot parse transaction's hash");case 10:e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),a=$(e.t0),t(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:a}))),console.error("ChessLockerContainer handleClickWithdrawButton error: ",a);case 17:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"Overview",value:function(){var e=this.props,t=e.votingEscrow,n=e.chessSupply,s=t.chessBalance,r=t.totalSupply,i=Number(s)>0?v()(r).times(K).div(s):null;return Object(ws.jsxs)("div",{className:"chess-locker-container--overview",children:[Object(ws.jsx)("div",{className:"chess-locker-container--overview--title",children:"Lock more to earn more"}),Object(ws.jsxs)("div",{className:"chess-locker-container--overview--description",children:["Total locked CHESS: ".concat(h.a.isNil(s)?"":J({number:s,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:0===Number(s)?1:2})," "),!h.a.isNil(s)&&h.a.has(n,"circulating")&&Number(n.circulating)>0&&"(".concat(v()(s).div(n.circulating).times(100).toFixed(2),"% of all circulating CHESS)"),!h.a.isNil(i)&&Object(ws.jsxs)(a.Fragment,{children:[" Average lock duration: ",i.gt(2592e3)?"".concat(i.div(2592e3).toFixed(1,1)," months"):"".concat(i.div(604800).toFixed(1,1)," weeks")]})]}),Object(ws.jsx)("img",{src:"data:image/png;base64,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"})]})}},{key:"ChessLockerModal",value:function(){var e=this,t=this.props.votingEscrow,n=this.state.chessLockerModal,s=n.shouldShow,r=n.mode,i=t.account,o=i.amount,c=i.unlockTime;return s?Object(ws.jsx)(Fs.a,{overlayClassName:"chess-locker-container--locker-modal--overlay",className:"chess-locker-container--locker-modal",isOpen:!0,children:Object(ws.jsxs)("div",{className:"chess-locker-container--locker-modal--main centered",children:[Object(ws.jsxs)("div",{className:"chess-locker-container--locker-modal--header",children:[Object(ws.jsx)("div",{className:"chess-locker-container--locker-modal--title",children:r===Mo.CREATE_LOCK?"Lock CHESS":r===Mo.INCREASE_LOCK_AMOUNT?"Lock more CHESS":r===Mo.EXTEND_LOCK_TIME?"Extend lock duration":""}),Object(ws.jsx)("button",{className:"chess-locker-container--locker-modal--close-button",onClick:function(){e.setState({chessLockerModal:b.a.set(n,"shouldShow",!1)})},children:Object(ws.jsx)(Rs.p,{})})]}),[Mo.INCREASE_LOCK_AMOUNT,Mo.EXTEND_LOCK_TIME].includes(r)&&Object(ws.jsx)("div",{className:"chess-locker-container--locker-modal--description",children:r===Mo.INCREASE_LOCK_AMOUNT?Object(ws.jsxs)(a.Fragment,{children:["Your locked CHESS: ".concat(J({number:o,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}),"."),r===Mo.INCREASE_LOCK_AMOUNT&&" When you lock more, all your locked CHESS will follow the same duration and be locked until ".concat(j()(c).format("D MMM YYYY, HH:mm"),".")]}):Object(ws.jsx)(a.Fragment,{children:"Currently, ".concat(J({number:o,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2})," CHESS are locked until ").concat(j()(c).format("D MMM YYYY, HH:mm"),".")})}),Object(ws.jsx)("div",{className:"chess-locker-container--locker-modal--body",children:Object(ws.jsx)(Ro,{mode:r,onSendLockTransaction:function(){e.setState({chessLockerModal:b.a.set(n,"shouldShow",!1)})}})})]})}):null}},{key:"Block",value:function(e){var t=e.className,n=e.title,a=e.description,s=e.leftComponent,r=e.rightComponent,i=e.remarks,o=e.buttonComponent,c=e.isBlocked;return Object(ws.jsxs)("div",{className:"chess-locker-container--block"+(c?" is-blocked":"")+(t?" ".concat(t):""),children:[n&&Object(ws.jsx)("div",{className:"chess-locker-container--block--title",children:n}),a&&Object(ws.jsx)("div",{className:"chess-locker-container--block--description"+(n?"":" nil-title"),children:a}),(s||r)&&Object(ws.jsxs)("div",{className:"chess-locker-container--block--main clearfix",children:[Object(ws.jsx)("div",{className:"chess-locker-container--block--left-component clearfix",children:s}),r&&Object(ws.jsx)("div",{className:"chess-locker-container--block--right-component",children:r})]}),i&&Object(ws.jsx)("div",{className:"chess-locker-container--block--remarks",children:i}),o&&Object(ws.jsx)("div",{className:"chess-locker-container--block--button",children:o})]})}},{key:"LockedResult",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.provider,r=t.wallet,i=t.exchange,o=t.fundItems,c=t.votingEscrow,l=t.feeDistributor,u=c.account,d=c.totalSupply,m=l.items,p=l.accounts,b=h.a.map(o,(function(e){return h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:""})),f=h.a.isNil(s.blockTimestamp)?j()():j()(s.blockTimestamp),g=Number(u.amount)>0?j()(u.unlockTime):null,k=re(f),x=Number(u.amount)>0&&f.isBefore(u.unlockTime),y=X(),O=x?_({initialAmount:Number(u.amount),unlockTimestamp:u.unlockTime,timestamp:f.toISOString()}):0,A=O>0&&Number(d)>0?v()(O).div(d).times(100):0,N=h.a.some(p,(function(e){return Number(e.currentBalance)>0})),w=this._getFeeDistributorRewards();return Object(ws.jsxs)("div",{className:"chess-locker-container--locked-result",children:[Object(ws.jsxs)("section",{className:"chess-locker-container--locked-result--section section-1",children:[this.Block({className:"locked-chess",title:"Your locked CHESS",leftComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:Es}),Object(ws.jsx)("label",{children:h.a.isNil(u.amount)?"---":Number(u.amount)>0?J({number:u.amount,defaultPrecision:2,shouldApplyFloorValue:!0,shouldReturnLocalString:!0}):"0.0"})]}),remarks:h.a.isNil(g)?"":"Locked until ".concat(g.format("D MMM YYYY, HH:mm"))}),this.Block({className:"lock-chess-apy",title:"",leftComponent:Object(ws.jsxs)("div",{className:"chess-locker-container--lock-chess-apy",children:[Object(ws.jsx)("label",{children:"Indicative APY"}),Object(ws.jsx)("div",{className:"chess-locker-container--lock-chess-apy--value clearfix",children:h.a.isNil(y)?Object(ws.jsx)("span",{children:"---"}):Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("span",{children:"".concat(v()(y).times(100).toFixed(1,1),"%")}),Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:["Lock CHESS and be eligible for ".concat(b.join(" and ")," rebate. The indicative annualized percentage yield is based on the last 7-day protocol income, CHESS token price, and the average lock duration, compounded manually on a weekly basis."),Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/chess-token#how-to-calculate-the-apy-for-staking-chess"},target:"_blank",children:"Learn more"})]})})]})})]})}),!h.a.isNil(u.amount)&&Object(ws.jsx)("div",{className:"chess-locker-container--locked-result--locker-buttons",children:Number(u.amount)>0?Object(ws.jsx)(a.Fragment,{children:f.isBefore(g)?Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("button",{className:"chess-locker-container--locked-result--locker-button button-style-6",onClick:function(){e.setState({chessLockerModal:{shouldShow:!0,mode:Mo.INCREASE_LOCK_AMOUNT}})},children:"Lock more CHESS"}),Object(ws.jsx)("button",{className:"chess-locker-container--locked-result--locker-button button-style-6",onClick:function(){e.setState({chessLockerModal:{shouldShow:!0,mode:Mo.EXTEND_LOCK_TIME}})},children:"Extend lock duration"})]}):h.a.isNil(r.address)?Object(ws.jsx)("button",{className:"button-style-5",onClick:function(){n(_e(!0))},children:"Connect wallet"}):Object(ws.jsx)("button",{className:"chess-locker-container--locked-result--withdraw-button button-style-5",disabled:!xa(r.providerNetwork),onClick:function(){e.handleClickWithdrawButton()},children:xa(r.providerNetwork)?"Withdraw":"Wrong network"})}):Object(ws.jsx)("button",{className:"chess-locker-container--locked-result--create-lock-button button-style-5",onClick:function(){e.setState({chessLockerModal:{shouldShow:!0,mode:Mo.CREATE_LOCK}})},children:"Lock CHESS"})})]}),Object(ws.jsx)("hr",{}),Object(ws.jsxs)("section",{className:"chess-locker-container--locked-result--section section-2",children:[this.Block({className:"voting-power",title:Object(ws.jsxs)(a.Fragment,{children:["Your veCHESS",Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:["veCHESS enables you to participate in the rebate program and governance voting.",Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/chess-token#how-exactly-is-voting-power-or-vechess-calculated"},target:"_blank",children:"Learn more"})]})})]}),leftComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:Oo}),Object(ws.jsx)("label",{children:h.a.isNil(u.amount)?"---":O>0?J({number:O,defaultPrecision:2,shouldApplyFloorValue:!0,shouldReturnLocalString:!0}):"0.0"})]}),remarks:Object(ws.jsxs)(a.Fragment,{children:["Your share of veCHESS: ".concat(h.a.isNil(u.amount)?"---":v()(A).eq(0)?"0.0%":v()(A).toFixed(4,1)+"%"),Object(ws.jsx)("br",{}),"Vote for your preferred interest spread under ",Object(ws.jsx)(ks.b,{to:"/governance",children:Object(ws.jsx)("button",{className:"button-style-7",children:"Governance"})})]})}),this.Block({className:"fee-distributor",title:Object(ws.jsxs)(a.Fragment,{children:["This week's rebate pool",Object(ws.jsx)(Is,{canHoverPopup:!0,mouseLeaveToClosePopupDelay:800,contentComponent:Object(ws.jsxs)(a.Fragment,{children:["This week's rebate pool accumulates 50% of protocol fee starting from ".concat(j()(k).add(-604800,"seconds").format("D MMM, HH:mm"),"."),Object(ws.jsx)("br",{}),Object(ws.jsx)("button",{className:"chess-locker-container--youtube-link",onClick:function(){e.setState({shouldShowYoutubeModal:!0})},children:"Watch a video on how rebate works"}),N&&Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("br",{}),Object(ws.jsx)("br",{}),"Your rebate earning ",h.a.map(p,(function(e,t){var n=e.fundAddress,a=e.currentBalance,s=o[n],r=m[t]||{},i=ae(n),c=h.a.has(s,"assets.underlyingToken.symbol")?s.assets.underlyingToken.symbol:null,l=r.currentRewards,u=r.currentSupply;if(!h.a.isNil(s)&&!h.a.isNil(l)&&!h.a.isNil(a)&&!h.a.isNil(u)&&!h.a.isNil(i)){var d=Number(u)>0?v()(l||0).times(a||0).div(u).toString():0,p=v()(d).times(i||0).toString();return"".concat(v()(d).gt(1)?v()(d).toFixed(2,1):v()(d).gt(0)?v()(d).toPrecision(3,1):"0.0"," \n                                                        ").concat(c?" ".concat(c):" "," \n                                                        (Est. $").concat(v()(p).gt(1)?v()(p).toFixed(2,1):v()(p).gt(0)?v()(p).toPrecision(2,1):"0.0",")")}})).join(", ")," from the current pool will be claimable after ".concat(j()(k).format("D MMM, HH:mm"),".")]})]})})]}),leftComponent:Object(ws.jsxs)("div",{className:"chess-locker-container--locked-result--fee-distributor-item",children:[Object(ws.jsx)("img",{src:vo}),Object(ws.jsxs)("div",{className:"chess-locker-container--locked-result--fee-distributor-item--main",children:[Object(ws.jsxs)("div",{className:"chess-locker-container--locked-result--fee-distributor-item--usd-value",children:["Est. ",h.a.isNil(w.totalDollarValue)?"---":v()(w.totalDollarValue).gt(1)?"$".concat(v()(w.totalDollarValue).toFormat(0)):v()(w.totalDollarValue).gt(0)?"$".concat(v()(w.totalDollarValue).toFixed(2)):"$0.0"]}),Object(ws.jsx)("div",{className:"chess-locker-container--locked-result--fee-distributor-item--underlying-value",children:h.a.isEmpty(w.assets)?"---":h.a.map(w.assets,(function(e,t){return"".concat(v()(e).gt(1)?v()(e).toFormat(2,1):v()(e).gt(0)?v()(e).toFixed(4,1):"0.0"," ").concat(t)})).join(" & ")})]})]}),remarks:Object(ws.jsxs)(a.Fragment,{children:["Accumulate until: ".concat(j()(k).format("D MMM, HH:mm")),Object(ws.jsx)("br",{}),"Your share of the current pool: ",h.a.isEmpty(p)?"---":h.a.map(p,(function(e,t){var n=e.fundAddress,a=e.currentBalance,s=o[n],r=(m[t]||{}).currentSupply,i=h.a.has(s,"assets.underlyingToken.symbol")?s.assets.underlyingToken.symbol:null,c=h.a.isNil(a)||h.a.isNil(r)?null:Number(r)>0?v()(a||0).div(r).times(100).toString():0;if(!h.a.isNil(i))return"".concat(i," ").concat(h.a.isNil(c)?"---":v()(c).gt(0)?"".concat(v()(c).toFixed(4,1),"%"):"0.0%")})).join(", "),Object(ws.jsx)("br",{}),"Your share of next week's pool: ",h.a.isEmpty(p)?"---":h.a.map(p,(function(e,t){var n=e.fundAddress,a=e.amount,s=e.unlockTime,r=o[n],i=h.a.has(r,"assets.underlyingToken.symbol")?r.assets.underlyingToken.symbol:null,c=(m[t]||{}).tradingWeekTotalSupply,l=Number(a)>0?_({initialAmount:Number(a),unlockTimestamp:s,timestamp:k}):0,u=h.a.isNil(a)||h.a.isNil(c)?null:Number(c)>0?v()(l).div(c).times(100).toString():0;if(!h.a.isNil(i))return"".concat(i," ").concat(h.a.isNil(u)?"---":v()(u).gt(0)?"".concat(v()(u).toFixed(4,1),"%"):"0.0%")})).join(", ")]})}),this.Block({className:"boosting-factor",title:Object(ws.jsxs)(a.Fragment,{children:["Boost factor to staking rewards",Object(ws.jsx)(Is,{contentComponent:"Boost factor speeds up your CHESS rewards via staking QUEEN, BISHOP or ROOK. Locking more CHESS or for longer time improves your boost factor. Over time, boost factor may fluctuate based on your share of total veCHESS and staking amount."})]}),leftComponent:Object(ws.jsx)(a.Fragment,{children:h.a.map(o,(function(e,t){var n=e.exchangeAddress,a=i.items[n],s=h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:null;if(!h.a.isNil(a)){var r=i.account.items[n],o=ve(r),c=o.mAmount,l=o.aAmount,u=o.bAmount,d=Number(a.workingSupply)>0&&!h.a.isNil(r)?xe({workingSupply:a.workingSupply,mAmount:c,aAmount:l,bAmount:u,workingBalance:r.workingBalance}):1,m=Number(a.weightedSupply)>0&&!h.a.isNil(r)&&Number(r.weightedBalance)>0?ye({weightedSupply:a.weightedSupply,workingSupply:a.workingSupply,mAmount:c,aAmount:l,bAmount:u,workingBalance:r.workingBalance,veProportion:1}):3;return Object(ws.jsxs)("div",{className:"chess-locker-container--locked-result--boosting-factor-item",children:[Object(ws.jsx)(wo,{className:"chess-locker-container--dashboard",min:1,max:Number(m),value:Number(d)}),Object(ws.jsxs)("label",{children:["".concat(s||""," Fund: "),!h.a.isNil(r)&&Number(r.weightedBalance)>0?"".concat(v()(d).toFixed(2),"x"):"N/A"]}),Object(ws.jsx)("div",{className:"chess-locker-container--locked-result--boosting-factor-item--potential-max",children:"Potential max boost: ".concat(v()(m).toFixed(2),"x")})]},t)}}))}),remarks:Object(ws.jsx)(ks.b,{to:"/simulator",children:Object(ws.jsx)("button",{className:"button-style-7",children:"Simulate your staking strategy"})})})]})]})}},{key:"render",value:function(){var e=this,t=this.state.shouldShowYoutubeModal;return Object(ws.jsxs)("div",{className:"chess-locker-container",children:[this.Overview(),this.LockedResult(),this.ChessLockerModal(),t&&Object(ws.jsx)(Pi,{url:"https://www.youtube.com/embed/IzeKPlWEIlU",onClickClose:function(){e.setState({shouldShowYoutubeModal:!1})}})]})}}]),n}(a.Component);var Do=Object(o.c)((function(e){return{provider:e.provider,wallet:e.wallet,fundItems:e.fund.items,exchange:e.exchange,votingEscrow:e.governance.votingEscrow,feeDistributor:e.governance.feeDistributor,chessSupply:e.governance.chessSupply}}))(Io),Po=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"render",value:function(){var e=this.props,t=e.coins,n=e.title,a=e.description,s=e.actionComponent;return Object(ws.jsxs)("div",{className:"external-link-block",children:[Object(ws.jsxs)("div",{className:"external-link-block--main clearfix",children:[Object(ws.jsx)("div",{className:"external-link-block--coins",children:h.a.map(t,(function(e,t){return Object(ws.jsx)("img",{src:e},t)}))}),Object(ws.jsxs)("div",{className:"external-link-block--content",children:[Object(ws.jsx)("label",{className:a?"has-description":"",children:n}),a&&Object(ws.jsx)("span",{children:a})]})]}),Object(ws.jsx)("div",{className:"external-link-block--action",children:s})]})}}]),n}(a.Component),Lo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"handleClickSyncButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:"",n=this.props,a=n.dispatch,s=n.fundItems,r=s[t],i=h.a.has(r,"assets.underlyingToken.symbol")?r.assets.underlyingToken.symbol:null,o=Jt(t),h.a.isNil(o)){e.next=22;break}return e.prev=6,e.next=9,o.exchange.syncWithVotingEscrow();case 9:if(c=e.sent,!h.a.has(c,"hash")){e.next=14;break}a(Ba({transactionResponse:c,title:"Boost ".concat(i||""," fund CHESS rewards")})),e.next=15;break;case 14:throw new Error("Cannot parse transaction's hash");case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(6),l=$(e.t0),a(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:l}))),console.error("ExchangeAccountSyncVotingEscrow handleClickSyncButton error: ",l);case 22:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.wallet,r=t.fundItems,i=t.exchangeAccountItems,o=t.votingEscrowAccount;return Object(ws.jsx)(a.Fragment,{children:h.a.map(i,(function(t){var a=t.fundAddress,i=r[a],c=h.a.has(i,"assets.underlyingToken.symbol")?i.assets.underlyingToken.symbol:null,l=F[c]||"",u=h.a.has(i,"summary.rebalanceSize")&&Number(i.summary.rebalanceSize)>0;return!h.a.isNil(i)&&Oe({exchangeAccount:t,votingEscrowAccount:o})?Object(ws.jsxs)("div",{className:"exchange-account-sync-voting-escrow clearfix",children:[Object(ws.jsx)("div",{className:"exchange-account-sync-voting-escrow--title",children:u?"Enroll your veCHESS to continue ".concat(c||""," fund boosting"):"Enroll your veCHESS to start ".concat(c||""," fund boosting")}),Object(ws.jsx)("div",{className:"exchange-account-sync-voting-escrow--description",children:u?"Boosting was paused due to Rebalance. Enroll again to continue boosting your staking rewards.":"Enroll to speed up your CHESS rewards from your staked ".concat(l,"QUEEN/").concat(l,"BISHOP/").concat(l,"ROOK.")}),h.a.isNil(s.address)?Object(ws.jsx)("button",{className:"exchange-account-sync-voting-escrow--button connect-button button-style-5",onClick:function(){n(_e(!0))},children:"Connect wallet"}):Object(ws.jsx)("button",{className:"exchange-account-sync-voting-escrow--button enroll-button button-style-5",disabled:!xa(s.providerNetwork),onClick:function(){e.handleClickSyncButton(a)},children:xa(s.providerNetwork)?"Enroll":"Wrong network"})]},a):null}))})}}]),n}(a.Component);var Fo=Object(o.c)((function(e){return{wallet:e.wallet,fundItems:e.fund.items,exchangeAccountItems:e.exchange.account.items,votingEscrowAccount:e.governance.votingEscrow.account}}))(Lo),Uo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"handleClickSyncFeeDistributorButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:"",n=this.props,a=n.dispatch,s=n.fundItems,r=s[t],i=h.a.has(r,"assets.underlyingToken.symbol")?r.assets.underlyingToken.symbol:null,o=Jt(t),h.a.isNil(o)){e.next=22;break}return e.prev=6,e.next=9,o.feeDistributor.syncWithVotingEscrow();case 9:if(c=e.sent,!h.a.has(c,"hash")){e.next=14;break}a(Ba({transactionResponse:c,title:"Enroll veCHESS to earn ".concat(i||""," rebate")})),e.next=15;break;case 14:throw new Error("Cannot parse transaction's hash");case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(6),l=$(e.t0),a(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:l}))),console.error("FeeDistributorEnroll handleClickSyncFeeDistributorButton error: ",l);case 22:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.provider,r=t.wallet,i=t.fundItems,o=t.votingEscrowAccount,c=t.feeDistributorAccounts,l=re(s.blockTimestamp),u=Number(o.amount)>0?_({initialAmount:Number(o.amount),unlockTimestamp:o.unlockTime,timestamp:l}):0;return Object(ws.jsx)(a.Fragment,{children:h.a.map(c,(function(t,a){var s=t.fundAddress,o=t.amount,c=t.unlockTime,d=i[s],m=h.a.has(d,"assets.underlyingToken.symbol")?d.assets.underlyingToken.symbol:null,p=Number(o)>0?_({initialAmount:Number(o),unlockTimestamp:c,timestamp:l}):0;return!h.a.isNil(d)&&!h.a.isNil(o)&&v()(u).gt(p)?Object(ws.jsxs)("div",{className:"fee-distributor-enroll clearfix",children:[Object(ws.jsx)("div",{className:"fee-distributor-enroll--title",children:"Enroll your veCHESS to earn Weekly ".concat(m||""," rebate")}),Object(ws.jsx)("div",{className:"fee-distributor-enroll--description",children:"Your veCHESS need to be enrolled. No worries, there's no additional lock time."}),h.a.isNil(r.address)?Object(ws.jsx)("button",{className:"fee-distributor-enroll--button connect-button button-style-5",onClick:function(){n(_e(!0))},children:"Connect wallet"}):Object(ws.jsx)("button",{className:"fee-distributor-enroll--button enroll-button button-style-5",disabled:!xa(r.providerNetwork)||0===Number(u),onClick:function(){e.handleClickSyncFeeDistributorButton(s)},children:xa(r.providerNetwork)?"Enroll":"Wrong network"})]},a):null}))})}}]),n}(a.Component);var Ho=Object(o.c)((function(e){return{provider:e.provider,wallet:e.wallet,fundItems:e.fund.items,votingEscrowAccount:e.governance.votingEscrow.account,feeDistributorAccounts:e.governance.feeDistributor.accounts}}))(Uo),Vo={STAKING_DETAIL:"Staking details",LOCK_CHESS:"Lock CHESS for more rewards"},Wo=function(){var e=sessionStorage.stakingPageTab;return h.a.keys(Vo).includes(e)?e:h.a.keys(Vo)[0]},Yo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={pageTab:Wo(),shouldShowYoutubeModal:!1},a._mounted=!1,a.polling=null,a.chessLockerNode=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location;this._mounted=!0,this._getData(),this.polling=setInterval((function(){e._getData()}),1e4),h.a.isEmpty(t.hash)||("#detail"===t.hash?this._focusTradingDetail():"#locker"===t.hash&&this._focusChessLocker())}},{key:"componentDidUpdate",value:function(e){var t=e.location,n=this.props.location;h.a.isEqual(t.key,n.key)||h.a.isEmpty(n.hash)||("#detail"===n.hash?this._focusTradingDetail():"#locker"===n.hash&&this._focusChessLocker())}},{key:"componentWillUnmount",value:function(){this._mounted=!1,this.polling&&window.clearInterval(this.polling)}},{key:"_focusTradingDetail",value:function(){this.setState({pageTab:"STAKING_DETAIL"})}},{key:"_focusChessLocker",value:function(){var e=this;this.setState({pageTab:"LOCK_CHESS"},(function(){setTimeout((function(){e._mounted&&e.chessLockerNode&&e.chessLockerNode.scrollIntoView({behavior:"smooth",block:"nearest"})}),500)}))}},{key:"_getData",value:function(){var e=this.props.dispatch;e(es()),e(Kn())}},{key:"Tabs",value:function(){var e=this,t=this.state.pageTab;return Object(ws.jsxs)("div",{className:"staking-page--tabs",children:[Object(ws.jsx)("div",{className:"staking-page--tabs--main",children:h.a.map(Vo,(function(n,a){return Object(ws.jsx)("button",{className:"staking-page--tab"+(a===t?" selected":""),onClick:function(){var t;t=a,sessionStorage.stakingPageTab=t,e.setState({pageTab:Wo()})},children:n},a)}))}),"LOCK_CHESS"===t&&Object(ws.jsxs)("button",{className:"staking-page--youtube-link",onClick:function(){e.setState({shouldShowYoutubeModal:!0})},children:[Object(ws.jsx)(Rs.n,{}),Object(ws.jsx)("span",{children:"How Lock CHESS works"})]})]})}},{key:"render",value:function(){var e,t,n=this,s=this.props.pancakePair,r=this.state,i=r.pageTab,o=r.shouldShowYoutubeModal;return h.a.isEmpty(s.token0)||h.a.isEmpty(s.token1)||![s.token0,s.token1].includes("0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6")||(e="0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6"===s.token0?s.token0:s.token1,t="0x20de22029ab63cf9A7Cf5fEB2b737Ca1eE4c82A6"===s.token0?s.token1:s.token0),Object(ws.jsxs)("div",{className:"staking-page page",children:[Object(ws.jsxs)(Ts.a,{children:[Object(ws.jsx)("title",{children:"Staking - Tranchess"}),Object(ws.jsx)("meta",{name:"description",content:"Harvest CHESS by Staking QUEEN, BISHOP or ROOK anytime."})]}),Object(ws.jsx)("div",{className:"page--body",children:Object(ws.jsxs)("div",{className:"page--main",children:[Object(ws.jsx)(fi,{}),Object(ws.jsx)("div",{className:"staking-page--title",children:"Staking"}),Object(ws.jsx)("div",{className:"staking-page--overview",children:Object(ws.jsx)(ko,{})}),this.Tabs(),"STAKING_DETAIL"===i&&Object(ws.jsx)("div",{className:"staking-page--details clearfix",children:Object(ws.jsx)(yo,{})}),"LOCK_CHESS"===i&&Object(ws.jsxs)("div",{className:"staking-page--chess-locker",ref:function(e){return n.chessLockerNode=e},children:[Object(ws.jsx)(Ho,{}),Object(ws.jsx)(Fo,{}),Object(ws.jsx)(Do,{})]}),!h.a.isNil(e)&&!h.a.isEmpty(t)&&"STAKING_DETAIL"===i&&Object(ws.jsxs)("div",{className:"staking-page--external-links",children:[Object(ws.jsx)("div",{className:"staking-page--sub-title",children:"More"}),Object(ws.jsxs)("div",{className:"staking-page--external-links--main",children:[Object(ws.jsx)(Po,{coins:[Es],title:"Need more CHESS?",description:"Buy on Binance or PancakeSwap",actionComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(ks.b,{to:{pathname:"https://www.binance.com/en/trade/CHESS_USDT"},target:"_blank",children:Object(ws.jsxs)("button",{className:"button-style-6",children:[Object(ws.jsx)("img",{src:bo})," Binance"]})}),Object(ws.jsx)(ks.b,{to:{pathname:"https://pancakeswap.finance/swap?inputCurrency=".concat(t,"&outputCurrency=").concat(e)},target:"_blank",children:Object(ws.jsxs)("button",{className:"button-style-6",children:[Object(ws.jsx)("img",{src:fo})," Pancake"]})})]})}),Object(ws.jsx)(Po,{coins:[Es,U.USDC],title:"CHESS-USDC-LP",description:"Earn by providing liquidity",actionComponent:Object(ws.jsx)(ks.b,{to:{pathname:"https://pancakeswap.finance/add/".concat(e,"/").concat(t)},target:"_blank",children:Object(ws.jsxs)("button",{className:"button-style-6",children:["Create LP on ",Object(ws.jsx)("img",{src:fo})," PancakeSwap"]})})})]})]})]})}),o&&Object(ws.jsx)(Pi,{url:"https://www.youtube.com/embed/NWYHBXfmJjE",onClickClose:function(){n.setState({shouldShowYoutubeModal:!1})}}),Object(ws.jsx)(Hi,{walletTokens:[],shouldHideStakedBalance:!0})]})}}]),n}(a.Component);var Ko=Object(xs.f)(Object(o.c)((function(e){return{pancakePair:e.governance.pancakePair}}))(Yo)),zo=Ee.a.utils.formatUnits,Go={contract:new Ee.a.Contract("0xeB76E34834fB0E2c31D92f0284466385bcE5c09A",["function cast (uint256 option)","function getReceipt (address voter) view returns (tuple(uint256 amount, uint256 unlockTime, uint256 votes))","function balanceOf (address account) view returns (uint256)","function balanceOfAtTimestamp (address account, uint256 timestamp) view returns (uint256)"],it()),cast:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,e.next=3,rt();case 3:return n=e.sent,a=n.getSigner(),s=this.contract.connect(a),e.next=8,s.cast(t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getReceipt:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.getReceipt(t);case 2:return n=e.sent,a={chessAmount:zo(n[0]),unlockTimestamp:j.a.unix(n[1]).toISOString(),weight:zo(n[2])},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),balanceOf:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.balanceOf(t);case 2:return n=e.sent,e.abrupt("return",zo(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),balanceOfAtTimestamp:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:0,e.next=3,this.contract.balanceOfAtTimestamp(t,n);case 3:return a=e.sent,e.abrupt("return",zo(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},qo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"_getEstimatedOutcome",value:function(){var e=this.props.interestRateBallot.votingPowers,t=null,n=0,a=0;return h.a.forEach(e,(function(e){var t=e.weight,s=e.power;n+=Number(s),a+=Number(t)*Number(s)})),n>0&&(t=a/n),t}},{key:"_getVotingEscrowAccountVotingPowerAtCurrentWeek",value:function(){var e=this.props,t=e.votingEscrowAccount,n=e.provider,a=re(n.blockTimestamp);return h.a.isNil(t.amount)?null:Number(t.amount)>0?_({initialAmount:Number(t.amount),unlockTimestamp:t.unlockTime,timestamp:a}):0}},{key:"handleClickCastVoteButton",value:function(){var e=Object(Se.a)(we.a.mark((function e(t){var n,a,s;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.dispatch,e.prev=1,e.next=4,Go.cast(t);case 4:if(a=e.sent,!h.a.has(a,"hash")){e.next=10;break}n(Ba({transactionResponse:a,title:"Vote interest rate"})),setTimeout((function(){n(Yn())}),2e3),e.next=11;break;case 10:throw new Error("Cannot parse transaction's hash");case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),s=$(e.t0),n(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:s}))),console.error("InterestRateBallot handleClickCastVoteButton Error: ",e.t0);case 18:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"InfoBlock",value:function(e){var t=e.titleComponent,n=e.headerRightSection,a=e.mainComponent;return Object(ws.jsxs)("div",{className:"interest-rate-ballot--info-block",children:[Object(ws.jsxs)("div",{className:"interest-rate-ballot--info-block--header clearfix",children:[Object(ws.jsx)("div",{className:"interest-rate-ballot--info-block--title",children:t}),n&&Object(ws.jsx)("div",{className:"interest-rate-ballot--info-block--header--right-section",children:n})]}),Object(ws.jsx)("div",{className:"interest-rate-ballot--info-block--main",children:a})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.isFetchingInterestRateBallot,r=t.interestRateBallot,i=t.wallet,o=t.provider,c=r.votingPowers,l=r.account,u=this._getEstimatedOutcome(),d=this._getVotingEscrowAccountVotingPowerAtCurrentWeek(),m=Number(l.amount)>0,p=re(o.blockTimestamp);return Object(ws.jsxs)("div",{className:"interest-rate-ballot",children:[Object(ws.jsxs)("div",{className:"interest-rate-ballot--header",children:[Object(ws.jsx)("div",{className:"interest-rate-ballot--title",children:"Interest spread ballot"}),Object(ws.jsx)("div",{className:"interest-rate-ballot--period",children:"".concat(j()(p).add(-604800,"seconds").format("D MMM, HH:mm")," - ").concat(j()(p).format("D MMM, HH:mm"))}),s&&Object(ws.jsx)("img",{src:Hr})]}),Object(ws.jsx)("div",{className:"interest-rate-ballot--description",children:"This ballot decides the interest spread to be added to the USDC interest rate fetched from Venus. The final sum would be the total interest rate which Rook needs to pay Bishop for the next 7-day period."}),Object(ws.jsxs)("div",{className:"interest-rate-ballot--body",children:[Object(ws.jsxs)("div",{className:"interest-rate-ballot--overview clearfix",children:[this.InfoBlock({titleComponent:Object(ws.jsxs)(a.Fragment,{children:["Projected outcome",Object(ws.jsx)(Is,{contentComponent:"This is based on the volume weighted average of the voting distribution."})]}),mainComponent:Object(ws.jsx)(a.Fragment,{children:Object(ws.jsx)("span",{children:h.a.isNumber(u)?"+".concat((100*u).toFixed(4),"%"):"---"})})}),this.InfoBlock({titleComponent:Object(ws.jsxs)(a.Fragment,{children:["Your eligible voting power",Object(ws.jsx)(Is,{contentComponent:"Your eligible voting power for the current ballot period is determined by your total veCHESS amount as of ".concat(j()(p).format("D MMM, HH:mm"))})]}),headerRightSection:Object(ws.jsx)(ks.b,{to:"/staking#locker",children:Object(ws.jsx)("button",{className:"button-style-7",children:"Get more veCHESS"})}),mainComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("img",{src:Oo}),Object(ws.jsx)("span",{children:h.a.isNil(d)?"---":d>0?J({number:d,shouldApplyFloorValue:!0,shouldReturnLocalString:!0}):"0.0"})]})})]}),Object(ws.jsx)("hr",{}),Object(ws.jsxs)("div",{className:"interest-rate-ballot--main",children:[Object(ws.jsx)("div",{className:"interest-rate-ballot--main--title",children:"Interest rate adjustment"}),Object(ws.jsx)("div",{className:"interest-rate-ballot--main--options",children:h.a.map(z,(function(t,s){var r=h.a.find(c,(function(e){return v()(e.weight).eq(t)})),o=Number(l.amount)>0&&v()(l.weight).eq(t),u=m?_({initialAmount:Number(l.amount),unlockTimestamp:l.unlockTime,timestamp:p}):0;return Object(ws.jsxs)("div",{className:"interest-rate-ballot--option",children:[Object(ws.jsx)("div",{className:"interest-rate-ballot--option--rate",children:"+"+(100*Number(t)).toFixed("2")+"%"}),Object(ws.jsx)("div",{className:"interest-rate-ballot--option--total-voting-power",children:"Total casted voting power: ".concat(r?J({number:r.power,shouldReturnLocalString:!0,shouldApplyFloorValue:!0,defaultPrecision:2}):"0.0")}),m&&Object(ws.jsx)("div",{className:"interest-rate-ballot--option--user-voting-power",children:o?Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(Rs.h,{}),"You casted ".concat(u>0?J({number:u,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:2}):"0.0"," voting power")]}):null}),h.a.isNil(i.address)?Object(ws.jsx)("button",{className:"interest-rate-ballot--option--submit-button button-style-5",onClick:function(){n(_e(!0))},children:"Connect wallet"}):Object(ws.jsx)("button",{className:"interest-rate-ballot--option--submit-button button-style-5",disabled:!xa(i.providerNetwork)||0===Number(d)||o&&u===d,onClick:function(){e.handleClickCastVoteButton(s)},children:xa(i.providerNetwork)?0===Number(d)?"No voting power":"Cast all my votes":"Wrong network"})]},s)}))})]})]})]})}}]),n}(a.Component);var _o=Object(o.c)((function(e){return{provider:e.provider,wallet:e.wallet,votingEscrowAccount:e.governance.votingEscrow.account,interestRateBallot:e.governance.interestRateBallot,isFetchingInterestRateBallot:e.governance.isFetchingInterestRateBallot}}))(qo),Qo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e))._mounted=!1,a.polling=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,this._getData(),this.polling=setInterval((function(){e._getData()}),1e4)}},{key:"componentWillUnmount",value:function(){this._mounted=!1,this.polling&&window.clearInterval(this.polling)}},{key:"_getData",value:function(){(0,this.props.dispatch)(Yn())}},{key:"render",value:function(){return Object(ws.jsxs)("div",{className:"governance-page page",children:[Object(ws.jsx)(Ts.a,{children:Object(ws.jsx)("title",{children:"Governance - Tranchess"})}),Object(ws.jsx)("div",{className:"page--body",children:Object(ws.jsxs)("div",{className:"page--main",children:[Object(ws.jsx)(fi,{}),Object(ws.jsx)("div",{className:"governance-page--title",children:"Governance"}),Object(ws.jsx)(_o,{})]})}),Object(ws.jsx)(Hi,{walletTokens:["chess"],shouldHideStakedBalance:!0})]})}}]),n}(a.Component);var Xo=Object(o.c)((function(){return{}}))(Qo),Jo=n(152),Zo=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={focusedOptionIndex:0,inputValue:"",showOptions:!1},a.searchSelect=null,a.renderedOptions=[],a.handleClickBody=a.handleClickBody.bind(Object(Ms.a)(a)),a.handleKeyDownWindow=a.handleKeyDownWindow.bind(Object(Ms.a)(a)),a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.focusedOptionIndex,t=this.renderedOptions[e],n=this.searchSelect.closest("body"),a=this.getWindow();t&&t.node.scrollIntoView(!1),n&&n.addEventListener("click",this.handleClickBody),a&&a.addEventListener("keydown",this.handleKeyDownWindow)}},{key:"componentWillUnmount",value:function(){var e=this.searchSelect.closest("body"),t=this.getWindow();e&&e.removeEventListener("click",this.handleClickBody),t&&t.removeEventListener("keydown",this.handleKeyDownWindow)}},{key:"getWindow",value:function(){return this.searchSelect&&this.searchSelect.ownerDocument?this.searchSelect.ownerDocument.defaultView||this.searchSelect.ownerDocument.parentWindow:null}},{key:"handleClickBody",value:function(e){this.state.showOptions&&!this.searchSelect.contains(e.target)&&this.setState({showOptions:!1})}},{key:"handleKeyDownWindow",value:function(e){var t=this.state,n=t.focusedOptionIndex,a=t.showOptions,s=this.props.options;if(a&&["ArrowDown","ArrowUp"].includes(e.key)){var r="ArrowDown"===e.key?Math.min(n+1,s.length-1):Math.max(n-1,0),i=this.renderedOptions[r];this.setState({focusedOptionIndex:r}),i&&i.node&&i.node.scrollIntoView(!0)}else if(a&&"Enter"===e.key){var o=this.renderedOptions[n];o&&this.handleSelectOption(o.option)}}},{key:"handleSelectOption",value:function(e,t){var n=this.state.focusedOption,a=this.props,s=a.onChange,r=a.hideOptionsOnSelect;this.setState({option:e,showOptions:!r,focusedOptionIndex:h.a.isNil(t)?n:t}),h.a.isFunction(s)&&s(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.options,s=t.value,r=t.optionPosition,i=t.optionsMaxHeight,o=t.placeholder,c=t.hideSearchBar,l=t.hasClearButton,u=t.currentOptionNamePostfix,d=t.disabled,m=t.shouldApplyOptionValueToClassName,p=t.shouldHighlightInvalidValue,b=t.onClickClearButton,f=this.state,v=f.focusedOptionIndex,g=f.showOptions,j=f.inputValue,k=h.a.find(a,(function(e){return e.value===s})),x=0===j.trim().length?a:a.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())})),y=g&&l&&h.a.find(a,(function(e){return e.value===s}));return this.renderedOptions=[],Object(ws.jsxs)("div",{className:"search-select"+(n?" ".concat(n):""),ref:function(t){e.searchSelect=t},children:[Object(ws.jsxs)("div",{className:"search-select--current-option"+(d?" not-clickable":"")+(p&&!h.a.isNil(s)&&h.a.isNil(k)?" invalid-value":""),onClick:function(t){d||t.metaKey||t.ctrlKey||t.shiftKey||e.setState({showOptions:!g,focusedOptionIndex:h.a.findIndex(x,(function(e){return e.value===s}))})},children:[h.a.isNil(s)?Object(ws.jsx)("span",{className:"search-select--placeholder",children:o||"Search"}):Object(ws.jsx)("span",{className:"search-select--current-option--name",children:(k?k.name:s)+(u||"")}),!y&&!d&&Object(ws.jsx)(Rs.e,{className:"search-select--input-icon vertical-centered"}),y&&Object(ws.jsx)("button",{className:"search-select--clear-button vertical-centered",onClick:function(){h.a.isFunction(b)&&b()},children:Object(ws.jsx)(Jo.b,{})})]}),g&&Object(ws.jsxs)("div",{className:"search-select--options-wrapper"+(r?" ".concat(r):""),children:[!c&&Object(ws.jsx)("input",{className:"search-select--search-input",placeholder:"Search",value:j,autoFocus:!0,spellCheck:!1,onChange:function(t){e.setState({inputValue:t.target.value,focusedOptionIndex:0})}}),Object(ws.jsx)("div",{className:"search-select--options"+(c||"top"!==r?"":" move-up"),style:{maxHeight:i?"".concat(i,"px"):"auto"},children:h.a.isEmpty(x)?Object(ws.jsx)("div",{className:"search-select--empty-message",children:"No Matched Results"}):x.map((function(t,n){return Object(ws.jsx)("div",{className:"search-select--option"+(t.disabled?" disabled":"")+(v===n?" focused-option":"")+(m?" ".concat(t.value):""),ref:function(a){e.renderedOptions[n]={option:t,node:a}},onClick:function(){t.disabled||e.handleSelectOption(t,n)},children:t.name},n)}))})]})]})}}]),n}(a.Component);Zo.defaultProps={options:[],optionPosition:"bottom",hideSearchBar:!1,disabled:!1,hideOptionsOnSelect:!0,shouldApplyOptionValueToClassName:!1,shouldHighlightInvalidValue:!1,onClickClearButton:function(){},onChange:function(){}};var $o=n(387),ec=n.n($o),tc=n(241),nc=n(392),ac=n(154),sc=n(393),rc={M30:{key:"M30",name:"30 MIN"},D1:{key:"D1",name:"1 DAY"}},ic=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={chartCanvasWidth:null,chartCanvasHeight:null,granularityKey:h.a.keys(rc).includes(e.chartGranularityKey)?e.chartGranularityKey:rc.M30.key,currentItem:null,mouseMoveEvent:null},a.fundNavChartNode=null,a.chartCanvasNode=null,a.handleResizeWindow=a.handleResizeWindow.bind(Object(Ms.a)(a)),a.resizeWindowTimer=null,a.trancheColors={M:"#FFD07A",A:"#18CFA3",B:"#FF8855"},a.isLoadMoreDataLocked=!1,a.cachedChartData={},a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.fromTimestamp;this._updateChartCanvasWidthHeight(),h.a.isNil(e)?this._getLatestHistoryNAVs():this._getHistoryNAVs(e),window.addEventListener("resize",this.handleResizeWindow)}},{key:"componentDidUpdate",value:function(e){var t=e.fromTimestamp,n=e.fundHistoryNAV,a=e.chartGranularityKey,s=e.shouldUseCustomizedNAVs,r=e.customizedNAVs,i=this.props,o=i.fromTimestamp,c=i.fundHistoryNAV,l=i.chartGranularityKey,u=i.shouldUseCustomizedNAVs,d=i.customizedNAVs,m=this.state.granularityKey,p=h.a.has(n,m)?h.a.size(n[m]):0,b=h.a.has(c,m)?h.a.size(c[m]):0,f=s?h.a.size(r):0,v=u?h.a.size(d):0;h.a.isEqual(t,o)||h.a.isNil(o)||this._getHistoryNAVs(o),h.a.isEqual(t,o)&&h.a.isEqual(a,l)&&h.a.isEqual(p,b)&&h.a.isEqual(s,u)&&h.a.isEqual(f,v)||this._clearCachedChartData()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResizeWindow)}},{key:"_clearCachedChartData",value:function(){this.cachedChartData={},this.forceUpdate()}},{key:"_getLatestHistoryNAVs",value:function(){var e=this.props,t=e.dispatch,n=e.fundAddress,a=e.shouldUseCustomizedNAVs,s=this.state.granularityKey;n&&!a&&t(Ja({fundAddress:n,granularity:s,shouldFetchLatest:!0}))}},{key:"_getHistoryNAVs",value:function(e){var t=this.props,n=t.dispatch,a=t.fundAddress,s=t.fundHistoryNAV,r=t.provider,i=t.shouldUseCustomizedNAVs,o=this.state.granularityKey;if(!i&&h.a.has(s,o)&&h.a.isArray(s[o])&&!h.a.isNil(e)){var c=h.a.isNil(r.blockTimestamp)?j()():j()(r.blockTimestamp),l=h.a.head(s[o]);if(h.a.isNil(l)||j()(l.timestamp).isAfter(e)){var u=o===rc.D1.key?c.diff(e,"days")+1:2*c.diff(e,"hours")+1;n(Ja({fundAddress:a,granularity:o,fromTimestamp:e,toTimestamp:c.toISOString(),count:u}))}}}},{key:"_updateChartCanvasWidthHeight",value:function(){var e=this.fundNavChartNode;if(e){var t=.41666666*e.offsetWidth;e.style.height="".concat(t,"px"),this.setState({chartCanvasWidth:e.offsetWidth,chartCanvasHeight:t})}}},{key:"handleResizeWindow",value:function(){var e=this;this.resizeWindowTimer&&window.clearTimeout(this.resizeWindowTimer),this.resizeWindowTimer=setTimeout((function(){e.setState({chartCanvasWidth:null,chartCanvasHeight:null},(function(){e._updateChartCanvasWidthHeight()}))}),50)}},{key:"Tooltip",value:function(){var e=this.props.fundItem,t=h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:null,n=this.state,a=n.currentItem,s=n.mouseMoveEvent,r=n.chartCanvasWidth,i=n.chartCanvasHeight;if(a&&s){var o={left:s.offsetX,top:s.offsetY};if(h.a.has(s,"touches")&&!h.a.isEmpty(s.touches)&&this.fundNavChartNode){var c=this.fundNavChartNode.getBoundingClientRect();c&&(o.left=Number(s.touches[0].clientX)-c.left,o.top=Number(s.touches[0].clientY)-c.top)}return Object(ws.jsxs)("div",{className:"fund-nav-chart--tooltip",style:{position:"absolute",left:o.left,top:o.top,transform:"translate(".concat(o.left>Number(r)/2?"-110%":"10%",", ").concat(o.top>Number(i)/2?"-120%":"20%",")")},children:[Object(ws.jsx)("div",{className:"fund-nav-chart--tooltip--timestamp",children:j()(a.timestamp).format("D MMM YYYY, HH:mm")}),Object(ws.jsxs)("div",{className:"fund-nav-chart--tooltip--data",children:[Object(ws.jsxs)("div",{className:"master-fund",children:[Object(ws.jsx)("label",{children:Object(ws.jsx)("div",{className:"fund-nav-chart--tooltip--data--line",style:{background:this.trancheColors.M}})}),Object(ws.jsx)("span",{children:"".concat(F[t]||"","QUEEN: ").concat(v()(a.M||0).toFixed(4,1))})]}),Object(ws.jsxs)("div",{className:"tranche-a",children:[Object(ws.jsx)("label",{children:Object(ws.jsx)("div",{className:"fund-nav-chart--tooltip--data--line",style:{background:this.trancheColors.A}})}),Object(ws.jsx)("span",{children:"".concat(F[t]||"","BISHOP: ").concat(v()(a.A||0).toFixed(4,1))})]}),Object(ws.jsxs)("div",{className:"tranche-b",children:[Object(ws.jsx)("label",{children:Object(ws.jsx)("div",{className:"fund-nav-chart--tooltip--data--line",style:{background:this.trancheColors.B}})}),Object(ws.jsx)("span",{children:"".concat(F[t]||"","ROOK: ").concat(v()(a.B||0).toFixed(4,1))})]})]})]})}return null}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.fundAddress,r=t.fundItem,i=t.fundHistoryNAV,o=t.isLoading,c=t.trancheShouldHighlight,l=t.scrollableAncestorClassName,u=t.fromTimestamp,d=t.shouldUseCustomizedNAVs,m=t.customizedNAVs,p=this.state,b=p.granularityKey,f=p.chartCanvasWidth,v=p.chartCanvasHeight,g=p.currentItem;if(h.a.isEmpty(this.cachedChartData)){var k=d?m:h.a.has(i,b)&&h.a.isArray(i[b])?i[b]:[],x=h.a.filter(k,(function(e){return!(0===Number(e.M)&&0===Number(e.A)&&0===Number(e.B))&&(h.a.isNil(u)||j()(e.timestamp).isSameOrAfter(u))})),y=le(s);d||b===rc.M30.key||h.a.isNil(y)||h.a.isEmpty(x)||!j()(y.timestamp).isAfter(h.a.last(x).timestamp)||x.push(y),(1===h.a.size(x)||h.a.size(x)>20)&&x.push({timestamp:null});var O=nc.discontinuousTimeScaleProvider.inputDateAccessor((function(e){return j()(e.timestamp).toDate()}));this.cachedChartData=O(x)}var A=this.cachedChartData,N=A.data,w=A.xScale,S=A.xAccessor,C=A.displayXAccessor,T=h.a.last(N),E=h.a.isEmpty(N)?null:[S(T),S(N[0])],M=h.a.union([c],["M","A","B"]);return Object(ws.jsxs)("div",{className:"fund-nav-chart",children:[Object(ws.jsxs)("div",{className:"fund-nav-chart--header clearfix hidden",children:[Object(ws.jsx)("div",{className:"fund-nav-chart--header--row-1 clearfix",children:Object(ws.jsxs)("div",{className:"fund-nav-chart--header--title",children:["NAV"+(r?" (".concat(r.assets.quoteToken.symbol,")"):""),Object(ws.jsx)(Zs,{isLoading:o})]})}),Object(ws.jsxs)("div",{className:"fund-nav-chart--header--row-2 clearfix",children:[Object(ws.jsxs)("div",{className:"fund-nav-chart--header--latest-nav",children:[Object(ws.jsxs)("div",{className:"master-fund",children:[Object(ws.jsx)("label",{children:"M"}),Object(ws.jsx)("span",{children:T?Number(T.M).toFixed(4):"N/A"})]}),Object(ws.jsxs)("div",{className:"tranche-a",children:[Object(ws.jsx)("label",{children:"A"}),Object(ws.jsx)("span",{children:T?Number(T.A).toFixed(4):"N/A"})]}),Object(ws.jsxs)("div",{className:"tranche-b",children:[Object(ws.jsx)("label",{children:"B"}),Object(ws.jsx)("span",{children:T?Number(T.B).toFixed(4):"N/A"})]})]}),Object(ws.jsx)("div",{className:"fund-nav-chart--header--granularities",children:h.a.map(rc,(function(t){var n=t.key;return Object(ws.jsx)("button",{className:"fund-nav-chart--header--granularity"+(b===n?" selected":""),onClick:function(){e.setState({granularityKey:n},(function(){e._getLatestHistoryNAVs()}))},children:t.name},n)}))})]})]}),Object(ws.jsxs)("div",{className:"fund-nav-chart--main",ref:function(t){e.fundNavChartNode=t},onMouseEnter:function(){if(l){var e=document.getElementsByClassName(l);h.a.isEmpty(e)||(e[0].style.overflow="hidden")}},onMouseLeave:function(){if(l){var t=document.getElementsByClassName(l);h.a.isEmpty(t)||(t[0].style.overflow="overlay")}e.setState({currentItem:null})},children:[o&&Object(ws.jsx)("img",{className:"fund-nav-chart--loading",src:Hr}),h.a.size(N)>1&&!h.a.isNil(E)&&f>0&&v>0&&Object(ws.jsx)(tc.b,{ref:function(t){e.chartCanvasNode=t},type:"hybrid",seriesName:"navs-series",ratio:2,width:f,height:v,margin:{left:0,right:0,top:0,bottom:0},data:N,xAccessor:S,displayXAccessor:C,xScale:w,xExtents:E,zoomEvent:!1,panEvent:!1,clamp:!0,onLoadMore:function(){e.isLoadMoreDataLocked||(e.isLoadMoreDataLocked=!0,n(Ja({fundAddress:s,granularity:b})),setTimeout((function(){e.isLoadMoreDataLocked=!1}),3e3))},children:Object(ws.jsxs)(tc.a,{id:"nav-chart",origin:[0,0],yExtents:function(e){return[Number(e.M),Number(e.A),Number(e.B),1]},padding:{top:30,bottom:30,left:0,right:0},children:[h.a.reverse(M).map((function(t,n){var s=e.trancheColors[t];return Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(ac.LineSeries,{yAccessor:function(e){return Number(e[t])},strokeWidth:2.5,strokeOpacity:1,strokeDasharray:"Solid",stroke:s}),Object(ws.jsx)(ac.StraightLine,{type:"horizontal",stroke:"#444444",strokeWidth:1,strokeOpacity:1,strokeDasharray:"Dash",yValue:1}),Object(ws.jsx)(ac.ScatterSeries,{yAccessor:function(e){return Number(e[t])},marker:ac.CircleMarker,markerProps:{r:function(e){return h.a.has(e,"timestamp")&&h.a.has(g,"timestamp")&&e.timestamp===g.timestamp?3:0},stroke:c===t?"#FFD07A":s,fill:s||"#FFD07A",opacity:1,strokeWidth:c===t?2.4:1.2}})]},n)})),Object(ws.jsx)(sc.ClickCallback,{onMouseMove:function(t,n){var a=t.currentItem;e.setState({currentItem:a&&!h.a.isNil(a.timestamp)?a:null,mouseMoveEvent:n})}}),Object(ws.jsx)(ec.a,{stroke:"#444444",opacity:1,strokeDasharray:"Solid"})]})}),this.Tooltip()]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return h.a.isNil(e.chartGranularityKey)||h.a.isEqual(e.chartGranularityKey,t.granularityKey)||!h.a.keys(rc).includes(e.chartGranularityKey)?null:{granularityKey:e.chartGranularityKey}}}]),n}(a.Component);ic.defaultProps={shouldUseCustomizedNAVs:!1,customizedNAVs:[]};var oc=Object(o.c)((function(e,t){var n=e.fund,a=n.items,s=n.historyNAVs,r=n.isFetchingHistoryNAVs;return{provider:e.provider,fundItem:a[t.fundAddress],fundHistoryNAV:s[t.fundAddress],isLoading:t.isLoading||r}}))(ic),cc={H24:"24H",W1:"1W",M1:"1M",M2:"2M",ALL:"ALL"},lc=function(e){var t=e.index,n=void 0===t?0:t,a=e.fromTimestamp,s=void 0===a?"":a,r=e.toTimestamp,i=void 0===r?"":r,o=e.name;return{index:n,fromTimestamp:s,toTimestamp:i,name:void 0===o?"":o}},uc=function(e){var t=e.fundItem,n=e.fundRebalances,a=h.a.has(t,"assets.underlyingToken.symbol")?t.assets.underlyingToken.symbol:null,s=[];if(h.a.has(t,"summary.rebalanceSize")&&!h.a.isNil(n)){var r=Number(t.summary.rebalanceSize)>0&&h.a.has(n,0);s.push(lc({index:0,fromTimestamp:H[a],toTimestamp:r?n[0].timestamp:null,name:(r?"":"Latest cycle: ")+j()(H[a]).format("D MMM")+" - "+(r?j()(n[0].timestamp).format("D MMM"):"Current")})),h.a.forEach(n,(function(e,t){var a=j()(e.timestamp).utc().hour("14").startOf("hour"),r=Number(t)+1<h.a.size(n);s.push(lc({index:Number(t)+1,fromTimestamp:a.toISOString(),toTimestamp:r?n[Number(t)+1].timestamp:null,name:(r?"":"Latest cycle: ")+j()(a).format("D MMM")+" - "+(r?j()(n[Number(t)+1].timestamp).format("D MMM"):"Current")}))}))}return s},dc=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;Object(ys.a)(this,n);var s=(a=t.call(this,e)).props,r=s.fundItem,i=s.fundRebalances,o=uc({fundItem:r,fundRebalances:i});return a.state={fundAddress:e.fundAddress,timeRangeKey:"ALL",selectedFundCycleIndex:h.a.isEmpty(o)?null:h.a.last(o).index,fundCycleChartNAVs:[],isFetchingNavAtRebalance:!1},a._mounted=!1,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"_isLastFundCycleSelected",value:function(){var e=this.props.fundItem,t=this.state.selectedFundCycleIndex;return h.a.isNil(t)||h.a.has(e,"summary.rebalanceSize")&&Number(e.summary.rebalanceSize)===Number(t)}},{key:"_getFundCycles",value:function(e){var t=e.fundItem,n=e.fundRebalances,a=h.a.has(t,"assets.underlyingToken.symbol")?t.assets.underlyingToken.symbol:null,s=[];if(h.a.has(t,"summary.rebalanceSize")&&!h.a.isNil(n)){var r=Number(t.summary.rebalanceSize)>0&&h.a.has(n,0);s.push(lc({index:0,fromTimestamp:H[a],toTimestamp:r?n[0].timestamp:null,name:(r?"":"Latest cycle: ")+j()(H[a]).format("D MMM")+" - "+(r?j()(n[0].timestamp).format("D MMM"):"Current")})),h.a.forEach(n,(function(e,t){var a=j()(e.timestamp).utc().hour("14").startOf("hour"),r=Number(t)+1<h.a.size(n);s.push(lc({index:Number(t)+1,fromTimestamp:a.toISOString(),toTimestamp:r?n[Number(t)+1].timestamp:null,name:(r?"":"Latest cycle: ")+j()(a).format("D MMM")+" - "+(r?j()(n[Number(t)+1].timestamp).format("D MMM"):"Current")}))}))}return s}},{key:"_getFundCycleChartNAVs",value:function(){var e=Object(Se.a)(we.a.mark((function e(){var t,n,a,s,r,i,o,c,l,u,d=this,m=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:lc({}),n=this.props,a=n.dispatch,s=n.fundAddress,r=t.fromTimestamp,i=t.toTimestamp,o=Jt(s),h.a.isNil(r)||h.a.isNil(i)||!j()(i).isAfter(r)||h.a.isNil(o)){e.next=15;break}return c=j()(i).utc().hour("14").startOf("hour"),this.setState({isFetchingNavAtRebalance:!0}),e.next=9,o.twapOracle.getTwap(c.toISOString());case 9:return l=e.sent,e.next=12,o.fund.extrapolateNav(j()(c).add(-1,"second").toISOString(),l);case 12:u=e.sent,this._mounted&&this.setState({isFetchingNavAtRebalance:!1}),a(Ja({fundAddress:s,granularity:"D1",fromTimestamp:r,toTimestamp:i,count:j()(i).diff(r,"days")+1,shouldSkipUpdatingStore:!0})).then((function(e){if(d._mounted&&h.a.isArray(e)){var t=h.a.sortBy(e,(function(e){return j()(e.timestamp).valueOf()}));t.pop(),t.push(Object(Ae.a)({timestamp:c.toISOString()},u)),d.setState({fundCycleChartNAVs:t})}}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getTimeRangeKeyChartGranularityKey",value:function(e){return["M1","M2","ALL"].includes(e)?rc.D1.key:rc.M30.key}},{key:"_getFromMomentByTimeRange",value:function(e){var t=this.props,n=t.fundAddress,a=t.fundItem,s=t.fundRebalances,r=le(n),i=uc({fundItem:a,fundRebalances:s});if(!h.a.has(a,"summary.currentDay")||h.a.isNil(r)||h.a.isEmpty(i))return null;var o=h.a.last(i);switch(e){case"W1":return j()(r.timestamp).add(-168,"hours");case"M1":return j()(a.summary.currentDay).add(-720,"hours");case"M2":return j()(a.summary.currentDay).add(-1440,"hours");case"ALL":return j()(o.fromTimestamp);default:return j.a.max(j()(r.timestamp).add(-24,"hours"),j()(o.fromTimestamp))}}},{key:"_getNavChangeByTimeRange",value:function(e){var t=this.props,n=t.fundAddress,a=t.fundHistoryNAV,s=le(n),r=this._getFromMomentByTimeRange(e),i={M:null,A:null,B:null};if(!h.a.isNil(s)&&!h.a.isNil(r))if("ALL"===e)i.M=v()(s.M||1).minus(1).toString(),i.A=v()(s.A||1).minus(1).toString(),i.B=v()(s.B||1).minus(1).toString();else{var o=this._getTimeRangeKeyChartGranularityKey(e),c=h.a.has(a,o)&&a[o]||[],l=h.a.findLast(c,(function(e){return j()(e.timestamp).isSameOrBefore(r)}));h.a.isNil(l)||(i.M=v()(s.M).minus(l.M).div(l.M).toString(),i.A=v()(s.A).minus(l.A).div(l.A).toString(),i.B=v()(s.B).minus(l.B).div(l.B).toString())}return i}},{key:"Header",value:function(){var e=this,t=this.props,n=t.fundItem,a=t.fundRebalances,s=this.state,r=s.timeRangeKey,i=s.selectedFundCycleIndex,o=uc({fundItem:n,fundRebalances:a}),c=o.map((function(e){return{value:e.index,name:e.name}})),l=this._isLastFundCycleSelected(),u=h.a.last(o);return Object(ws.jsxs)("div",{className:"fund-chart-container--header clearfix",children:[Object(ws.jsx)("div",{className:"fund-chart-container--header--title",children:"Net Asset Value"}),!h.a.isEmpty(c)&&Object(ws.jsx)(Zo,{className:"fund-chart-container--header--cycles",options:h.a.reverse(c),value:l?u.index:i,hideSearchBar:!0,onChange:function(t){h.a.isEqual(t.value,i)||e.setState({timeRangeKey:"ALL",selectedFundCycleIndex:t.value,fundCycleChartNAVs:[]},(function(){!e._isLastFundCycleSelected()&&h.a.has(o,e.state.selectedFundCycleIndex)&&e._getFundCycleChartNAVs(o[e.state.selectedFundCycleIndex])}))}}),l&&!h.a.isNil(u)&&Object(ws.jsx)("div",{className:"fund-chart-container--header--time-ranges",children:h.a.map(cc,(function(t,n){var a=e._getFromMomentByTimeRange(n);return["H24","ALL"].includes(n)||a&&a.isSameOrAfter(u.fromTimestamp)?Object(ws.jsx)("button",{className:"fund-chart-container--header--time-ranges--item"+(r===n?" selected":""),onClick:function(){e.setState({timeRangeKey:n})},children:t},n):null}))})]})}},{key:"TokenBlock",value:function(e){var t=e.img,n=e.name,a=e.nav,s=void 0===a?"":a,r=e.change,i=this.state.timeRangeKey;return Object(ws.jsxs)("div",{className:"fund-chart-container--token-block clearfix",children:[Object(ws.jsx)("img",{src:t}),Object(ws.jsxs)("div",{className:"fund-chart-container--token-block--body",children:[Object(ws.jsx)("div",{className:"fund-chart-container--token-block--name",children:n}),Object(ws.jsx)("div",{className:"fund-chart-container--token-block--nav",children:"Last NAV: ".concat(s)})]}),Object(ws.jsxs)("div",{className:"fund-chart-container--token-block--change",children:[Object(ws.jsxs)("label",{className:Number(r)>0?"positive":Number(r)<0?"negative":null,children:[Number(r)>0?"+":"",h.a.isNil(r)?"-":"".concat(v()(r).times(100).toFixed(2,1),"%")]}),Object(ws.jsx)("span",{children:"ALL"===i?"All time":"Past ".concat(cc[i])})]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.fundAddress,s=t.fundItem,r=t.fundRebalances,i=this.state,o=i.timeRangeKey,c=i.fundCycleChartNAVs,l=i.selectedFundCycleIndex,u=i.isFetchingNavAtRebalance,d=h.a.has(s,"assets.underlyingToken.symbol")?s.assets.underlyingToken.symbol:null,m=le(n),p=this._getFromMomentByTimeRange(o),b=this._getNavChangeByTimeRange(o),f=this._getTimeRangeKeyChartGranularityKey(o),g=uc({fundItem:s,fundRebalances:r})[l],k=this._isLastFundCycleSelected();return Object(ws.jsxs)("div",{className:"fund-chart-container",children:[this.Header(),Object(ws.jsxs)("div",{className:"fund-chart-container--main",children:[Object(ws.jsx)("div",{className:"fund-chart-container--main--chart",children:!h.a.isNil(g)&&Object(ws.jsx)(oc,{fundAddress:n,chartGranularityKey:f,fromTimestamp:k&&!h.a.isNil(p)?j.a.max(p,j()(g.fromTimestamp)).toISOString():null,shouldUseCustomizedNAVs:!k,customizedNAVs:c,isLoading:u})}),Object(ws.jsx)("div",{className:"fund-chart-container--main--summary",children:k?h.a.map(h.a.keys(L),(function(t){var n=h.a.has(s,"assets.tranche".concat(t,".symbol"))?s.assets["tranche".concat(t)].symbol:null;return Object(ws.jsx)(a.Fragment,{children:e.TokenBlock({img:U[n]||L[t].icon,name:(F[d]||"")+L[t].name,nav:m?v()(m[t]||0).toFixed(4,1):"",change:b[t]})},t)})):Object(ws.jsxs)("div",{className:"fund-chart-container--main--summary--old-cycle",children:["The chart shows the NAV movements before the Rebalance was triggered on ".concat(g?j()(g.toTimestamp).format("D MMM, YYYY"):"","."),Object(ws.jsx)("br",{}),Object(ws.jsx)("br",{}),"Every time rebalance is triggered, NAVs of Queen, Bishop and Rook are reset to 1.0 and token amounts are adjusted."]})})]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.fundItem,a=e.fundRebalances,s=t.selectedFundCycleIndex;if(h.a.isEqual(e.fundAddress,t.fundAddress)){if(h.a.isNil(s)){var r=uc({fundItem:n,fundRebalances:a});return{selectedFundCycleIndex:h.a.isEmpty(r)?null:h.a.last(r).index}}return null}var i=uc({fundItem:n,fundRebalances:a});return{fundAddress:e.fundAddress,timeRangeKey:"ALL",selectedFundCycleIndex:h.a.isEmpty(i)?null:h.a.last(i).index,fundCycleChartNAVs:[],isFetchingNavAtRebalance:!1}}}]),n}(a.Component);var mc=Object(o.c)((function(e,t){return{provider:e.provider,fundItem:e.fund.items[t.fundAddress],fundHistoryNAV:e.fund.historyNAVs[t.fundAddress],fundRebalances:e.fund.rebalances[t.fundAddress]}}))(dc),hc=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={selectedFundAddress:null},a.chartNode=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._updateSelectedFundAddress()}},{key:"componentDidUpdate",value:function(e){var t=e.location,n=e.fundItems,a=this.props,s=a.location,r=a.fundItems;h.a.isEqual(t.key,s.key)&&h.a.isEqual(n,r)||this._updateSelectedFundAddress()}},{key:"_updateSelectedFundAddress",value:function(){var e=this.props,t=e.dispatch,n=e.fundItems,a=e.location,s=this.state.selectedFundAddress,r=new URLSearchParams(a.search).get("fund"),i=h.a.has(n,r)?r:h.a.isEmpty(n)?null:h.a.keys(n)[0];h.a.isNil(i)||(h.a.isEqual(s,i)||this.setState({selectedFundAddress:i}),t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(Se.a)(we.a.mark((function t(n,a){var s,r,i,o,c;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=a().fund.items[e],r=Jt(e),i=null,!h.a.has(s,"summary.rebalanceSize")||h.a.isNil(r)){t.next=17;break}if(t.prev=4,o=a().fund.rebalances[e],!(h.a.isNil(o)||h.a.size(o)<Number(s.summary.rebalanceSize))){t.next=12;break}return i={},c=h.a.range(Number(s.summary.rebalanceSize)),t.next=11,Promise.all(h.a.map(c,function(){var e=Object(Se.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fund.getRebalance(t);case 2:i[t]=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:n({type:za,fundAddress:e,rebalances:i});case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.error("fetchFundRebalances Error: ",t.t0);case 17:return t.abrupt("return",i);case 18:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e,n){return t.apply(this,arguments)}}()}(i)))}},{key:"TokenBlock",value:function(e){var t=e.img,n=e.name,a=e.description,s=e.actionComponent,r=e.audience,i=void 0===r?"":r,o=e.quote,c=void 0===o?"":o;return Object(ws.jsxs)("div",{className:"token-compare-page--token-block",children:[Object(ws.jsx)("img",{src:t}),Object(ws.jsx)("div",{className:"token-compare-page--token-block--name",children:n}),Object(ws.jsx)("div",{className:"token-compare-page--token-block--description",children:a}),Object(ws.jsx)("div",{className:"token-compare-page--token-block--action",children:s}),Object(ws.jsxs)("div",{className:"token-compare-page--token-block--audience",children:[Object(ws.jsx)("label",{children:"Who is it for"}),Object(ws.jsx)("div",{className:"token-compare-page--token-block--audience--name",children:i}),Object(ws.jsx)("div",{className:"token-compare-page--token-block--audience--quote",children:'"'.concat(c,'"')})]})]})}},{key:"NavBlock",value:function(e){var t=this,n=e.nav,a=void 0===n?"":n,s=e.feature,r=void 0===s?"":s;return Object(ws.jsxs)("div",{className:"token-compare-page--nav-block",children:[Object(ws.jsxs)("div",{className:"token-compare-page--nav-block--body",children:[Object(ws.jsx)("label",{children:"Last NAV"}),Object(ws.jsx)("span",{onClick:function(){t.chartNode&&t.chartNode.scrollIntoView({behavior:"smooth"})},children:a})]}),Object(ws.jsxs)("div",{className:"token-compare-page--nav-block--feature",children:[Object(ws.jsx)("label",{children:"Special feature"}),Object(ws.jsx)("span",{children:r})]})]})}},{key:"RewardBlock",value:function(e){var t=e.stakingAprRange,n=void 0===t?["0.0","0.0"]:t;return Object(ws.jsx)("div",{className:"token-compare-page--reward-block",children:Object(ws.jsxs)("div",{className:"token-compare-page--reward-block--body",children:[Object(ws.jsx)("label",{children:"Staking APR Range"}),Object(ws.jsx)("span",{children:!h.a.isNil(n)&&2===h.a.size(n)&&v()(n[0]||0).gt(0)?Object(ws.jsxs)(a.Fragment,{children:["".concat(v()(n[0]||0).times(100).toFixed(1,1),"%")," ~ ","".concat(v()(n[1]||0).times(100).toFixed(1,1),"%")]}):"---"})]})})}},{key:"render",value:function(){var e=this,t=this.props.fundItems,n=this.state.selectedFundAddress,s=t[n],r=h.a.has(s,"assets.underlyingToken.symbol")?s.assets.underlyingToken.symbol:null,i=h.a.has(s,"assets.trancheM.symbol")?s.assets.trancheM.symbol:null,o=h.a.has(s,"assets.trancheA.symbol")?s.assets.trancheA.symbol:null,c=h.a.has(s,"assets.trancheB.symbol")?s.assets.trancheB.symbol:null,l=h.a.has(s,"assets.quoteToken.symbol")?s.assets.quoteToken.symbol:null,u=le(n),d=ue(n),m=de({fundItem:s,shouldSkipAPY:!0});return Object(ws.jsxs)("div",{className:"token-compare-page page",children:[Object(ws.jsx)(Ts.a,{children:Object(ws.jsx)("title",{children:"Compare - Tranchess"})}),Object(ws.jsxs)("div",{className:"page--body",children:[Object(ws.jsx)("div",{className:"token-compare-page--fund-selector",children:h.a.map(t,(function(e,t){var a=h.a.has(e,"assets.underlyingToken.symbol")?e.assets.underlyingToken.symbol:null;return Object(ws.jsx)(ks.b,{to:"/compare?fund=".concat(t),children:Object(ws.jsx)("button",{className:"token-compare-page--fund-option"+(n===t?" selected":""),onClick:function(){},children:"Compare ".concat(a||""," fund tokens")})},t)}))}),Object(ws.jsxs)("div",{className:"token-compare-page--main",children:[Object(ws.jsx)("div",{className:"token-compare-page--chart",ref:function(t){e.chartNode=t},children:Object(ws.jsx)(mc,{fundAddress:n})}),Object(ws.jsx)("hr",{}),Object(ws.jsxs)("div",{className:"token-compare-page--tokens",children:[this.TokenBlock({img:U[i]||L.M.icon,name:(F[r]||"")+L.M.name,description:oe(s,"M"),actionComponent:Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)(ks.b,{to:"/primary",onClick:function(e){e.stopPropagation(),Yi("CREATE_REDEEM"),Mi("CREATION"),Ri(n),window.gtag&&window.gtag("event","leave_compare_tokens",{destination:"Primary Market"})},children:Object(ws.jsxs)("button",{className:"button-style-5",children:["Create",Object(ws.jsxs)("span",{className:"mobile-hidden",children:[" with ",h.a.has(U,r)?Object(ws.jsx)("img",{src:U[r]}):""," ",r||""]})]})}),Object(ws.jsx)("br",{}),Object(ws.jsx)(ks.b,{to:"/swap",children:Object(ws.jsxs)("button",{className:"trade-token-m-button button-style-6",onClick:function(){Xr(n),Zr("M"),window.gtag&&window.gtag("event","leave_compare_tokens",{destination:"Trade QUEEN"})},children:["Trade",Object(ws.jsxs)("span",{className:"mobile-hidden",children:[" with ",h.a.has(U,l)?Object(ws.jsx)("img",{src:U[l]}):""," ",l||""]})]})})]}),audience:"Long-term ".concat("BTCB"===r?"BTC":r||"Underlying"," HODLer"),quote:"I'm not selling my ".concat("BTCB"===r?"BTC":r||"Underlying"," anytime soon")}),this.TokenBlock({img:U[o]||L.A.icon,name:(F[r]||"")+L.A.name,description:oe(s,"A"),actionComponent:Object(ws.jsx)(a.Fragment,{children:Object(ws.jsx)(ks.b,{to:"/swap",children:Object(ws.jsxs)("button",{className:"button-style-6",onClick:function(){Xr(n),Zr("A"),window.gtag&&window.gtag("event","leave_compare_tokens",{destination:"Trade BISHOP"})},children:["Trade",Object(ws.jsxs)("span",{className:"mobile-hidden",children:[" with ",h.a.has(U,l)?Object(ws.jsx)("img",{src:U[l]}):""," ",l||""]})]})})}),audience:"".concat(l||"Quote"," yield seeker"),quote:"I want a good return on my ".concat(l||"Quote"," that's currently idling away")}),this.TokenBlock({img:U[c]||L.B.icon,name:(F[r]||"")+L.B.name,description:oe(s,"B"),actionComponent:Object(ws.jsx)(a.Fragment,{children:Object(ws.jsx)(ks.b,{to:"/swap",children:Object(ws.jsxs)("button",{className:"button-style-6",onClick:function(){Xr(n),Zr("B"),window.gtag&&window.gtag("event","leave_compare_tokens",{destination:"Trade ROOK"})},children:["Trade",Object(ws.jsxs)("span",{className:"mobile-hidden",children:[" with ",h.a.has(U,l)?Object(ws.jsx)("img",{src:U[l]}):""," ",l||""]})]})})}),audience:"Aggressive ".concat("BTCB"===r?"BTC":r||"Underlying"," holder"),quote:"Let's go leverage long on ".concat("BTCB"===r?"BTC":r||"Underlying","!")})]}),Object(ws.jsx)("hr",{}),Object(ws.jsx)("div",{className:"token-compare-page--sub-title",children:"Net Asset Value"}),Object(ws.jsxs)("div",{className:"token-compare-page--navs",children:[this.NavBlock({nav:u?v()(u.M).toFixed(4,1):"",feature:"".concat("BTCB"===r?"BTC":r||"Underlying"," tracker")}),this.NavBlock({nav:u?v()(u.A).toFixed(4,1):"",feature:"Enhanced ".concat(h.a.has(s,"summary.currentInterestRate")?"".concat(v()(s.summary.currentInterestRate||0).times(100).toFixed(3),"%"):""," daily lending interest")}),this.NavBlock({nav:u?v()(u.B).toFixed(4,1):"",feature:"".concat(d?"".concat(Number(d).toFixed(2),"x"):""," ").concat("BTCB"===r?"BTC":r||"Underlying"," leverage")})]}),Object(ws.jsx)("hr",{}),Object(ws.jsx)("div",{className:"token-compare-page--sub-title",children:"Rewards"}),Object(ws.jsxs)("div",{className:"token-compare-page--rewards",children:[this.RewardBlock({stakingAprRange:m.stakingAPR.M}),this.RewardBlock({stakingAprRange:m.stakingAPR.A}),this.RewardBlock({stakingAprRange:m.stakingAPR.B})]})]})]})]})}}]),n}(a.Component);var pc=Object(xs.f)(Object(o.c)((function(e){return{fundItems:e.fund.items}}))(hc)),bc=604800,fc=function(e){var t=e.fundAddress,n=void 0===t?"":t,a=e.exchangeAddress,s=void 0===a?"":a,r=e.weightedSupply,i=void 0===r?"":r,o=e.workingSupply,c=void 0===o?"":o,l=e.weightedAB,u=void 0===l?"":l,d=e.weightedBalance,m=void 0===d?"":d,h=e.workingBalance,p=void 0===h?"":h,b=e.veProportionSnapshot,f=void 0===b?0:b,v=e.boostingFactor,g=void 0===v?"":v,j=e.maxBoostingFactor,k=void 0===j?"":j,x=e.chessRewardsPerDay;return{fundAddress:n,exchangeAddress:s,weightedSupply:i,workingSupply:c,weightedAB:u,weightedBalance:m,workingBalance:p,boostingFactor:g,veProportionSnapshot:f,maxBoostingFactor:k,chessRewardsPerDay:void 0===x?"":x,trancheMStakingAPR:e.trancheMStakingAPR,trancheAStakingAPR:e.trancheAStakingAPR,trancheBStakingAPR:e.trancheBStakingAPR}},vc=function(e){var t=e.fundResults,n=void 0===t?{}:t,a=e.veProportion,s=void 0===a?0:a,r=e.totalChessRewardsPerDay;return{fundResults:n,veProportion:s,totalChessRewardsPerDay:void 0===r?"":r}},gc=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={fundTokenAmountInputs:{},chessAmountInput:"",weekDurationInput:""},a}return Object(Os.a)(n,[{key:"_getBaseMoment",value:function(){var e=this.props,t=e.votingEscrow,n=e.provider,a=t.account;return j.a.max(j()(re(n.blockTimestamp)),j()(a.unlockTime))}},{key:"_getMaxWeekDuration",value:function(){var e=this._getBaseMoment(),t=q();return h.a.isNil(e)?0:v()(t.diff(e,"seconds")).div(bc).toNumber()}},{key:"_getNewUnlockTimestamp",value:function(){var e=this.state.weekDurationInput;return this._getBaseMoment().add((parseInt(e)||0)*bc,"seconds").toISOString()}},{key:"_getSimulationResult",value:function(){var e=this.props,t=e.provider,n=e.fundItems,a=e.exchangeItems,s=e.exchangeAccountItems,r=e.votingEscrow,i=e.chessRate,o=this.state,c=o.fundTokenAmountInputs,l=o.chessAmountInput,u=o.weekDurationInput,d=r.account,m=r.totalSupply,p=h.a.isNil(t.blockTimestamp)?j()():j()(t.blockTimestamp),b=this._getNewUnlockTimestamp(),f=_({initialAmount:Number(d.amount),unlockTimestamp:d.unlockTime,timestamp:p.toISOString()}),g=_({initialAmount:v()(d.amount||0).plus(l||0).toNumber(),unlockTimestamp:u>0?b:d.unlockTime,timestamp:p.toISOString()}),k=v()(m||0).minus(f).plus(g),x=v()(g).div(k).toNumber(),y=vc({veProportion:x});return h.a.forEach(n,(function(e,t){var n=e.exchangeAddress,r=e.summary,o=a[n]||{},l=s[n]||{},u=c[t]||{},d=u.mAmount,m=u.aAmount,p=u.bAmount,b=h.a.has(l,"veSnapshot.veProportion")?Number(l.veSnapshot.veProportion):0,j=g>f?x:b,k=ve(l),O={mAmount:v()(k.mAmount||0).plus(d||0).toString(),aAmount:v()(k.aAmount||0).plus(m||0).toString(),bAmount:v()(k.bAmount||0).plus(p||0).toString()},A=ge({mAmount:O.mAmount,aAmount:"0",bAmount:"0"}),N=ge({mAmount:"0",aAmount:O.aAmount,bAmount:O.bAmount}),w=ge({mAmount:O.mAmount,aAmount:O.aAmount,bAmount:O.bAmount}),S=v()(o.weightedSupply||0).minus(l.weightedBalance||0).plus(w).toString(),C=je({weightedSupply:S,mAmount:O.mAmount,aAmount:O.aAmount,bAmount:O.bAmount,veProportion:j}),T=v()(o.workingSupply||0).minus(l.workingBalance||0).plus(C.total).toString(),E=xe({workingSupply:T,mAmount:O.mAmount,aAmount:O.aAmount,bAmount:O.bAmount,workingBalance:C.total}),M=v()(w).gt(0)?ye({weightedSupply:S,workingSupply:T,mAmount:O.mAmount,aAmount:O.aAmount,bAmount:O.bAmount,workingBalance:C.total,veProportion:1}):3,B=v()(T).gt(0)?v()(i||0).times(r.relativeWeight||0).times(86400).times(C.total).div(T).toString():v()(0).toString(),R=de({fundItem:e,newWorkingSupply:T,shouldSkipAPY:!0}),I=v()(A).gt(0)?v()(C.workingM).div(A):v()(1),D=v()(N).gt(0)?v()(C.workingAB).div(N):v()(1);y.fundResults[t]=fc({fundAddress:t,exchangeAddress:n,weightedSupply:S,workingSupply:T,weightedAB:N,weightedBalance:w,workingBalance:C.total,veProportionSnapshot:b,boostingFactor:E,maxBoostingFactor:M,chessRewardsPerDay:B,trancheMStakingAPR:v()(O.mAmount).gt(0)&&!h.a.isNil(R.stakingAPR.M)?v()(R.stakingAPR.M[0]||0).times(I).toString():null,trancheAStakingAPR:v()(O.aAmount).gt(0)&&!h.a.isNil(R.stakingAPR.A)?v()(R.stakingAPR.A[0]||0).times(D).toString():null,trancheBStakingAPR:v()(O.bAmount).gt(0)&&!h.a.isNil(R.stakingAPR.B)?v()(R.stakingAPR.B[0]||0).times(D).toString():null}),y.totalChessRewardsPerDay=v()(y.totalChessRewardsPerDay||0).plus(B).toString()})),y}},{key:"InputRow",value:function(e){var t=e.imgComponent,n=e.label,a=e.valueComponent,s=e.inputComponent;return Object(ws.jsxs)("div",{className:"boost-simulator--input-row",children:[Object(ws.jsx)("div",{className:"boost-simulator--input-row--img",children:t}),Object(ws.jsxs)("div",{className:"boost-simulator--input-row--value",children:[Object(ws.jsx)("label",{children:n}),Object(ws.jsx)("span",{children:a})]}),Object(ws.jsx)("span",{className:"boost-simulator--input-row--symbol",children:"+"}),Object(ws.jsx)("div",{className:"boost-simulator--input-row--main",children:s})]})}},{key:"Block",value:function(e){var t=e.title,n=e.imgComponent,a=e.label,s=e.infoComponent,r=e.remarkComponent;return Object(ws.jsxs)("div",{className:"boost-simulator--block",children:[Object(ws.jsx)("div",{className:"boost-simulator--block--title",children:t}),Object(ws.jsxs)("div",{className:"boost-simulator--block--main",children:[Object(ws.jsx)("div",{className:"boost-simulator--block--img",children:n}),!h.a.isNil(a)&&Object(ws.jsx)("label",{children:a}),s&&Object(ws.jsx)("div",{className:"boost-simulator--block--info",children:s})]}),r&&Object(ws.jsx)("div",{className:"boost-simulator--block--remark",children:r})]})}},{key:"_updateFundTokenAmountInput",value:function(e){var t=e.fundAddress,n=void 0===t?"":t,a=e.tranche,s=void 0===a?"M":a,r=e.value,i=void 0===r?"":r,o=this.state.fundTokenAmountInputs,c=h.a.cloneDeep(o);h.a.has(c,n)||(c[n]=function(e){var t=e.mAmount,n=void 0===t?"":t,a=e.aAmount,s=void 0===a?"":a,r=e.bAmount;return{mAmount:n,aAmount:s,bAmount:void 0===r?"":r}}({})),c[n]["".concat(h.a.lowerCase(s),"Amount")]=i,this.setState({fundTokenAmountInputs:c})}},{key:"StakingSection",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fc({}),n=t.fundAddress,s=t.exchangeAddress,r=this.props,i=r.fundItems,o=r.exchangeAccountItems,c=this.state.fundTokenAmountInputs,l=c[n]||{},u=l.mAmount,d=l.aAmount,m=l.bAmount,p=i[n],b=h.a.has(p,"assets.underlyingToken.symbol")?p.assets.underlyingToken.symbol:null,f=F[b]||"",g=h.a.has(p,"assets.trancheM.symbol")?p.assets.trancheM.symbol:null,j=h.a.has(p,"assets.trancheA.symbol")?p.assets.trancheA.symbol:null,k=h.a.has(p,"assets.trancheB.symbol")?p.assets.trancheB.symbol:null,x=o[s]||{},y=v()(t.weightedSupply||0).gt(0)?v()(t.weightedBalance||0).div(t.weightedSupply):v()(0),O=ve(x),A=v()(t.weightedBalance||0).gt(0)?v()(t.weightedAB||0).div(t.weightedBalance):null;return Object(ws.jsxs)("div",{className:"boost-simulator--section staking",children:[Object(ws.jsx)("div",{className:"boost-simulator--section--main",children:Object(ws.jsxs)("div",{className:"boost-simulator--section--input-contents",children:[this.InputRow({imgComponent:Object(ws.jsx)("img",{src:U[g]||L.M.icon}),label:"You staked",valueComponent:v()(O.mAmount).gt(0)?J({number:O.mAmount,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:0}):"0.0",inputComponent:Object(ws.jsx)("input",{type:"number",step:1,placeholder:"0.0 ".concat(f).concat(L.M.name),value:h.a.isNil(u)?"":u,onChange:function(t){if(!(te(t.target.value)>18)){var a=v()(t.target.value||0).lt(v()(O.mAmount).negated())?v()(O.mAmount).negated().toString():t.target.value;e._updateFundTokenAmountInput({fundAddress:n,tranche:"M",value:a})}}})}),this.InputRow({imgComponent:Object(ws.jsx)("img",{src:U[j]||L.A.icon}),label:"You staked",valueComponent:v()(O.aAmount).gt(0)?J({number:O.aAmount,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:0}):"0.0",inputComponent:Object(ws.jsx)("input",{type:"number",step:1,placeholder:"0.0 ".concat(f).concat(L.A.name),value:h.a.isNil(d)?"":d,onChange:function(t){if(!(te(t.target.value)>18)){var a=v()(t.target.value||0).lt(v()(O.aAmount).negated())?v()(O.aAmount).negated().toString():t.target.value;e._updateFundTokenAmountInput({fundAddress:n,tranche:"A",value:a})}}})}),this.InputRow({imgComponent:Object(ws.jsx)("img",{src:U[k]||L.B.icon}),label:"You staked",valueComponent:v()(O.bAmount).gt(0)?J({number:O.bAmount,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:0}):"0.0",inputComponent:Object(ws.jsx)("input",{type:"number",step:1,placeholder:"0.0 ".concat(f).concat(L.B.name),value:h.a.isNil(m)?"":m,onChange:function(t){if(!(te(t.target.value)>18)){var a=v()(t.target.value||0).lt(v()(O.bAmount).negated())?v()(O.bAmount).negated().toString():t.target.value;e._updateFundTokenAmountInput({fundAddress:n,tranche:"B",value:a})}}})})]})}),Object(ws.jsx)("div",{className:"boost-simulator--section--arrow",children:Object(ws.jsx)(Rs.d,{})}),Object(ws.jsx)("div",{className:"boost-simulator--section--result",children:this.Block({title:"Your share of staking",imgComponent:Object(ws.jsx)("img",{src:go}),label:y.gt(0)?"".concat(y.times(100).toPrecision(y.gt(.1)?4:3,1),"%"):"0.0%",remarkComponent:Object(ws.jsxs)(a.Fragment,{children:["Share of ".concat(f).concat(L.A.name," & ").concat(f).concat(L.B.name," in your staking: "),h.a.isNil(A)?"n/a":v()(A||0).gt(0)?"".concat(v()(A).times(100).toFixed(2,1),"%"):"0.0%"]})})})]})}},{key:"LockSection",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vc({}),n=this.props,a=n.provider,s=n.fundItems,r=n.votingEscrow,i=this.state,o=i.chessAmountInput,c=i.weekDurationInput,l=r.account,u=h.a.isNil(a,"blockTimestamp")?j()():j()(a.blockTimestamp),d=this._getMaxWeekDuration(),m=j()(l.unlockTime).isValid()&&j()(l.unlockTime).isAfter(u)?Math.floor(j()(l.unlockTime).diff(u,"seconds")/bc):0,p=this._getNewUnlockTimestamp();return Object(ws.jsxs)("div",{className:"boost-simulator--section lock",children:[Object(ws.jsxs)("div",{className:"boost-simulator--section--main",children:[Object(ws.jsxs)("div",{className:"boost-simulator--section--input-contents",children:[this.InputRow({imgComponent:Object(ws.jsx)("img",{src:Es}),label:"You locked",valueComponent:Number(l.amount)>0?J({number:l.amount,shouldApplyFloorValue:!0,shouldReturnLocalString:!0,defaultPrecision:l.amount>1?0:2}):"0.0",inputComponent:Object(ws.jsx)("input",{type:"number",min:0,placeholder:"0.0 CHESS",value:o,onChange:function(t){e.setState({chessAmountInput:t.target.value||""})}})}),this.InputRow({imgComponent:Object(ws.jsx)(Rs.i,{}),label:"Time duration",valueComponent:"".concat(m," week").concat(m>1?"s":""),inputComponent:Object(ws.jsx)(So,{type:"number",min:0,max:d||0,step:1,placeholder:"0 week(s)",value:c,suffix:h.a.isNumber(c)&&c>=0?"week".concat(c>1?"s":""):"",keysShouldPrevent:["E","e","+","-","."],onChange:function(t){var n=h.a.clamp(parseInt(t),0,d);e.setState({weekDurationInput:n>=0?n:""})}})})]}),Object(ws.jsx)("div",{className:"boost-simulator--section--unlock-time",children:"Lock until \n                            ".concat(Number(c)>0?j()(p).format("D MMM YYYY, HH:mm"):Number(l.amount)>0?j()(l.unlockTime).format("D MMM YYYY, HH:mm"):"")}),Object(ws.jsx)(Co,{className:"boost-simulator--duration-tabs",maxWeekDuration:d,shouldHaveMaxOption:!0,onChange:function(t){var n=t.weekDuration;e.setState({weekDurationInput:n})}})]}),Object(ws.jsx)("div",{className:"boost-simulator--section--arrow",children:Object(ws.jsx)(Rs.d,{})}),Object(ws.jsx)("div",{className:"boost-simulator--section--result",children:this.Block({title:"Your share of veCHESS",imgComponent:Object(ws.jsx)("img",{src:Oo}),label:Number(o)>0||Number(c)>0?v()(t.veProportion||0).gt(0)?"".concat(v()(t.veProportion).times(100).toPrecision(v()(t.veProportion).gt(.1)?4:3,1),"%"):"0.0%":null,infoComponent:0===Number(o)&&Number(c)<=0?Object(ws.jsx)("div",{className:"boost-simulator--ve-proportion-snapshots",children:h.a.map(t.fundResults,(function(e,t){var n=e.veProportionSnapshot,a=s[t],r=h.a.has(a,"assets.underlyingToken.symbol")?a.assets.underlyingToken.symbol:"";return Object(ws.jsxs)("div",{className:"boost-simulator--ve-proportion-snapshots--item",children:["".concat(r,": "),v()(n||0).eq(0)?"0.0%":"".concat(v()(n).times(100).toPrecision(v()(n).gt(.1)?4:3,1),"%")]},t)}))}):null})})]})}},{key:"ResultSection",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vc({}),n=this.props.fundItems;return Object(ws.jsxs)("div",{className:"boost-simulator--section result",children:[h.a.map(t.fundResults,(function(t,s){var r=h.a.has(n,"".concat(s,".assets.underlyingToken.symbol"))?n[s].assets.underlyingToken.symbol:null,i=F[r]||"",o=v()(t.weightedBalance||0).gt(0)?v()(t.weightedAB||0).div(t.weightedBalance):null;return Object(ws.jsx)("div",{className:"boost-simulator--section--result",children:e.Block({title:"".concat(r||""," fund boost factor"),imgComponent:Object(ws.jsx)(wo,{className:"boost-simulator--dashboard",min:1,max:Number(t.maxBoostingFactor),value:Number(t.boostingFactor)}),label:v()(t.weightedBalance||0).gt(0)&&Number(t.boostingFactor)>0?"".concat(v()(t.boostingFactor).toFixed(2),"x"):"N/A",remarkComponent:Object(ws.jsxs)(a.Fragment,{children:["Potential max boost: ".concat(v()(t.maxBoostingFactor).toFixed(2),"x"),Object(ws.jsx)("br",{}),v()(t.weightedBalance||0).eq(0)?"Boost factor applies to rewards from staking ".concat(i,"QUEEN, ").concat(i,"BISHOP and ").concat(i,"ROOK."):v()(t.boostingFactor||0).gte(t.maxBoostingFactor||0)?"You have reached your potential max boost factor. You can stake more tokens while keeping this max boost factor.":"You can improve your boost factor by increasing your share of veCHESS".concat(!h.a.isNil(o)&&o.lt(.5)?" or splitting ".concat(i,"QUEEN into ").concat(i,"BISHOP & ").concat(i,"ROOK."):".")]})})},s)})),Object(ws.jsx)("div",{className:"boost-simulator--section--main",children:this.Block({title:"CHESS earning",imgComponent:Object(ws.jsx)("img",{src:Es}),label:"".concat(v()(t.totalChessRewardsPerDay).gt(0)?Z(t.totalChessRewardsPerDay,1):"0.0","/day"),remarkComponent:h.a.map(t.fundResults,(function(e,t){var s=h.a.has(n,"".concat(t,".assets.underlyingToken.symbol"))?n[t].assets.underlyingToken.symbol:null,r=F[s]||"";return Object(ws.jsxs)(a.Fragment,{children:[r+"QUEEN APR: "+(h.a.isNil(e.trancheMStakingAPR)?"n/a":"".concat(v()(e.trancheMStakingAPR||0).times(100).toFixed(1,1),"%")),Object(ws.jsx)("br",{}),r+"BISHOP APR: "+(h.a.isNil(e.trancheAStakingAPR)?"n/a":"".concat(v()(e.trancheAStakingAPR||0).times(100).toFixed(1,1),"%")),Object(ws.jsx)("br",{}),r+"ROOK APR: "+(h.a.isNil(e.trancheBStakingAPR)?"n/a":"".concat(v()(e.trancheBStakingAPR||0).times(100).toFixed(1,1),"%")),Object(ws.jsx)("br",{})]},t)}))})})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,s=t.wallet,r=t.fundItems,i=this._getSimulationResult();return Object(ws.jsxs)("div",{className:"boost-simulator",children:[Object(ws.jsxs)("div",{className:"boost-simulator--main clearfix"+(h.a.isNil(s.address)?" wallet-disconnected":""),children:[Object(ws.jsxs)("div",{className:"boost-simulator--main--inputs-wrapper",children:[h.a.map(i.fundResults,(function(t,n){var s=r[n],i=h.a.has(s,"assets.underlyingToken.symbol")?s.assets.underlyingToken.symbol:null;return Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("div",{className:"boost-simulator--sub-title",children:"".concat(i," fund staking")}),e.StakingSection(t)]},t.fundAddress)})),Object(ws.jsx)("div",{className:"boost-simulator--sub-title",children:"Locked"}),this.LockSection(i)]}),Object(ws.jsxs)("div",{className:"boost-simulator--main--result-wrapper",children:[Object(ws.jsx)("div",{className:"boost-simulator--sub-title results",children:"Results"}),this.ResultSection(i)]})]}),h.a.isNil(s.address)&&Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("div",{className:"boost-simulator--curtain"}),Object(ws.jsxs)("div",{className:"boost-simulator--connect-wallet-block centered",children:[Object(ws.jsx)("div",{className:"boost-simulator--connect-wallet-block--title",children:"Connect your wallet first to use the simulator"}),Object(ws.jsx)("button",{className:"boost-simulator--connect-wallet-block--connect-button button-style-5",onClick:function(){n(_e(!0))},children:"Connect wallet"})]})]})]})}}]),n}(a.Component);var jc=Object(o.c)((function(e){return{provider:e.provider,wallet:e.wallet,fundItems:e.fund.items,exchangeItems:e.exchange.items,exchangeAccountItems:e.exchange.account.items,votingEscrow:e.governance.votingEscrow,chessRate:e.governance.chessRate,historyNAVs:e.fund.historyNAVs}}))(gc),kc=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"render",value:function(){return Object(ws.jsxs)("div",{className:"boost-simulator-page page",children:[Object(ws.jsx)(Ts.a,{children:Object(ws.jsx)("title",{children:"Simulator - Tranchess"})}),Object(ws.jsxs)("div",{className:"page--body",children:[Object(ws.jsx)("div",{className:"boost-simulator-page--title",children:"Yield Simulator"}),Object(ws.jsxs)("div",{className:"boost-simulator-page--description",children:["Changes made in the simulator do not take effect. The simulator helps you understand how your return on investment changes when you adjust your staked and locked amount. Read more about boosting ",Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/faq/vechess#what-is-boosting"},target:"_blank",children:Object(ws.jsx)("button",{className:"button-style-7",children:"here"})})]}),Object(ws.jsx)("div",{className:"boost-simulator-page--main",children:Object(ws.jsx)("div",{className:"boost-simulator-page--simulator-wrapper",children:Object(ws.jsx)(jc,{})})})]})]})}}]),n}(a.Component),xc=n(396),yc=n(395),Oc=n.p+"static/media/tranchess_logo_white.2b85d1fe.svg",Ac=n(394),Nc=n.p+"static/media/metamask-color.4368e45a.svg",wc=n.p+"static/media/walletconnect-color.dfa25e47.svg",Sc=n.p+"static/media/binance-wallet.e54192c4.svg",Cc=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(){return Object(ys.a)(this,n),t.apply(this,arguments)}return Object(Os.a)(n,[{key:"Web3ProviderItem",value:function(e){var t=e.className,n=e.providerType,a=void 0===n?et.META_MASK:n,s=e.icon,r=e.label,i=e.canDisconnect,o=void 0!==i&&i,c=this.props,l=c.dispatch,u=c.wallet,d=u.web3ProviderType,m=u.address,p=d===a&&!h.a.isNil(m);return Object(ws.jsxs)("div",{className:"wallet-provider-modal--item"+(p?" connected":"")+(t?" ".concat(t):""),onClick:Object(Se.a)(we.a.mark((function e(){var t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P[56],a!==et.META_MASK){e.next=7;break}if(window.ethereum){e.next=5;break}return l(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:"Missing wallet: please install MetaMask browser extension and try again"}))),e.abrupt("return");case 5:e.next=16;break;case 7:if(a!==et.BSC){e.next=16;break}if(window.BinanceChain){e.next=13;break}return l(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:"Missing wallet: please install Binance Chain Wallet browser extension and try again"}))),e.abrupt("return");case 13:if(parseInt(window.BinanceChain.chainId)===Number("56")){e.next=16;break}return l(Ke(Ye({id:Object(De.a)(),type:We.ERROR,text:"Wrong network: please connect Binance Chain Wallet to ".concat(t?t.name:"56"," and try again")}))),e.abrupt("return");case 16:return e.next=18,st(a);case 18:e.sent&&(l(Sa(a)),l(Ca()));case 20:case"end":return e.stop()}}),e)}))),children:[p&&Object(ws.jsx)("span",{className:"wallet-provider-modal--item--dot"}),Object(ws.jsx)("img",{src:s}),Object(ws.jsx)("label",{className:p?"connected":"",children:p?"".concat(m.substring(0,6),"...").concat(m.substring(m.length-4)):r}),p&&o&&Object(ws.jsx)("button",{className:"wallet-provider-modal--item--disconnect-button button-style-7",onClick:function(){var e=Object(Se.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,ct(a);case 3:l(Sa(null));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Disconnect"})]})}},{key:"render",value:function(){var e=this.props,t=e.wallet,n=e.onClickClose,a=P[56];return Object(ws.jsx)(Fs.a,{overlayClassName:"wallet-provider-modal--overlay",className:"wallet-provider-modal",isOpen:!0,children:Object(ws.jsxs)("div",{className:"wallet-provider-modal--main centered",children:[Object(ws.jsxs)("div",{className:"wallet-provider-modal--header",children:[Object(ws.jsx)("button",{className:"wallet-provider-modal--close-button",onClick:function(){n()},children:Object(ws.jsx)(Rs.p,{})}),Object(ws.jsx)("div",{className:"wallet-provider-modal--title",children:"Connect wallet"}),Object(ws.jsxs)("div",{className:"wallet-provider-modal--description",children:["Disclaimer: Nothing on this website should be construed as Tranchess' provision of any type of investment or other advice or recommendations, or by any of our affiliates or third parties to any person in any jurisdiction. ",Object(ws.jsx)(ks.b,{to:{pathname:"https://docs.tranchess.com/whitepaper/disclaimers"},target:"_blank",rel:"noreferrer nofollow",children:"More details"})]}),!h.a.isNil(t.address)&&!xa(t.providerNetwork)&&Object(ws.jsx)("div",{className:"wallet-provider-modal--wrong-network-message",children:"You are connected to the wrong network. Please choose ".concat(a?a.name:"56"," at your connected wallet.")})]}),Object(ws.jsxs)("div",{className:"wallet-provider-modal--items",children:[this.Web3ProviderItem({className:"meta-mask",providerType:et.META_MASK,icon:Nc,label:"MetaMask",canDisconnect:!1}),this.Web3ProviderItem({className:"wallet-connect",providerType:et.WALLET_CONNECT,icon:wc,label:"Wallet Connect",canDisconnect:!0}),this.Web3ProviderItem({className:"binance-chain-wallet",providerType:et.BSC,icon:Sc,label:"Binance Chain Wallet",canDisconnect:!1})]})]})})}}]),n}(a.Component);Cc.defaultProps={onClickClose:function(){}};var Tc=Object(o.c)((function(e){return{wallet:e.wallet}}))(Cc),Ec=n.p+"static/media/transaction.0ed9d809.svg";Fs.a.setAppElement("#root");var Mc=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={shouldShowModal:!1},a}return Object(Os.a)(n,[{key:"render",value:function(){var e=this,t=this.props.walletTransactions,n=this.state.shouldShowModal,a=h.a.filter(t,(function(e){return e.status===ya})),s=h.a.sortBy(t,(function(e){return-j()(e.createdTimestamp).valueOf()})),r=P[56];return Object(ws.jsxs)("div",{className:"wallet-transactions",children:[Object(ws.jsxs)("button",{className:"wallet-transactions--trigger-button",disabled:0===h.a.size(t),onClick:function(){e.setState({shouldShowModal:!0})},children:[Object(ws.jsx)("img",{src:h.a.size(a)>0?Hr:Ec}),h.a.size(a)>0&&Object(ws.jsx)("span",{children:h.a.size(a)})]}),n&&!h.a.isEmpty(t)&&Object(ws.jsx)(Fs.a,{overlayClassName:"wallet-transactions--modal--overlay",className:"wallet-transactions--modal modal-overlay",isOpen:!0,children:Object(ws.jsxs)("div",{className:"wallet-transactions--modal--main centered",onClick:function(e){e.stopPropagation()},children:[Object(ws.jsxs)("div",{className:"wallet-transactions--modal--header",children:[Object(ws.jsx)("div",{className:"wallet-transactions--modal--title",children:"Recent transactions"}),Object(ws.jsx)("button",{className:"wallet-transactions--modal--remove-button",onClick:function(){e.setState({shouldShowModal:!1})},children:Object(ws.jsx)(Rs.p,{})})]}),Object(ws.jsx)("div",{className:"wallet-transactions--modal--table-wrapper",children:Object(ws.jsx)("table",{children:Object(ws.jsx)("tbody",{children:h.a.map(s,(function(e){var t=e.hash,n=e.title,a=e.status;return Object(ws.jsxs)("tr",{children:[Object(ws.jsx)("td",{className:"wallet-transactions--modal--item-title left-align",children:n}),Object(ws.jsx)("td",{children:r&&Object(ws.jsx)("a",{className:"wallet-transactions--modal--link",href:"".concat(r.explorerUrl,"/tx/").concat(t),target:"_blank",rel:"noreferrer",children:Object(ws.jsx)("button",{children:"".concat(t.substring(0,8),"...").concat(t.substring(t.length-10))})})}),Object(ws.jsx)("td",{className:"right-align",children:Object(ws.jsx)("div",{className:"wallet-transactions--modal--status ".concat(a),children:a.toLowerCase()})})]},t)}))})})})]})})]})}}]),n}(a.Component);var Bc,Rc=Object(o.c)((function(e){return{walletTransactions:e.wallet.transactions}}))(Mc),Ic=(Bc={},Object(Me.a)(Bc,et.META_MASK,Nc),Object(Me.a)(Bc,et.WALLET_CONNECT,wc),Object(Me.a)(Bc,et.BSC,Sc),Bc),Dc=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e))._mounted=!1,a.updateProviderInterval=null,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0,this.registerUpdateProvderInterval()}},{key:"componentWillUnmount",value:function(){this._mounted=!1,this.updateProviderInterval&&window.clearInterval(this.updateProviderInterval)}},{key:"_updateWalletProvider",value:function(){(0,this.props.dispatch)(Ca())}},{key:"registerUpdateProvderInterval",value:function(){var e=this;this.updateProviderInterval&&window.clearInterval(this.updateProviderInterval),this.updateProviderInterval=setInterval(Object(Se.a)(we.a.mark((function t(){return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._mounted&&(e.props.wallet.web3ProviderType!==et.BSC||h.a.isNil(e.props.wallet.address))&&e._updateWalletProvider();case 1:case"end":return t.stop()}}),t)}))),1e3)}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.wallet,s=e.shouldShowWeb3ProviderModal,r=e.provider,i=n.providerNetwork,o=n.web3ProviderType,c=n.address,l=xa(i),u=Ic[o];return Object(ws.jsxs)("div",{className:"wallet-provider",onClick:function(e){e.stopPropagation()},children:[h.a.isEmpty(c)?Object(ws.jsx)("button",{className:"wallet-provider--connect-button button-style-6",onClick:function(){t(_e(!0))},children:"Connect Wallet"}):Object(ws.jsxs)(a.Fragment,{children:[u&&Object(ws.jsx)("img",{className:"wallet-provider--icon ".concat(o),src:u,onClick:function(){t(_e(!0))}}),h.a.isNil(i)||!l?Object(ws.jsxs)("button",{className:"wallet-provider--wrong-network-button button-style-6",onClick:function(){o===et.META_MASK?ot():t(_e(!0))},children:[Object(ws.jsx)(Ac.a,{}),Object(ws.jsx)("span",{children:"Wrong network"})]}):!1===r.connected?Object(ws.jsx)(Bs,{className:"wallet-provider--connection-error--popup",trigger:Object(ws.jsx)("button",{className:"wallet-provider--connection-error button-style-6",onClick:function(){t(_e(!0))},children:"Connection error"}),children:"Your account's information may not show up correctly due to network issues. Changing to a different network or refreshing your page may resolve the issue."}):Object(ws.jsxs)(a.Fragment,{children:[Object(ws.jsx)("button",{className:"wallet-provider--account-address",onClick:function(){t(_e(!0))},children:"".concat(c.substring(0,6),"...").concat(c.substring(c.length-4))}),Object(ws.jsx)("div",{className:"wallet-provider--transactions",children:Object(ws.jsx)(Rc,{})})]})]}),s&&Object(ws.jsx)(Tc,{onClickClose:function(){t(_e(!1))}})]})}}]),n}(a.Component);var Pc=Object(o.c)((function(e){return{wallet:e.wallet,shouldShowWeb3ProviderModal:e.layout.shouldShowWeb3ProviderModal,provider:e.provider}}))(Dc),Lc=(a.Component,function(e){var t=e.name,n=void 0===t?"":t,a=e.path,s=void 0===a?"/":a,r=e.icon,i=void 0===r?null:r,o=e.disabled,c=void 0!==o&&o,l=e.subLinkItems,u=void 0===l?[]:l,d=e.isExternal;return{name:n,path:s,icon:i,disabled:c,subLinkItems:u,isExternal:void 0!==d&&d}}),Fc={swap:Lc({name:"Swap",path:"/swap",icon:Object(ws.jsx)(Js.a,{}),disabled:!1}),primary:Lc({name:"Primary Market",path:"/primary",disabled:!1,icon:Object(ws.jsx)(yc.a,{})}),staking:Lc({name:"Staking",path:"/staking",disabled:!1,icon:Object(ws.jsx)(xc.a,{})}),governance:Lc({name:"Governance",path:"/governance",disabled:!1,icon:Object(ws.jsx)(Js.c,{})}),docs:Lc({name:"Docs",path:"https://docs.tranchess.com",icon:Object(ws.jsx)(Js.b,{}),isExternal:!0,disabled:!1})},Uc=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={shouldShowMobileMenu:!1,shouldShowSubLinks:!1,activeLinkKey:null},a.handleClickWindow=a.handleClickWindow.bind(Object(Ms.a)(a)),a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleClickWindow)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClickWindow)}},{key:"_shouldShowWalletProvider",value:function(){var e=this.props.location;return h.a.some(["/staking","/primary","/swap","/governance","/simulator"],(function(t){return h.a.startsWith(e.pathname,t)}))}},{key:"handleClickWindow",value:function(){var e=this.state,t=e.activeLinkKey;e.shouldShowSubLinks&&!h.a.isNil(t)&&this.setState({shouldShowSubLinks:!1,activeLinkKey:null})}},{key:"SubLinks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;return Object(ws.jsx)("div",{className:"header--sub-links"+(n?"":" hidden"),children:h.a.map(t,(function(t,n){return Object(ws.jsx)(ks.b,{to:t.path,children:Object(ws.jsxs)("button",{onClick:function(n){if(h.a.isNil(t.path)||h.a.isEmpty(t.path))return n.preventDefault(),void n.stopPropagation();e.setState({shouldShowSubLinks:!1,activeLinkKey:a})},children:[!h.a.isNil(t.icon)&&t.icon,t.name]},n)},n)}))})}},{key:"HeaderLinkButton",value:function(e){var t=this,n=e.label,a=void 0===n?"":n,s=e.key,r=void 0===s?"":s,i=e.isFocused,o=void 0!==i&&i,c=e.hasSubLinks,l=void 0!==c&&c,u=this.state.activeLinkKey;return Object(ws.jsx)("button",{className:"header--link-button"+(o?" focused":""),onMouseEnter:function(){t.setState({activeLinkKey:r,shouldShowSubLinks:!0})},onMouseLeave:function(){u!==r||l||t.setState({activeLinkKey:null})},children:a})}},{key:"MobileHeader",value:function(){var e=this,t=this.state.shouldShowMobileMenu;return Object(ws.jsxs)("div",{className:"header--mobile-header",children:[Object(ws.jsx)("button",{className:"header--mobile-header--toggle-button",onClick:function(){e.setState({shouldShowMobileMenu:!t})},children:t?Object(ws.jsx)(Jo.a,{}):Object(ws.jsx)(Jo.c,{})}),t&&Object(ws.jsxs)("div",{className:"header--mobile-header--menu",children:[Object(ws.jsx)("div",{className:"header--mobile-header--menu--main",children:h.a.map(Fc,(function(t,n){var a=t.name,s=t.path,r=t.isExternal;return Object(ws.jsx)(ks.b,{to:{pathname:s},target:r?"_blank":"",children:Object(ws.jsx)("button",{onClick:function(){e.setState({shouldShowMobileMenu:!1})},children:a})},n)}))}),Object(ws.jsx)("div",{className:"header--mobile-header--wallet-provider clearfix",children:Object(ws.jsx)(Pc,{})})]})]})}},{key:"render",value:function(){var e=this,t=this.props.location,n=this.state,a=n.activeLinkKey,s=n.shouldShowSubLinks,r=t.pathname,i=this._shouldShowWalletProvider();return Object(ws.jsxs)("div",{className:"header",children:[!1,Object(ws.jsxs)("div",{className:"header--body clearfix",children:[Object(ws.jsx)(ks.b,{to:"/",children:Object(ws.jsxs)("div",{className:"header--logo",onClick:function(){e.setState({shouldShowMobileMenu:!1})},children:[Object(ws.jsx)("img",{className:"vertical-centered",src:Oc}),Object(ws.jsx)("span",{children:"TRANCHESS"})]})}),Object(ws.jsx)("div",{className:"header--links",onClick:function(e){e.stopPropagation()},children:h.a.map(Fc,(function(t,n){var i=t.name,o=t.path,c=t.subLinkItems,l=t.disabled,u=t.isExternal;return Object(ws.jsxs)("div",{className:"header--links--item",children:[l||h.a.isNil(o)?e.HeaderLinkButton({label:i,key:n,isFocused:a===n||h.a.isNil(a)&&h.a.startsWith(r,o),hasSubLinks:!h.a.isEmpty(c)}):Object(ws.jsx)(ks.b,{to:{pathname:o},target:u?"_blank":null,children:e.HeaderLinkButton({label:i,key:n,isFocused:a===n||h.a.isNil(a)&&h.a.startsWith(r,o),hasSubLinks:!h.a.isEmpty(c)})}),e.SubLinks(c,!h.a.isEmpty(c)&&s&&a===n,n)]},n)}))}),this.MobileHeader(),i&&Object(ws.jsx)("div",{className:"header--wallet-provider",children:Object(ws.jsx)(Pc,{})})]})]})}}]),n}(a.Component);var Hc=Object(xs.f)(Object(o.c)((function(e){return{provider:e.provider}}))(Uc)),Vc=n.p+"static/media/spinner-yellow.b337ef79.svg",Wc=n(240),Yc=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={messagesRemoving:{},isMaximized:!0},a._mounted=!1,a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentDidUpdate",value:function(e){var t=this,n=e.globalMessages,a=this.props,s=a.dispatch,r=a.globalMessages,i=h.a.filter(n,(function(e){return e.type!==We.PENDING&&e.type!==We.SERVICE_PENDING})).map((function(e){return e.id})),o=h.a.filter(r,(function(e){return e.type!==We.PENDING&&e.type!==We.SERVICE_PENDING})).map((function(e){return e.id})),c=h.a.filter(n,(function(e){return e.type===We.SERVICE_PENDING})).map((function(e){return e.id})),l=h.a.filter(r,(function(e){return e.type===We.SERVICE_PENDING})).map((function(e){return e.id})),u=h.a.difference(o,i),d=h.a.difference(l,c),m={},p={};h.a.forEach(u,(function(e){m[e]=1,setTimeout((function(){s(Ge(e))}),3400)})),h.a.forEach(d,(function(e){p[e]=1,setTimeout((function(){s(Ge(e))}),10400)})),h.a.isEmpty(m)||this._mounted&&setTimeout((function(){t._updateMessagesRemoving(m)}),3e3),h.a.isEmpty(p)||this._mounted&&setTimeout((function(){t._updateMessagesRemoving(p)}),1e4)}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"_updateMessagesRemoving",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState((function(t){return{messagesRemoving:Object.assign({},t.messagesRemoving,e)}}))}},{key:"render",value:function(){var e=this,t=this.props.globalMessages,n=this.state,a=n.messagesRemoving,s=n.isMaximized,r=h.a.some(t,(function(e){return e.type===We.ERROR})),i=P[56];return h.a.isEmpty(t)?null:Object(ws.jsxs)("div",{className:"global-messages",children:[Object(ws.jsxs)("div",{className:"global-messages--header",children:[Object(ws.jsx)("div",{className:"global-messages--title",children:"Notification".concat(h.a.size(t)>1?"s (".concat(h.a.size(t),")"):"")}),Object(ws.jsx)("button",{onClick:function(){e.setState({isMaximized:!s})},children:s?Object(ws.jsx)(Wc.b,{}):Object(ws.jsx)(Wc.a,{})})]}),(s||r)&&Object(ws.jsx)("div",{className:"global-messages--main",children:h.a.map(t,(function(e){var t=e.id,n=e.type,s=e.text,r=e.hash;return Object(ws.jsxs)("div",{className:"global-messages--item"+(n?" ".concat(n):""),style:h.a.has(a,t)?{opacity:0,transform:"translateX(10%)",padding:0}:{},children:[Object(ws.jsxs)("div",{className:"global-messages--item--icon ".concat(n),children:[[We.PENDING,We.SERVICE_PENDING].includes(n)&&Object(ws.jsx)("img",{src:Vc}),n===We.SUCCESS&&Object(ws.jsx)(Rs.h,{}),n===We.ERROR&&Object(ws.jsx)(Rs.l,{})]}),Object(ws.jsx)("div",{className:"global-messages--item--text",children:s}),r&&i&&Object(ws.jsx)("a",{href:"".concat(i.explorerUrl,"/tx/").concat(r),target:"_blank",rel:"noreferrer",children:Object(ws.jsx)("div",{className:"global-messages--item--hash",children:"".concat(r.substring(0,5),"...").concat(r.substring(r.length-4))})})]},t)}))})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.globalMessages.map((function(e){return e.id})),a=h.a.cloneDeep(t.messagesRemoving);return h.a.keys(a).forEach((function(e){n.includes(e)||delete a[e]})),{messagesRemoving:a}}}]),n}(a.Component);var Kc=Object(o.c)((function(e){return{globalMessages:e.layout.globalMessages}}))(Yc),zc={WHITE:"WHITE",BLACK:"BLACK"},Gc=function(){var e=localStorage.theme;return h.a.keys(zc).includes(e),zc.BLACK},qc=function(e){Object(As.a)(n,e);var t=Object(Ns.a)(n);function n(e){var a;return Object(ys.a)(this,n),(a=t.call(this,e)).state={theme:Gc()},a}return Object(Os.a)(n,[{key:"componentDidMount",value:function(){document.body.classList.add(Gc())}},{key:"render",value:function(){var e=this,t=this.state.theme;return Object(ws.jsx)("div",{className:"theme hidden",children:h.a.map(zc,(function(n){return Object(ws.jsx)("button",{className:"theme--button ".concat(n)+(n===t?" selected":""),onClick:function(){!function(e){localStorage.theme=e}(n),e.setState({theme:n},(function(){document.body.classList.remove(t),document.body.classList.add(Gc())}))}},n)}))})}}]),n}(a.Component);n(771),n(772),n(773),n(774),n(775),n(776),n(777),n(778),n(779),n(780),n(781),n(782),n(783),n(784),n(368),n(785),n(786),n(787),n(788),n(789),n(790),n(791),n(792),n(793);i.a.render(Object(ws.jsx)(o.a,{store:js,children:Object(ws.jsxs)(ks.a,{children:[Object(ws.jsx)(Hc,{}),Object(ws.jsx)(Kc,{}),Object(ws.jsxs)(xs.c,{children:[Object(ws.jsx)(xs.a,{exact:!0,path:"/",component:mo}),Object(ws.jsx)(xs.a,{path:"/primary",component:zi}),Object(ws.jsx)(xs.a,{path:"/swap",component:po}),Object(ws.jsx)(xs.a,{path:"/staking",component:Ko}),Object(ws.jsx)(xs.a,{path:"/governance",component:Xo}),Object(ws.jsx)(xs.a,{path:"/compare",component:pc}),Object(ws.jsx)(xs.a,{path:"/simulator",component:kc}),Object(ws.jsx)(xs.a,{path:"/*",component:Ss})]}),Object(ws.jsx)(qc,{})]})}),document.getElementById("root"),(function(){document.getElementById("page-loading-animation").remove(),document.onreadystatechange=function(){if("complete"==document.readyState){var e=js.getState().wallet.web3ProviderType;Object.keys(et).includes(e)&&st(e)}}})),"serviceWorker"in navigator&&navigator.serviceWorker.register("/worker.js").then((function(e){console.log("Service Worker registration completed with scope: ",e.scope)})).catch((function(e){console.error("Service Worker registration failed",e)}))}},[[794,1,2]]]);
//# sourceMappingURL=main.fd8363ca.chunk.js.map